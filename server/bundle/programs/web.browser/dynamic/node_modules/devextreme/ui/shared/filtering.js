function(e,t,r){"use strict";var a=e("../../core/utils/type"),n=e("../../core/utils/array").inArray,i=e("../../core/utils/iterator"),s=["year","month","day"],u=["year","month","day","hour","minute"],l,o,c,h,d,p,f;r.exports=(l=function(e,t){var r=e.dataField||e.selector;return"search"===t&&(r=e.displayField||e.calculateDisplayValue||r),r},o=function(e){return e.getHours()+e.getMinutes()+e.getSeconds()+e.getMilliseconds()<1},c=function(e){return"date"===e||"datetime"===e},h=function(e){return a.isDate(e)?[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]:i.map((""+e).split("/"),function(e,t){return 1===t?Number(e)-1:Number(e)})},d=function(e,t){var r,n,i,s=this,u=l(this,t);if(Array.isArray(e)&&a.isDefined(e[0])&&a.isDefined(e[1]))return n=[u,">=",e[0]],i=[u,"<=",e[1]],c(this.dataType)&&o(e[1])&&((r=new Date(e[1].getTime())).setDate(e[1].getDate()+1),i=[u,"<",r]),[n,"and",i]},p=function(e,t,a){var n,i,s,u=this,o=h(e),c=l(this,a);switch("headerFilter"===a?s=r.exports.getGroupInterval(this)[o.length-1]:"datetime"===this.dataType&&(s="minute"),s){case"year":n=new Date(o[0],0,1),i=new Date(o[0]+1,0,1);break;case"month":n=new Date(o[0],o[1],1),i=new Date(o[0],o[1]+1,1);break;case"quarter":n=new Date(o[0],3*o[1],1),i=new Date(o[0],3*o[1]+3,1);break;case"hour":n=new Date(o[0],o[1],o[2],o[3]),i=new Date(o[0],o[1],o[2],o[3]+1);break;case"minute":n=new Date(o[0],o[1],o[2],o[3],o[4]),i=new Date(o[0],o[1],o[2],o[3],o[4]+1);break;case"second":n=new Date(o[0],o[1],o[2],o[3],o[4],o[5]),i=new Date(o[0],o[1],o[2],o[3],o[4],o[5]+1);break;default:n=new Date(o[0],o[1],o[2]),i=new Date(o[0],o[1],o[2]+1)}switch(t){case"<":return[c,"<",n];case"<=":return[c,"<",i];case">":return[c,">=",i];case">=":return[c,">=",n];case"<>":return[[c,"<",n],"or",[c,">=",i]];default:return[[c,">=",n],"and",[c,"<",i]]}},f=function(e,t,n){var i=this,s=l(this,n),u=r.exports.getGroupInterval(this);if("headerFilter"===n&&u&&a.isDefined(e)){var o,c,h,d=(""+e).split("/"),p=Number(d[d.length-1]),f;return[c=[s,">=",p],"and",h=[s,"<",p+(o=u[d.length-1])]]}return[s,t||"=",e]},{defaultCalculateFilterExpression:function(e,t,r){var n=this,i=l(this,r),s=this.calculateDisplayValue&&"search"===r,u=s&&this.lookup&&this.lookup.dataType||this.dataType,o=null;if("headerFilter"!==r&&"filterBuilder"!==r||null!==e)if("string"!==u||this.lookup&&!s){if("between"===t)return d.apply(this,[e,r]);if(c(u)&&a.isDefined(e))return p.apply(this,arguments);if("number"===u)return f.apply(this,arguments);"object"!==u&&(o=[i,t||"=",e])}else o=[i,t||"contains",e];else o=[i,t||"=",null],"string"===u&&(o=[o,"="===t?"or":"and",[i,t||"=",""]]);return o},getGroupInterval:function(e){var t,r=[],i=["year","month","day","hour","minute","second"],l=e.headerFilter&&e.headerFilter.groupInterval,o="quarter"===l?"month":l;return c(e.dataType)&&null!==l?(r="datetime"===e.dataType?u:s,(t=n(o,i))>=0?((r=i.slice(0,t)).push(l),r):r):a.isDefined(l)?Array.isArray(l)?l:[l]:void 0}})}

