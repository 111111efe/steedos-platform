function(e,t,n,s,i){var r;!function(){"use strict";(r=function(e,t,n,s){s=s||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=s.flags||{},this.memoized={},this.loaded=!1;var r=this,o,a,l,u,h;function c(e,t){var n=r._readFile(e,null,s.asyncLoad);s.asyncLoad?n.then(function(e){t(e)}):t(n)}function p(e){t=e,n&&d()}function f(e){n=e,t&&d()}function d(){for(r.rules=r._parseAFF(t),r.compoundRuleCodes={},a=0,u=r.compoundRules.length;a<u;a++){var e=r.compoundRules[a];for(l=0,h=e.length;l<h;l++)r.compoundRuleCodes[e[l]]=[]}for(a in"ONLYINCOMPOUND"in r.flags&&(r.compoundRuleCodes[r.flags.ONLYINCOMPOUND]=[]),r.dictionaryTable=r._parseDIC(n),r.compoundRuleCodes)0===r.compoundRuleCodes[a].length&&delete r.compoundRuleCodes[a];for(a=0,u=r.compoundRules.length;a<u;a++){var i=r.compoundRules[a],o="";for(l=0,h=i.length;l<h;l++){var c=i[l];c in r.compoundRuleCodes?o+="("+r.compoundRuleCodes[c].join("|")+")":o+=c}r.compoundRules[a]=new RegExp(o,"i")}r.loaded=!0,s.asyncLoad&&s.loadedCallback&&s.loadedCallback(r)}return e&&(r.dictionary=e,t&&n?d():"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(o=s.dictionaryPath?s.dictionaryPath:"typo/dictionaries",t||c(chrome.extension.getURL(o+"/"+e+"/"+e+".aff"),p),n||c(chrome.extension.getURL(o+"/"+e+"/"+e+".dic"),f)):(o=s.dictionaryPath?s.dictionaryPath:void 0!==i?i+"/dictionaries":"./dictionaries",t||c(o+"/"+e+"/"+e+".aff",p),n||c(o+"/"+e+"/"+e+".dic",f))),this}).prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(t,n,s){if(n=n||"utf8","undefined"!=typeof XMLHttpRequest){var i,r=new XMLHttpRequest;return r.open("GET",t,s),s&&(i=new Promise(function(e,t){r.onload=function(){200===r.status?e(r.responseText):t(r.statusText)},r.onerror=function(){t(r.statusText)}})),r.overrideMimeType&&r.overrideMimeType("text/plain; charset="+n),r.send(null),s?i:r.responseText}if(void 0!==e){var o=e("fs");try{if(o.existsSync(t)){var a=o.statSync(t),l=o.openSync(t,"r"),u=new Buffer(a.size);return o.readSync(l,u,0,u.length,null),u.toString(n,0,u.length)}console.log("Path "+t+" does not exist.")}catch(h){return console.log(h),""}}},_parseAFF:function(e){var t={},n,s,i,r,o,a,l,u,h=(e=this._removeAffixComments(e)).split("\n");for(o=0,l=h.length;o<l;o++){var c=(n=h[o]).split(/\s+/),p=c[0];if("PFX"==p||"SFX"==p){var f=c[1],d=c[2],g=[];for(a=o+1,u=o+1+(i=parseInt(c[3],10));a<u;a++){var m=(r=(s=h[a]).split(/\s+/))[2],v=r[3].split("/"),y=v[0];"0"===y&&(y="");var C=this.parseRuleCodes(v[1]),R=r[4],b={};b.add=y,C.length>0&&(b.continuationClasses=C),"."!==R&&(b.match="SFX"===p?new RegExp(R+"$"):new RegExp("^"+R)),"0"!=m&&(b.remove="SFX"===p?new RegExp(m+"$"):m),g.push(b)}t[f]={type:p,combineable:"Y"==d,entries:g},o+=i}else if("COMPOUNDRULE"===p){for(a=o+1,u=o+1+(i=parseInt(c[1],10));a<u;a++)r=(n=h[a]).split(/\s+/),this.compoundRules.push(r[1]);o+=i}else"REP"===p?3===(r=n.split(/\s+/)).length&&this.replacementTable.push([r[1],r[2]]):this.flags[p]=c[1]}return t},_removeAffixComments:function(e){return e=(e=(e=(e=e.replace(/^\s*#.*$/gm,"")).replace(/^\s\s*/m,"").replace(/\s\s*$/m,"")).replace(/\n{2,}/g,"\n")).replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(e){var t=(e=this._removeDicComments(e)).split("\n"),n={};function s(e,t){n.hasOwnProperty(e)||(n[e]=null),t.length>0&&(null===n[e]&&(n[e]=[]),n[e].push(t))}for(var i=1,r=t.length;i<r;i++){var o,a=t[i].split("/",2),l=a[0];if(a.length>1){var u=this.parseRuleCodes(a[1]);"NEEDAFFIX"in this.flags&&-1!=u.indexOf(this.flags.NEEDAFFIX)||s(l,u);for(var h=0,c=u.length;h<c;h++){var p=u[h],f=this.rules[p];if(f)for(var d=this._applyRule(l,f),g=0,m=d.length;g<m;g++){var v=d[g];if(s(v,[]),f.combineable)for(var y=h+1;y<c;y++){var C=u[y],R=this.rules[C];if(R&&R.combineable&&f.type!=R.type)for(var b=this._applyRule(v,R),w=0,x=b.length;w<x;w++){var F;s(b[w],[])}}}p in this.compoundRuleCodes&&this.compoundRuleCodes[p].push(l)}}else s(l.trim(),[])}return n},_removeDicComments:function(e){return e=e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"===this.flags.FLAG){for(var t=[],n=0,s=e.length;n<s;n+=2)t.push(e.substr(n,2));return t}return"num"===this.flags.FLAG?e.split(","):void 0},_applyRule:function(e,t){for(var n=t.entries,s=[],i=0,r=n.length;i<r;i++){var o=n[i];if(!o.match||e.match(o.match)){var a=e;if(o.remove&&(a=a.replace(o.remove,"")),"SFX"===t.type?a+=o.add:a=o.add+a,s.push(a),"continuationClasses"in o)for(var l=0,u=o.continuationClasses.length;l<u;l++){var h=this.rules[o.continuationClasses[l]];h&&(s=s.concat(this._applyRule(a,h)))}}}return s},check:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var n=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0}var s=t.toLowerCase();if(s!==t){if(this.hasFlag(s,"KEEPCASE"))return!1;if(this.checkExact(s))return!0}return!1},checkExact:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t=this.dictionaryTable[e],n,s;if(void 0===t){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(n=0,s=this.compoundRules.length;n<s;n++)if(e.match(this.compoundRules[n]))return!0}else{if(null===t)return!0;if("object"==typeof t)for(n=0,s=t.length;n<s;n++)if(!this.hasFlag(e,"ONLYINCOMPOUND",t[n]))return!0}return!1},hasFlag:function(e,t,n){if(!this.loaded)throw"Dictionary not loaded.";return!!(t in this.flags&&(void 0===n&&(n=Array.prototype.concat.apply([],this.dictionaryTable[e])),n&&-1!==n.indexOf(this.flags[t])))},alphabet:"",suggest:function(e,t){if(!this.loaded)throw"Dictionary not loaded.";if(t=t||5,this.memoized.hasOwnProperty(e)){var n=this.memoized[e].limit;if(t<=n||this.memoized[e].suggestions.length<n)return this.memoized[e].suggestions.slice(0,t)}if(this.check(e))return[];for(var s=0,i=this.replacementTable.length;s<i;s++){var r=this.replacementTable[s];if(-1!==e.indexOf(r[0])){var o=e.replace(r[0],r[1]);if(this.check(o))return[o]}}var a=this;function l(e){var t=[],n,s,i,r,o,l;for(n=0,r=e.length;n<r;n++){var u=e[n];for(s=0,o=u.length+1;s<o;s++){var h=[u.substring(0,s),u.substring(s)];if(h[1]&&t.push(h[0]+h[1].substring(1)),h[1].length>1&&h[1][1]!==h[1][0]&&t.push(h[0]+h[1][1]+h[1][0]+h[1].substring(2)),h[1])for(i=0,l=a.alphabet.length;i<l;i++)a.alphabet[i]!=h[1].substring(0,1)&&t.push(h[0]+a.alphabet[i]+h[1].substring(1));if(h[1])for(i=0,l=a.alphabet.length;i<l;i++)t.push(h[0]+a.alphabet[i]+h[1])}}return t}function u(e){for(var t=[],n=0,s=e.length;n<s;n++)a.check(e[n])&&t.push(e[n]);return t}function h(e){var n=l([e]),s=l(n),i=u(n.concat(s)),r,o,h={};for(r=0,o=i.length;r<o;r++)i[r]in h?h[i[r]]+=1:h[i[r]]=1;var c=[];for(r in h)h.hasOwnProperty(r)&&c.push([r,h[r]]);function p(e,t){return e[1]<t[1]?-1:1}c.sort(p).reverse();var f=[],d="lowercase";for(e.toUpperCase()===e?d="uppercase":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(d="capitalized"),r=0,o=Math.min(t,c.length);r<o;r++)"uppercase"===d?c[r][0]=c[r][0].toUpperCase():"capitalized"===d&&(c[r][0]=c[r][0].substr(0,1).toUpperCase()+c[r][0].substr(1)),a.hasFlag(c[r][0],"NOSUGGEST")||f.push(c[r][0]);return f}return a.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[e]={suggestions:h(e),limit:t},this.memoized[e].suggestions}}}(),void 0!==n&&(n.exports=r)}

