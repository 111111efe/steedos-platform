(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var global = Package.meteor.global;
var meteorEnv = Package.meteor.meteorEnv;
var JsonRoutes = Package['simple:json-routes'].JsonRoutes;
var RestMiddleware = Package['simple:json-routes'].RestMiddleware;
var InstanceManager = Package['steedos:workflow'].InstanceManager;
var WorkflowManager_format = Package['steedos:workflow'].WorkflowManager_format;
var Workflow = Package['steedos:workflow'].Workflow;
var SteedosTable = Package['steedos:workflow'].SteedosTable;
var InstanceReadOnlyTemplate = Package['steedos:workflow'].InstanceReadOnlyTemplate;
var TemplateManager = Package['steedos:workflow'].TemplateManager;
var CoreForm = Package['steedos:workflow'].CoreForm;
var InstanceNumberRules = Package['steedos:workflow'].InstanceNumberRules;
var getHandlersManager = Package['steedos:workflow'].getHandlersManager;
var permissionManager = Package['steedos:workflow'].permissionManager;
var workflowTemplate = Package['steedos:workflow'].workflowTemplate;
var approveManager = Package['steedos:workflow'].approveManager;
var stepManager = Package['steedos:workflow'].stepManager;
var flowManager = Package['steedos:workflow'].flowManager;
var formManager = Package['steedos:workflow'].formManager;
var meteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;
var Promise = Package.promise.Promise;

/* Package-scope variables */
var __coffeescriptShare;

(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/steedos_workflow-chart/core.coffee                                                                         //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function(){

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/steedos_workflow-chart/routes/chart.coffee                                                                 //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;
var FlowversionAPI;
FlowversionAPI = {
  traceMaxApproveCount: 10,
  traceSplitApprovesIndex: 5,
  isExpandApprove: false,
  getAbsoluteUrl: function (url) {
    var rootUrl;
    rootUrl = __meteor_runtime_config__ ? __meteor_runtime_config__.ROOT_URL_PATH_PREFIX : "";

    if (rootUrl) {
      url = rootUrl + url;
    }

    return url;
  },
  writeResponse: function (res, httpCode, body) {
    res.statusCode = httpCode;
    return res.end(body);
  },
  sendInvalidURLResponse: function (res) {
    return this.writeResponse(res, 404, "url must has querys as instance_id.");
  },
  sendAuthTokenExpiredResponse: function (res) {
    return this.writeResponse(res, 401, "the auth_token has expired.");
  },
  replaceErrorSymbol: function (str) {
    return str.replace(/\"/g, "&quot;").replace(/\n/g, "<br/>");
  },
  getStepHandlerName: function (step) {
    var approverNames, stepHandlerName;

    switch (step.deal_type) {
      case 'specifyUser':
        approverNames = step.approver_users.map(function (userId) {
          var user;
          user = db.users.findOne(userId);

          if (user) {
            return user.name;
          } else {
            return "";
          }
        });
        stepHandlerName = approverNames.join(",");
        break;

      case 'applicantRole':
        approverNames = step.approver_roles.map(function (roleId) {
          var role;
          role = db.flow_roles.findOne(roleId);

          if (role) {
            return role.name;
          } else {
            return "";
          }
        });
        stepHandlerName = approverNames.join(",");
        break;

      default:
        stepHandlerName = '';
        break;
    }

    return stepHandlerName;
  },
  getStepName: function (stepName, stepHandlerName) {
    if (stepName) {
      stepName = "<div class='graph-node'> <div class='step-name'>" + stepName + "</div> <div class='step-handler-name'>" + stepHandlerName + "</div> </div>";
      stepName = FlowversionAPI.replaceErrorSymbol(stepName);
    } else {
      stepName = "";
    }

    return stepName;
  },
  generateStepsGraphSyntax: function (steps, currentStepId, isConvertToString) {
    var graphSyntax, nodes;
    nodes = ["graph TD"];
    steps.forEach(function (step) {
      var lines;
      lines = step.lines;

      if (lines != null ? lines.length : void 0) {
        return lines.forEach(function (line) {
          var stepHandlerName, stepName, toStepName;

          if (step.name) {
            if (step.step_type === "condition") {
              nodes.push("	class " + step._id + " condition;");
            }

            stepHandlerName = FlowversionAPI.getStepHandlerName(step);
            stepName = FlowversionAPI.getStepName(step.name, stepHandlerName);
          } else {
            stepName = "";
          }

          toStepName = steps.findPropertyByPK("_id", line.to_step).name;
          toStepName = FlowversionAPI.getStepName(toStepName, "");
          return nodes.push("	" + step._id + "(\"" + stepName + "\")-->" + line.to_step + "(\"" + toStepName + "\")");
        });
      }
    });

    if (currentStepId) {
      nodes.push("	class " + currentStepId + " current-step-node;");
    }

    if (isConvertToString) {
      graphSyntax = nodes.join("\n");
      return graphSyntax;
    } else {
      return nodes;
    }
  },
  getApproveJudgeText: function (judge) {
    var judgeText, locale;
    locale = "zh-CN";

    switch (judge) {
      case 'approved':
        judgeText = TAPi18n.__('Instance State approved', {}, locale);
        break;

      case 'rejected':
        judgeText = TAPi18n.__('Instance State rejected', {}, locale);
        break;

      case 'terminated':
        judgeText = TAPi18n.__('Instance State terminated', {}, locale);
        break;

      case 'reassigned':
        judgeText = TAPi18n.__('Instance State reassigned', {}, locale);
        break;

      case 'relocated':
        judgeText = TAPi18n.__('Instance State relocated', {}, locale);
        break;

      case 'retrieved':
        judgeText = TAPi18n.__('Instance State retrieved', {}, locale);
        break;

      case 'returned':
        judgeText = TAPi18n.__('Instance State returned', {}, locale);
        break;

      case 'readed':
        judgeText = TAPi18n.__('Instance State readed', {}, locale);
        break;

      default:
        judgeText = '';
        break;
    }

    return judgeText;
  },
  getTraceName: function (traceName, approveHandlerName) {
    if (traceName) {
      traceName = "<div class='graph-node'> <div class='trace-name'>" + traceName + "</div> <div class='trace-handler-name'>" + approveHandlerName + "</div> </div>";
      traceName = FlowversionAPI.replaceErrorSymbol(traceName);
    } else {
      traceName = "";
    }

    return traceName;
  },
  getTraceFromApproveCountersWithType: function (trace) {
    var approves, counters;
    counters = {};
    approves = trace.approves;

    if (!approves) {
      return null;
    }

    approves.forEach(function (approve) {
      if (approve.from_approve_id) {
        if (!counters[approve.from_approve_id]) {
          counters[approve.from_approve_id] = {};
        }

        if (counters[approve.from_approve_id][approve.type]) {
          return counters[approve.from_approve_id][approve.type]++;
        } else {
          return counters[approve.from_approve_id][approve.type] = 1;
        }
      }
    });
    return counters;
  },
  getTraceCountersWithType: function (trace, traceFromApproveCounters) {
    var approves, counters, isExpandApprove, traceMaxApproveCount;
    counters = {};
    approves = trace.approves;

    if (!approves) {
      return null;
    }

    traceMaxApproveCount = FlowversionAPI.traceMaxApproveCount;
    isExpandApprove = FlowversionAPI.isExpandApprove;
    approves.forEach(function (toApprove) {
      var toApproveFromId, toApproveHandlerName, toApproveType;
      toApproveType = toApprove.type;
      toApproveFromId = toApprove.from_approve_id;
      toApproveHandlerName = toApprove.handler_name;

      if (!toApproveFromId) {
        return;
      }

      return approves.forEach(function (fromApprove) {
        var counter, counter2, counterContent, ref;

        if (fromApprove._id === toApproveFromId) {
          counter = counters[toApproveFromId];

          if (!counter) {
            counter = counters[toApproveFromId] = {};
          }

          if (!counter[toApprove.type]) {
            counter[toApprove.type] = [];
          }

          counter2 = counter[toApprove.type];

          if ((ref = traceFromApproveCounters[toApprove._id]) != null ? ref[toApproveType] : void 0) {
            return counter2.push({
              from_type: fromApprove.type,
              from_approve_handler_name: fromApprove.handler_name,
              to_approve_id: toApprove._id,
              to_approve_handler_name: toApprove.handler_name
            });
          } else {
            counterContent = isExpandApprove ? null : counter2.findPropertyByPK("is_total", true);

            if (counterContent) {
              counterContent.count++;

              if (!(counterContent.count > traceMaxApproveCount)) {
                return counterContent.to_approve_handler_names.push(toApprove.handler_name);
              }
            } else {
              return counter2.push({
                from_type: fromApprove.type,
                from_approve_handler_name: fromApprove.handler_name,
                to_approve_id: toApprove._id,
                count: 1,
                to_approve_handler_names: [toApprove.handler_name],
                is_total: true
              });
            }
          }
        }
      });
    });
    return counters;
  },
  pushApprovesWithTypeGraphSyntax: function (nodes, trace) {
    var approves, currentTraceName, extraHandlerNamesCounter, fromApprove, fromApproveId, results, splitIndex, tempHandlerNames, toApproveId, toApproveType, toApproves, traceCounters, traceFromApproveCounters, traceMaxApproveCount;
    traceFromApproveCounters = FlowversionAPI.getTraceFromApproveCountersWithType(trace);
    traceCounters = FlowversionAPI.getTraceCountersWithType(trace, traceFromApproveCounters);

    if (!traceCounters) {
      return;
    }

    extraHandlerNamesCounter = {};
    traceMaxApproveCount = FlowversionAPI.traceMaxApproveCount;
    splitIndex = FlowversionAPI.traceSplitApprovesIndex;
    currentTraceName = trace.name;

    for (fromApproveId in meteorBabelHelpers.sanitizeForInObject(traceCounters)) {
      fromApprove = traceCounters[fromApproveId];

      for (toApproveType in meteorBabelHelpers.sanitizeForInObject(fromApprove)) {
        toApproves = fromApprove[toApproveType];
        toApproves.forEach(function (toApprove) {
          var extraCount, isTypeNode, strToHandlerNames, toHandlerNames, traceName, typeName;
          typeName = "";

          switch (toApproveType) {
            case 'cc':
              typeName = "传阅";
              break;

            case 'forward':
              typeName = "转发";
              break;

            case 'distribute':
              typeName = "分发";
          }

          isTypeNode = ["cc", "forward", "distribute"].indexOf(toApprove.from_type) >= 0;

          if (isTypeNode) {
            traceName = toApprove.from_approve_handler_name;
          } else {
            traceName = FlowversionAPI.getTraceName(currentTraceName, toApprove.from_approve_handler_name);
          }

          if (toApprove.is_total) {
            toHandlerNames = toApprove.to_approve_handler_names;

            if (splitIndex && toApprove.count > splitIndex) {
              toHandlerNames.splice(splitIndex, 0, "<br/>,");
            }

            strToHandlerNames = toHandlerNames.join(",").replace(",,", "");
            extraCount = toApprove.count - traceMaxApproveCount;

            if (extraCount > 0) {
              strToHandlerNames += "等" + toApprove.count + "人";

              if (!extraHandlerNamesCounter[fromApproveId]) {
                extraHandlerNamesCounter[fromApproveId] = {};
              }

              extraHandlerNamesCounter[fromApproveId][toApproveType] = toApprove.to_approve_id;
            }
          } else {
            strToHandlerNames = toApprove.to_approve_handler_name;
          }

          if (isTypeNode) {
            return nodes.push("	" + fromApproveId + ">\"" + traceName + "\"]--" + typeName + "-->" + toApprove.to_approve_id + ">\"" + strToHandlerNames + "\"]");
          } else {
            return nodes.push("	" + fromApproveId + "(\"" + traceName + "\")--" + typeName + "-->" + toApprove.to_approve_id + ">\"" + strToHandlerNames + "\"]");
          }
        });
      }
    }

    approves = trace.approves;

    if (!_.isEmpty(extraHandlerNamesCounter)) {
      results = [];

      for (fromApproveId in meteorBabelHelpers.sanitizeForInObject(extraHandlerNamesCounter)) {
        fromApprove = extraHandlerNamesCounter[fromApproveId];
        results.push(function () {
          var results1;
          results1 = [];

          for (toApproveType in meteorBabelHelpers.sanitizeForInObject(fromApprove)) {
            toApproveId = fromApprove[toApproveType];
            tempHandlerNames = [];
            approves.forEach(function (approve) {
              var ref;

              if (fromApproveId === approve.from_approve_id) {
                if (!((ref = traceFromApproveCounters[approve._id]) != null ? ref[toApproveType] : void 0)) {
                  return tempHandlerNames.push(approve.handler_name);
                }
              }
            });
            results1.push(nodes.push("	click " + toApproveId + " callback \"" + tempHandlerNames.join(",") + "\""));
          }

          return results1;
        }());
      }

      return results;
    }
  },
  generateTracesGraphSyntax: function (traces, isConvertToString) {
    var graphSyntax, lastApproves, lastTrace, nodes;
    nodes = ["graph TD"];
    lastTrace = null;
    lastApproves = [];
    traces.forEach(function (trace) {
      var currentTraceName, lines;
      lines = trace.previous_trace_ids;
      currentTraceName = trace.name;

      if (lines != null ? lines.length : void 0) {
        lines.forEach(function (line) {
          var currentFromTraceName, fromApproves, fromTrace, toApproves;
          fromTrace = traces.findPropertyByPK("_id", line);
          currentFromTraceName = fromTrace.name;
          fromApproves = fromTrace.approves;
          toApproves = trace.approves;
          lastTrace = trace;
          lastApproves = toApproves;
          return fromApproves.forEach(function (fromApprove) {
            var fromApproveHandlerName, fromTraceName, judgeText, toTraceName;
            fromApproveHandlerName = fromApprove.handler_name;

            if (toApproves != null ? toApproves.length : void 0) {
              return toApproves.forEach(function (toApprove) {
                var fromTraceName, judgeText, toTraceName;

                if (["cc", "forward", "distribute"].indexOf(toApprove.type) < 0) {
                  if (["cc", "forward", "distribute"].indexOf(fromApprove.type) < 0) {
                    fromTraceName = FlowversionAPI.getTraceName(currentFromTraceName, fromApproveHandlerName);
                    toTraceName = FlowversionAPI.getTraceName(currentTraceName, toApprove.handler_name);
                    judgeText = FlowversionAPI.getApproveJudgeText(fromApprove.judge);

                    if (judgeText) {
                      return nodes.push("	" + fromApprove._id + "(\"" + fromTraceName + "\")--" + judgeText + "-->" + toApprove._id + "(\"" + toTraceName + "\")");
                    } else {
                      return nodes.push("	" + fromApprove._id + "(\"" + fromTraceName + "\")-->" + toApprove._id + "(\"" + toTraceName + "\")");
                    }
                  }
                }
              });
            } else {
              if (["cc", "forward", "distribute"].indexOf(fromApprove.type) < 0) {
                fromTraceName = FlowversionAPI.getTraceName(currentFromTraceName, fromApproveHandlerName);
                toTraceName = FlowversionAPI.replaceErrorSymbol(currentTraceName);
                judgeText = FlowversionAPI.getApproveJudgeText(fromApprove.judge);

                if (judgeText) {
                  return nodes.push("	" + fromApprove._id + "(\"" + fromTraceName + "\")--" + judgeText + "-->" + trace._id + "(\"" + toTraceName + "\")");
                } else {
                  return nodes.push("	" + fromApprove._id + "(\"" + fromTraceName + "\")-->" + trace._id + "(\"" + toTraceName + "\")");
                }
              }
            }
          });
        });
      } else {
        trace.approves.forEach(function (approve) {
          var traceName;
          traceName = FlowversionAPI.getTraceName(currentTraceName, approve.handler_name);
          return nodes.push("	" + approve._id + "(\"" + traceName + "\")");
        });
      }

      return FlowversionAPI.pushApprovesWithTypeGraphSyntax(nodes, trace);
    });

    if (lastApproves != null) {
      lastApproves.forEach(function (lastApprove) {
        return nodes.push("	class " + lastApprove._id + " current-step-node;");
      });
    }

    if (isConvertToString) {
      graphSyntax = nodes.join("\n");
      return graphSyntax;
    } else {
      return nodes;
    }
  },
  sendHtmlResponse: function (req, res, type) {
    var currentStepId, error_msg, flowversion, graphSyntax, instance, instance_id, query, ref, ref1, steps, title, traces;
    query = req.query;
    instance_id = query.instance_id;

    if (!instance_id) {
      FlowversionAPI.sendInvalidURLResponse(res);
    }

    title = query.title;

    if (title) {
      title = decodeURIComponent(decodeURIComponent(title));
    } else {
      title = "Workflow Chart";
    }

    error_msg = "";
    graphSyntax = "";
    FlowversionAPI.isExpandApprove = false;

    if (type === "traces_expand") {
      type = "traces";
      FlowversionAPI.isExpandApprove = true;
    }

    switch (type) {
      case 'traces':
        instance = db.instances.findOne(instance_id, {
          fields: {
            traces: 1
          }
        });

        if (instance) {
          traces = instance.traces;

          if (traces != null ? traces.length : void 0) {
            graphSyntax = this.generateTracesGraphSyntax(traces);
          } else {
            error_msg = "没有找到当前申请单的流程步骤数据";
          }
        } else {
          error_msg = "当前申请单不存在或已被删除";
        }

        break;

      default:
        instance = db.instances.findOne(instance_id, {
          fields: {
            flow_version: 1,
            flow: 1,
            traces: {
              $slice: -1
            }
          }
        });

        if (instance) {
          currentStepId = (ref = instance.traces) != null ? (ref1 = ref[0]) != null ? ref1.step : void 0 : void 0;
          flowversion = WorkflowManager.getInstanceFlowVersion(instance);
          steps = flowversion != null ? flowversion.steps : void 0;

          if (steps != null ? steps.length : void 0) {
            graphSyntax = this.generateStepsGraphSyntax(steps, currentStepId);
          } else {
            error_msg = "没有找到当前申请单的流程步骤数据";
          }
        } else {
          error_msg = "当前申请单不存在或已被删除";
        }

        break;
    }

    return this.writeResponse(res, 200, "<!DOCTYPE html>\n<html>\n	<head>\n		<meta charset=\"utf-8\">\n		<meta name=\"viewport\" content=\"width=device-width,initial-scale=1,user-scalable=yes\">\n		<title>" + title + "</title>\n		<link rel=\"icon\" type=\"image/png\" sizes=\"192x192\" href=\"/favicons/android-chrome-192x192.png\">\n		<link rel=\"manifest\" href=\"/favicons/manifest.json\">\n		<meta name=\"mobile-web-app-capable\" content=\"yes\">\n		<meta name=\"theme-color\" content=\"#000\">\n		<meta name=\"application-name\">\n		<link rel=\"apple-touch-icon\" sizes=\"57x57\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-57x57.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"60x60\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-60x60.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-72x72.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"76x76\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-76x76.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-114x114.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"120x120\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-120x120.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"144x144\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-144x144.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"152x152\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-152x152.png") + "\">\n		<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"" + this.getAbsoluteUrl("/favicons/apple-touch-icon-180x180.png") + "\">\n		<meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n		<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black-translucent\">\n		<meta name=\"apple-mobile-web-app-title\">\n		<link rel=\"icon\" type=\"image/png\" sizes=\"228x228\" href=\"" + this.getAbsoluteUrl("/favicons/coast-228x228.png") + "\">\n		<link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"" + this.getAbsoluteUrl("/favicons/favicon-16x16.png") + "\">\n		<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"" + this.getAbsoluteUrl("/favicons/favicon-32x32.png") + "\">\n		<link rel=\"icon\" type=\"image/png\" sizes=\"96x96\" href=\"" + this.getAbsoluteUrl("/favicons/favicon-96x96.png") + "\">\n		<link rel=\"icon\" type=\"image/png\" sizes=\"230x230\" href=\"" + this.getAbsoluteUrl("/favicons/favicon-230x230.png") + "\">\n		<link rel=\"shortcut icon\" href=\"" + this.getAbsoluteUrl("/favicons/favicon.ico") + "\">\n		<link rel=\"yandex-tableau-widget\" href=\"" + this.getAbsoluteUrl("/favicons/yandex-browser-manifest.json") + "\">\n		<meta name=\"msapplication-TileColor\" content=\"#fff\">\n		<meta name=\"msapplication-TileImage\" content=\"" + this.getAbsoluteUrl("/favicons/mstile-144x144.png") + "\">\n		<meta name=\"msapplication-config\" content=\"" + this.getAbsoluteUrl("/favicons/browserconfig.xml") + "\">\n		<meta property=\"twitter:image\" content=\"" + this.getAbsoluteUrl("/favicons/twitter.png") + "\">\n		<meta property=\"og:image\" content=\"" + this.getAbsoluteUrl("/favicons/open-graph.png") + "\">\n		<link rel=\"stylesheet\" href=\"" + this.getAbsoluteUrl("/packages/steedos_workflow-chart/assets/mermaid/dist/mermaid.css") + "\"/>\n		<script type=\"text/javascript\" src=\"" + this.getAbsoluteUrl("/lib/jquery/jquery-1.11.2.min.js") + "\"></script>\n		<script type=\"text/javascript\" src=\"" + this.getAbsoluteUrl("/packages/steedos_workflow-chart/assets/mermaid/dist/mermaid.min.js") + "\"></script>\n		<style>\n			body { \n				font-family: 'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n				text-align: center;\n				background-color: #fff;\n			}\n			.loading{\n				position: absolute;\n				left: 0px;\n				right: 0px;\n				top: 50%;\n				z-index: 1100;\n				text-align: center;\n				margin-top: -30px;\n				font-size: 36px;\n				color: #dfdfdf;\n			}\n			.error-msg{\n				position: absolute;\n				left: 0px;\n				right: 0px;\n				bottom: 20px;\n				z-index: 1100;\n				text-align: center;\n				font-size: 20px;\n				color: #a94442;\n			}\n			#flow-steps-svg .node rect{\n				fill: #ccccff;\n				stroke: rgb(144, 144, 255);\n    						stroke-width: 2px;\n			}\n			#flow-steps-svg .node.current-step-node rect{\n				fill: #cde498;\n				stroke: #13540c;\n				stroke-width: 2px;\n			}\n			#flow-steps-svg .node.condition rect{\n				fill: #ececff;\n				stroke: rgb(204, 204, 255);\n    						stroke-width: 1px;\n			}\n			#flow-steps-svg .node .trace-handler-name{\n				color: #777;\n			}\n			#flow-steps-svg .node .step-handler-name{\n				color: #777;\n			}\n			div.mermaidTooltip{\n				position: fixed!important;\n				text-align: left!important;\n				padding: 4px!important;\n				font-size: 14px!important;\n				max-width: 500px!important;\n				left: auto!important;\n				top: 15px!important;\n				right: 15px;\n			}\n			.btn-zoom{\n				background: rgba(0, 0, 0, 0.1);\n				border-color: transparent;\n				display: inline-block;\n				padding: 2px 10px;\n				font-size: 26px;\n				border-radius: 20px;\n				background: #eee;\n				color: #777;\n				position: fixed;\n				bottom: 15px;\n				outline: none;\n				cursor: pointer;\n				z-index: 99999;\n				-webkit-user-select: none;\n				-moz-user-select: none;\n				-ms-user-select: none;\n				user-select: none;\n				line-height: 1.2;\n			}\n			@media (max-width: 768px) {\n				.btn-zoom{\n					display:none;\n				}\n			}\n			.btn-zoom:hover{\n				background: rgba(0, 0, 0, 0.2);\n			}\n			.btn-zoom-up{\n				left: 15px;\n			}\n			.btn-zoom-down{\n				left: 60px;\n				padding: 1px 13px 3px 13px;\n			}\n		</style>\n	</head>\n	<body>\n		<div class = \"loading\">Loading...</div>\n		<div class = \"error-msg\">" + error_msg + "</div>\n		<div class=\"mermaid\"></div>\n		<script type=\"text/javascript\">\n			mermaid.initialize({\n				startOnLoad:false\n			});\n			$(function(){\n				var graphNodes = " + JSON.stringify(graphSyntax) + ";\n				//方便前面可以通过调用mermaid.currentNodes调式，特意增加currentNodes属性。\n				mermaid.currentNodes = graphNodes;\n				var graphSyntax = graphNodes.join(\"\\n\");\n				console.log(graphNodes);\n				console.log(graphSyntax);\n				console.log(\"You can access the graph nodes by 'mermaid.currentNodes' in the console of browser.\");\n				$(\".loading\").remove();\n\n				var id = \"flow-steps-svg\";\n				var element = $('.mermaid');\n				var insertSvg = function(svgCode, bindFunctions) {\n					element.html(svgCode);\n					if(typeof callback !== 'undefined'){\n						callback(id);\n					}\n					bindFunctions(element[0]);\n				};\n				mermaid.render(id, graphSyntax, insertSvg, element[0]);\n\n				var zoomSVG = function(zoom){\n					var currentWidth = $(\"svg\").width();\n					var newWidth = currentWidth * zoom;\n					$(\"svg\").css(\"maxWidth\",newWidth + \"px\").width(newWidth);\n				}\n\n				//支持鼠标滚轮缩放画布\n				$(window).on(\"mousewheel\",function(event){\n					if(event.ctrlKey){\n						event.preventDefault();\n						var zoom = event.originalEvent.wheelDelta > 0 ? 1.1 : 0.9;\n						zoomSVG(zoom);\n					}\n				});\n				$(\".btn-zoom\").on(\"click\",function(){\n					zoomSVG($(this).attr(\"zoom\"));\n				});\n			});\n		</script>\n		<a class=\"btn-zoom btn-zoom-up\" zoom=1.1 title=\"点击放大\">+</a>\n		<a class=\"btn-zoom btn-zoom-down\" zoom=0.9 title=\"点击缩小\">-</a>\n	</body>\n</html>");
  }
};
JsonRoutes.add('get', '/api/workflow/chart?instance_id=:instance_id', function (req, res, next) {
  return FlowversionAPI.sendHtmlResponse(req, res);
});
JsonRoutes.add('get', '/api/workflow/chart/traces?instance_id=:instance_id', function (req, res, next) {
  return FlowversionAPI.sendHtmlResponse(req, res, "traces");
});
JsonRoutes.add('get', '/api/workflow/chart/traces_expand?instance_id=:instance_id', function (req, res, next) {
  return FlowversionAPI.sendHtmlResponse(req, res, "traces_expand");
});
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
Package._define("steedos:workflow-chart");

})();

//# sourceURL=meteor://💻app/packages/steedos_workflow-chart.js
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ldGVvcjovL/CfkrthcHAvcGFja2FnZXMvc3RlZWRvc193b3JrZmxvdy1jaGFydC9yb3V0ZXMvY2hhcnQuY29mZmVlIiwibWV0ZW9yOi8v8J+Su2FwcC9yb3V0ZXMvY2hhcnQuY29mZmVlIl0sIm5hbWVzIjpbIkZsb3d2ZXJzaW9uQVBJIiwidHJhY2VNYXhBcHByb3ZlQ291bnQiLCJ0cmFjZVNwbGl0QXBwcm92ZXNJbmRleCIsImlzRXhwYW5kQXBwcm92ZSIsImdldEFic29sdXRlVXJsIiwidXJsIiwicm9vdFVybCIsIl9fbWV0ZW9yX3J1bnRpbWVfY29uZmlnX18iLCJST09UX1VSTF9QQVRIX1BSRUZJWCIsIndyaXRlUmVzcG9uc2UiLCJyZXMiLCJodHRwQ29kZSIsImJvZHkiLCJzdGF0dXNDb2RlIiwiZW5kIiwic2VuZEludmFsaWRVUkxSZXNwb25zZSIsInNlbmRBdXRoVG9rZW5FeHBpcmVkUmVzcG9uc2UiLCJyZXBsYWNlRXJyb3JTeW1ib2wiLCJzdHIiLCJyZXBsYWNlIiwiZ2V0U3RlcEhhbmRsZXJOYW1lIiwic3RlcCIsImFwcHJvdmVyTmFtZXMiLCJzdGVwSGFuZGxlck5hbWUiLCJkZWFsX3R5cGUiLCJhcHByb3Zlcl91c2VycyIsIm1hcCIsInVzZXJJZCIsInVzZXIiLCJkYiIsInVzZXJzIiwiZmluZE9uZSIsIm5hbWUiLCJqb2luIiwiYXBwcm92ZXJfcm9sZXMiLCJyb2xlSWQiLCJyb2xlIiwiZmxvd19yb2xlcyIsImdldFN0ZXBOYW1lIiwic3RlcE5hbWUiLCJnZW5lcmF0ZVN0ZXBzR3JhcGhTeW50YXgiLCJzdGVwcyIsImN1cnJlbnRTdGVwSWQiLCJpc0NvbnZlcnRUb1N0cmluZyIsImdyYXBoU3ludGF4Iiwibm9kZXMiLCJmb3JFYWNoIiwibGluZXMiLCJsZW5ndGgiLCJsaW5lIiwidG9TdGVwTmFtZSIsInN0ZXBfdHlwZSIsInB1c2giLCJfaWQiLCJmaW5kUHJvcGVydHlCeVBLIiwidG9fc3RlcCIsImdldEFwcHJvdmVKdWRnZVRleHQiLCJqdWRnZSIsImp1ZGdlVGV4dCIsImxvY2FsZSIsIlRBUGkxOG4iLCJfXyIsImdldFRyYWNlTmFtZSIsInRyYWNlTmFtZSIsImFwcHJvdmVIYW5kbGVyTmFtZSIsImdldFRyYWNlRnJvbUFwcHJvdmVDb3VudGVyc1dpdGhUeXBlIiwidHJhY2UiLCJhcHByb3ZlcyIsImNvdW50ZXJzIiwiYXBwcm92ZSIsImZyb21fYXBwcm92ZV9pZCIsInR5cGUiLCJnZXRUcmFjZUNvdW50ZXJzV2l0aFR5cGUiLCJ0cmFjZUZyb21BcHByb3ZlQ291bnRlcnMiLCJ0b0FwcHJvdmUiLCJ0b0FwcHJvdmVGcm9tSWQiLCJ0b0FwcHJvdmVIYW5kbGVyTmFtZSIsInRvQXBwcm92ZVR5cGUiLCJoYW5kbGVyX25hbWUiLCJmcm9tQXBwcm92ZSIsImNvdW50ZXIiLCJjb3VudGVyMiIsImNvdW50ZXJDb250ZW50IiwicmVmIiwiZnJvbV90eXBlIiwiZnJvbV9hcHByb3ZlX2hhbmRsZXJfbmFtZSIsInRvX2FwcHJvdmVfaWQiLCJ0b19hcHByb3ZlX2hhbmRsZXJfbmFtZSIsImNvdW50IiwidG9fYXBwcm92ZV9oYW5kbGVyX25hbWVzIiwiaXNfdG90YWwiLCJwdXNoQXBwcm92ZXNXaXRoVHlwZUdyYXBoU3ludGF4IiwiY3VycmVudFRyYWNlTmFtZSIsImV4dHJhSGFuZGxlck5hbWVzQ291bnRlciIsImZyb21BcHByb3ZlSWQiLCJyZXN1bHRzIiwic3BsaXRJbmRleCIsInRlbXBIYW5kbGVyTmFtZXMiLCJ0b0FwcHJvdmVJZCIsInRvQXBwcm92ZXMiLCJ0cmFjZUNvdW50ZXJzIiwiZXh0cmFDb3VudCIsImlzVHlwZU5vZGUiLCJzdHJUb0hhbmRsZXJOYW1lcyIsInRvSGFuZGxlck5hbWVzIiwidHlwZU5hbWUiLCJpbmRleE9mIiwic3BsaWNlIiwiXyIsImlzRW1wdHkiLCJyZXN1bHRzMSIsImdlbmVyYXRlVHJhY2VzR3JhcGhTeW50YXgiLCJ0cmFjZXMiLCJsYXN0QXBwcm92ZXMiLCJsYXN0VHJhY2UiLCJwcmV2aW91c190cmFjZV9pZHMiLCJjdXJyZW50RnJvbVRyYWNlTmFtZSIsImZyb21BcHByb3ZlcyIsImZyb21UcmFjZSIsImZyb21BcHByb3ZlSGFuZGxlck5hbWUiLCJmcm9tVHJhY2VOYW1lIiwidG9UcmFjZU5hbWUiLCJsYXN0QXBwcm92ZSIsInNlbmRIdG1sUmVzcG9uc2UiLCJyZXEiLCJlcnJvcl9tc2ciLCJmbG93dmVyc2lvbiIsImluc3RhbmNlIiwiaW5zdGFuY2VfaWQiLCJxdWVyeSIsInJlZjEiLCJ0aXRsZSIsImRlY29kZVVSSUNvbXBvbmVudCIsImluc3RhbmNlcyIsImZpZWxkcyIsImZsb3dfdmVyc2lvbiIsImZsb3ciLCIkc2xpY2UiLCJXb3JrZmxvd01hbmFnZXIiLCJnZXRJbnN0YW5jZUZsb3dWZXJzaW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsIkpzb25Sb3V0ZXMiLCJhZGQiLCJuZXh0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxjQUFBO0FBQUFBLGlCQUVDO0FBQUFDLHdCQUFzQixFQUF0QjtBQUNBQywyQkFBeUIsQ0FEekI7QUFFQUMsbUJBQWlCLEtBRmpCO0FBSUFDLGtCQUFnQixVQUFDQyxHQUFEO0FBQ2YsUUFBQUMsT0FBQTtBQUFBQSxjQUFhQyw0QkFBK0JBLDBCQUEwQkMsb0JBQXpELEdBQW1GLEVBQWhHOztBQUNBLFFBQUdGLE9BQUg7QUFDQ0QsWUFBTUMsVUFBVUQsR0FBaEI7QUNFRTs7QURESCxXQUFPQSxHQUFQO0FBUkQ7QUFVQUksaUJBQWUsVUFBQ0MsR0FBRCxFQUFNQyxRQUFOLEVBQWdCQyxJQUFoQjtBQUNkRixRQUFJRyxVQUFKLEdBQWlCRixRQUFqQjtBQ0dFLFdERkZELElBQUlJLEdBQUosQ0FBUUYsSUFBUixDQ0VFO0FEZEg7QUFjQUcsMEJBQXdCLFVBQUNMLEdBQUQ7QUFDdkIsV0FBTyxLQUFDRCxhQUFELENBQWVDLEdBQWYsRUFBb0IsR0FBcEIsRUFBeUIscUNBQXpCLENBQVA7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QUFnQ0MsR0FBaEMsRUFBcUNsSCxHQUFyQyxDQzNJQztBRHlJRjtBQUlBb0ksV0FBV0MsR0FBWCxDQUFlLEtBQWYsRUFBc0IscURBQXRCLEVBQTZFLFVBQUNuQixHQUFELEVBQU1sSCxHQUFOLEVBQVdzSSxJQUFYO0FDekkzRSxTRDJJRGhKLGVBQWUySCxnQkFBZixDQUFnQ0MsR0FBaEMsRUFBcUNsSCxHQUFyQyxFQUEwQyxRQUExQyxDQzNJQztBRHlJRjtBQUlBb0ksV0FBV0MsR0FBWCxDQUFlLEtBQWYsRUFBc0IsNERBQXRCLEVBQW9GLFVBQUNuQixHQUFELEVBQU1sSCxHQUFOLEVBQVdzSSxJQUFYO0FDeklsRixTRDJJRGhKLGVBQWUySCxnQkFBZixDQUFnQ0MsR0FBaEMsRUFBcUNsSCxHQUFyQyxFQUEwQyxlQUExQyxDQzNJQztBRHlJRixHIiwiZmlsZSI6Ii9wYWNrYWdlcy9zdGVlZG9zX3dvcmtmbG93LWNoYXJ0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiRmxvd3ZlcnNpb25BUEkgPVxyXG5cclxuXHR0cmFjZU1heEFwcHJvdmVDb3VudDogMTBcclxuXHR0cmFjZVNwbGl0QXBwcm92ZXNJbmRleDogNVxyXG5cdGlzRXhwYW5kQXBwcm92ZTogZmFsc2VcclxuXHJcblx0Z2V0QWJzb2x1dGVVcmw6ICh1cmwpLT5cclxuXHRcdHJvb3RVcmwgPSBpZiBfX21ldGVvcl9ydW50aW1lX2NvbmZpZ19fIHRoZW4gX19tZXRlb3JfcnVudGltZV9jb25maWdfXy5ST09UX1VSTF9QQVRIX1BSRUZJWCBlbHNlIFwiXCJcclxuXHRcdGlmIHJvb3RVcmxcclxuXHRcdFx0dXJsID0gcm9vdFVybCArIHVybFxyXG5cdFx0cmV0dXJuIHVybDtcclxuXHJcblx0d3JpdGVSZXNwb25zZTogKHJlcywgaHR0cENvZGUsIGJvZHkpLT5cclxuXHRcdHJlcy5zdGF0dXNDb2RlID0gaHR0cENvZGU7XHJcblx0XHRyZXMuZW5kKGJvZHkpO1xyXG5cdFx0XHJcblx0c2VuZEludmFsaWRVUkxSZXNwb25zZTogKHJlcyktPlxyXG5cdFx0cmV0dXJuIEB3cml0ZVJlc3BvbnNlKHJlcywgNDA0LCBcInVybCBtdXN0IGhhcyBxdWVyeXMgYXMgaW5zdGFuY2VfaWQuXCIpO1xyXG5cdFx0XHJcblx0c2VuZEF1dGhUb2tlbkV4cGlyZWRSZXNwb25zZTogKHJlcyktPlxyXG5cdFx0cmV0dXJuIEB3cml0ZVJlc3BvbnNlKHJlcywgNDAxLCBcInRoZSBhdXRoX3Rva2VuIGhhcyBleHBpcmVkLlwiKTtcclxuXHJcblx0cmVwbGFjZUVycm9yU3ltYm9sOiAoc3RyKS0+XHJcblx0XHRyZXR1cm4gc3RyLnJlcGxhY2UoL1xcXCIvZyxcIiZxdW90O1wiKS5yZXBsYWNlKC9cXG4vZyxcIjxici8+XCIpXHJcblxyXG5cdGdldFN0ZXBIYW5kbGVyTmFtZTogKHN0ZXApLT5cclxuXHRcdHN3aXRjaCBzdGVwLmRlYWxfdHlwZVxyXG5cdFx0XHR3aGVuICdzcGVjaWZ5VXNlcidcclxuXHRcdFx0XHRhcHByb3Zlck5hbWVzID0gc3RlcC5hcHByb3Zlcl91c2Vycy5tYXAgKHVzZXJJZCktPlxyXG5cdFx0XHRcdFx0dXNlciA9IGRiLnVzZXJzLmZpbmRPbmUodXNlcklkKVxyXG5cdFx0XHRcdFx0aWYgdXNlclxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdXNlci5uYW1lXHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdHJldHVybiBcIlwiXHJcblx0XHRcdFx0c3RlcEhhbmRsZXJOYW1lID0gYXBwcm92ZXJOYW1lcy5qb2luKFwiLFwiKVxyXG5cdFx0XHR3aGVuICdhcHBsaWNhbnRSb2xlJ1xyXG5cdFx0XHRcdGFwcHJvdmVyTmFtZXMgPSBzdGVwLmFwcHJvdmVyX3JvbGVzLm1hcCAocm9sZUlkKS0+XHJcblx0XHRcdFx0XHRyb2xlID0gZGIuZmxvd19yb2xlcy5maW5kT25lKHJvbGVJZClcclxuXHRcdFx0XHRcdGlmIHJvbGVcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHJvbGUubmFtZVxyXG5cdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gXCJcIlxyXG5cdFx0XHRcdHN0ZXBIYW5kbGVyTmFtZSA9IGFwcHJvdmVyTmFtZXMuam9pbihcIixcIilcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdHN0ZXBIYW5kbGVyTmFtZSA9ICcnXHJcblx0XHRcdFx0YnJlYWtcclxuXHRcdHJldHVybiBzdGVwSGFuZGxlck5hbWVcclxuXHJcblx0Z2V0U3RlcE5hbWU6IChzdGVwTmFtZSwgc3RlcEhhbmRsZXJOYW1lKS0+XHJcblx0XHQjIOi/lOWbnnN0ZXDoioLngrnlkI3np7BcclxuXHRcdGlmIHN0ZXBOYW1lXHJcblx0XHRcdHN0ZXBOYW1lID0gXCI8ZGl2IGNsYXNzPSdncmFwaC1ub2RlJz5cclxuXHRcdFx0XHQ8ZGl2IGNsYXNzPSdzdGVwLW5hbWUnPiN7c3RlcE5hbWV9PC9kaXY+XHJcblx0XHRcdFx0PGRpdiBjbGFzcz0nc3RlcC1oYW5kbGVyLW5hbWUnPiN7c3RlcEhhbmRsZXJOYW1lfTwvZGl2PlxyXG5cdFx0XHQ8L2Rpdj5cIlxyXG5cdFx0XHQjIOaKiueJueauiuWtl+espua4heepuuaIluabv+aNou+8jOS7pemBv+WFjW1lcm1haWRBUEnlh7rnjrDlvILluLhcclxuXHRcdFx0c3RlcE5hbWUgPSBGbG93dmVyc2lvbkFQSS5yZXBsYWNlRXJyb3JTeW1ib2woc3RlcE5hbWUpXHJcblx0XHRlbHNlXHJcblx0XHRcdHN0ZXBOYW1lID0gXCJcIlxyXG5cdFx0cmV0dXJuIHN0ZXBOYW1lXHJcblxyXG5cdGdlbmVyYXRlU3RlcHNHcmFwaFN5bnRheDogKHN0ZXBzLCBjdXJyZW50U3RlcElkLCBpc0NvbnZlcnRUb1N0cmluZyktPlxyXG5cdFx0IyDor6Xlh73mlbDov5Tlm57ku6XkuIvmoLzlvI/nmoRncmFwaOiEmuacrFxyXG5cdFx0IyBncmFwaFN5bnRheCA9ICcnJ1xyXG5cdFx0IyBcdGdyYXBoIExSXHJcblx0XHQjIFx0XHRBLS0+QlxyXG5cdFx0IyBcdFx0QS0tPkNcclxuXHRcdCMgXHRcdEItLT5DXHJcblx0XHQjIFx0XHRDLS0+QVxyXG5cdFx0IyBcdFx0RC0tPkNcclxuXHRcdCMgXHQnJydcclxuXHRcdG5vZGVzID0gW1wiZ3JhcGggVERcIl1cclxuXHRcdHN0ZXBzLmZvckVhY2ggKHN0ZXApLT5cclxuXHRcdFx0bGluZXMgPSBzdGVwLmxpbmVzXHJcblx0XHRcdGlmIGxpbmVzPy5sZW5ndGhcclxuXHRcdFx0XHRsaW5lcy5mb3JFYWNoIChsaW5lKS0+XHJcblx0XHRcdFx0XHRpZiBzdGVwLm5hbWVcclxuXHRcdFx0XHRcdFx0IyDmoIforrDmnaHku7boioLngrlcclxuXHRcdFx0XHRcdFx0aWYgc3RlcC5zdGVwX3R5cGUgPT0gXCJjb25kaXRpb25cIlxyXG5cdFx0XHRcdFx0XHRcdG5vZGVzLnB1c2ggXCJcdGNsYXNzICN7c3RlcC5faWR9IGNvbmRpdGlvbjtcIlxyXG5cdFx0XHRcdFx0XHRzdGVwSGFuZGxlck5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRTdGVwSGFuZGxlck5hbWUoc3RlcClcclxuXHRcdFx0XHRcdFx0c3RlcE5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRTdGVwTmFtZShzdGVwLm5hbWUsIHN0ZXBIYW5kbGVyTmFtZSlcclxuXHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0c3RlcE5hbWUgPSBcIlwiXHJcblx0XHRcdFx0XHR0b1N0ZXBOYW1lID0gc3RlcHMuZmluZFByb3BlcnR5QnlQSyhcIl9pZFwiLGxpbmUudG9fc3RlcCkubmFtZVxyXG5cdFx0XHRcdFx0dG9TdGVwTmFtZSA9IEZsb3d2ZXJzaW9uQVBJLmdldFN0ZXBOYW1lKHRvU3RlcE5hbWUsIFwiXCIpXHJcblx0XHRcdFx0XHRub2Rlcy5wdXNoIFwiXHQje3N0ZXAuX2lkfShcXFwiI3tzdGVwTmFtZX1cXFwiKS0tPiN7bGluZS50b19zdGVwfShcXFwiI3t0b1N0ZXBOYW1lfVxcXCIpXCJcclxuXHJcblx0XHRpZiBjdXJyZW50U3RlcElkXHJcblx0XHRcdG5vZGVzLnB1c2ggXCJcdGNsYXNzICN7Y3VycmVudFN0ZXBJZH0gY3VycmVudC1zdGVwLW5vZGU7XCJcclxuXHRcdGlmIGlzQ29udmVydFRvU3RyaW5nXHJcblx0XHRcdGdyYXBoU3ludGF4ID0gbm9kZXMuam9pbiBcIlxcblwiXHJcblx0XHRcdHJldHVybiBncmFwaFN5bnRheFxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRyZXR1cm4gbm9kZXNcclxuXHJcblx0Z2V0QXBwcm92ZUp1ZGdlVGV4dDogKGp1ZGdlKS0+XHJcblx0XHRsb2NhbGUgPSBcInpoLUNOXCJcclxuXHRcdHN3aXRjaCBqdWRnZVxyXG5cdFx0XHR3aGVuICdhcHByb3ZlZCdcclxuXHRcdFx0XHQjIOW3suaguOWHhlxyXG5cdFx0XHRcdGp1ZGdlVGV4dCA9IFRBUGkxOG4uX18oJ0luc3RhbmNlIFN0YXRlIGFwcHJvdmVkJywge30sIGxvY2FsZSlcclxuXHRcdFx0d2hlbiAncmVqZWN0ZWQnXHJcblx0XHRcdFx0IyDlt7LpqbPlm55cclxuXHRcdFx0XHRqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSByZWplY3RlZCcsIHt9LCBsb2NhbGUpXHJcblx0XHRcdHdoZW4gJ3Rlcm1pbmF0ZWQnXHJcblx0XHRcdFx0IyDlt7Llj5bmtohcclxuXHRcdFx0XHRqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSB0ZXJtaW5hdGVkJywge30sIGxvY2FsZSlcclxuXHRcdFx0d2hlbiAncmVhc3NpZ25lZCdcclxuXHRcdFx0XHQjIOi9rOetvuaguFxyXG5cdFx0XHRcdGp1ZGdlVGV4dCA9IFRBUGkxOG4uX18oJ0luc3RhbmNlIFN0YXRlIHJlYXNzaWduZWQnLCB7fSwgbG9jYWxlKVxyXG5cdFx0XHR3aGVuICdyZWxvY2F0ZWQnXHJcblx0XHRcdFx0IyDph43lrprkvY1cclxuXHRcdFx0XHRqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSByZWxvY2F0ZWQnLCB7fSwgbG9jYWxlKVxyXG5cdFx0XHR3aGVuICdyZXRyaWV2ZWQnXHJcblx0XHRcdFx0IyDlt7Llj5blm55cclxuXHRcdFx0XHRqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSByZXRyaWV2ZWQnLCB7fSwgbG9jYWxlKVxyXG5cdFx0XHR3aGVuICdyZXR1cm5lZCdcclxuXHRcdFx0XHQjIOW3sumAgOWbnlxyXG5cdFx0XHRcdGp1ZGdlVGV4dCA9IFRBUGkxOG4uX18oJ0luc3RhbmNlIFN0YXRlIHJldHVybmVkJywge30sIGxvY2FsZSlcclxuXHRcdFx0d2hlbiAncmVhZGVkJ1xyXG5cdFx0XHRcdCMg5bey6ZiFXHJcblx0XHRcdFx0anVkZ2VUZXh0ID0gVEFQaTE4bi5fXygnSW5zdGFuY2UgU3RhdGUgcmVhZGVkJywge30sIGxvY2FsZSlcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdGp1ZGdlVGV4dCA9ICcnXHJcblx0XHRcdFx0YnJlYWtcclxuXHRcdHJldHVybiBqdWRnZVRleHRcclxuXHJcblx0Z2V0VHJhY2VOYW1lOiAodHJhY2VOYW1lLCBhcHByb3ZlSGFuZGxlck5hbWUpLT5cclxuXHRcdCMg6L+U5ZuedHJhY2XoioLngrnlkI3np7BcclxuXHRcdGlmIHRyYWNlTmFtZVxyXG5cdFx0XHQjIOaKiueJueauiuWtl+espua4heepuuaIluabv+aNou+8jOS7pemBv+WFjW1lcm1haWRBUEnlh7rnjrDlvILluLhcclxuXHRcdFx0dHJhY2VOYW1lID0gXCI8ZGl2IGNsYXNzPSdncmFwaC1ub2RlJz5cclxuXHRcdFx0XHQ8ZGl2IGNsYXNzPSd0cmFjZS1uYW1lJz4je3RyYWNlTmFtZX08L2Rpdj5cclxuXHRcdFx0XHQ8ZGl2IGNsYXNzPSd0cmFjZS1oYW5kbGVyLW5hbWUnPiN7YXBwcm92ZUhhbmRsZXJOYW1lfTwvZGl2PlxyXG5cdFx0XHQ8L2Rpdj5cIlxyXG5cdFx0XHR0cmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5yZXBsYWNlRXJyb3JTeW1ib2wodHJhY2VOYW1lKVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0cmFjZU5hbWUgPSBcIlwiXHJcblx0XHRyZXR1cm4gdHJhY2VOYW1lXHJcblx0XHJcblx0Z2V0VHJhY2VGcm9tQXBwcm92ZUNvdW50ZXJzV2l0aFR5cGU6ICh0cmFjZSktPlxyXG5cdFx0IyDor6Xlh73mlbDnlJ/miJBqc29u57uT5p6E77yM6KGo546w5Ye65omA5pyJ5Lyg6ZiF44CB5YiG5Y+R44CB6L2s5Y+R6IqC54K55pyJ5pyJ5ZCO57ut5a2Q6IqC54K555qE6K6h5pWw5oOF5Ya177yM5YW257uT5p6E5Li677yaXHJcblx0XHQjIGNvdW50ZXJzID0ge1xyXG5cdFx0IyBcdFtmcm9tQXBwcm92ZUlkKOadpea6kOiKgueCuUlEKV06e1xyXG5cdFx0IyBcdFx0W3RvQXBwcm92ZVR5cGUo55uu5qCH57uT54K557G75Z6LKV0655uu5qCH6IqC54K55Zyo5oyH5a6a57G75Z6L5LiL55qE5ZCO57ut6IqC54K55Liq5pWwXHJcblx0XHQjIFx0fVxyXG5cdFx0IyB9XHJcblx0XHRjb3VudGVycyA9IHt9XHJcblx0XHRhcHByb3ZlcyA9IHRyYWNlLmFwcHJvdmVzXHJcblx0XHR1bmxlc3MgYXBwcm92ZXNcclxuXHRcdFx0cmV0dXJuIG51bGxcclxuXHRcdGFwcHJvdmVzLmZvckVhY2ggKGFwcHJvdmUpLT5cclxuXHRcdFx0aWYgYXBwcm92ZS5mcm9tX2FwcHJvdmVfaWRcclxuXHRcdFx0XHR1bmxlc3MgY291bnRlcnNbYXBwcm92ZS5mcm9tX2FwcHJvdmVfaWRdXHJcblx0XHRcdFx0XHRjb3VudGVyc1thcHByb3ZlLmZyb21fYXBwcm92ZV9pZF0gPSB7fVxyXG5cdFx0XHRcdGlmIGNvdW50ZXJzW2FwcHJvdmUuZnJvbV9hcHByb3ZlX2lkXVthcHByb3ZlLnR5cGVdXHJcblx0XHRcdFx0XHRjb3VudGVyc1thcHByb3ZlLmZyb21fYXBwcm92ZV9pZF1bYXBwcm92ZS50eXBlXSsrXHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0Y291bnRlcnNbYXBwcm92ZS5mcm9tX2FwcHJvdmVfaWRdW2FwcHJvdmUudHlwZV0gPSAxXHJcblx0XHRyZXR1cm4gY291bnRlcnNcclxuXHJcblx0Z2V0VHJhY2VDb3VudGVyc1dpdGhUeXBlOiAodHJhY2UsIHRyYWNlRnJvbUFwcHJvdmVDb3VudGVycyktPlxyXG5cdFx0IyDor6Xlh73mlbDnlJ/miJBqc29u57uT5p6E77yM6KGo546w5Ye65omA5pyJ5Lyg6ZiF44CB5YiG5Y+R44CB6L2s5Y+R55qE6IqC54K55rWB5ZCR77yM5YW257uT5p6E5Li677yaXHJcblx0XHQjIGNvdW50ZXJzID0ge1xyXG5cdFx0IyBcdFtmcm9tQXBwcm92ZUlkKOadpea6kOiKgueCuUlEKV06e1xyXG5cdFx0IyBcdFx0W3RvQXBwcm92ZVR5cGUo55uu5qCH57uT54K557G75Z6LKV06W3tcclxuXHRcdCMgXHRcdFx0ZnJvbV90eXBlOiDmnaXmupDoioLngrnnsbvlnotcclxuXHRcdCMgXHRcdFx0ZnJvbV9hcHByb3ZlX2hhbmRsZXJfbmFtZTog5p2l5rqQ6IqC54K55aSE55CG5Lq6XHJcblx0XHQjIFx0XHRcdHRvX2FwcHJvdmVfaWQ6IOebruagh+iKgueCuUlEXHJcblx0XHQjIFx0XHRcdHRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lczogW+WkmuS4quebruagh+iKgueCueaxh+aAu+WkhOeQhuS6uumbhuWQiF1cclxuXHRcdCMgXHRcdFx0aXNfdG90YWw6IHRydWUvZmFsc2XvvIzmmK/lkKbmsYfmgLvoioLngrlcclxuXHRcdCMgXHRcdH0sLi4uXVxyXG5cdFx0IyBcdH1cclxuXHRcdCMgfVxyXG5cdFx0IyDkuIrov7Dnm67moIfnu5PngrnlhoXlrrnkuK3mnInkuIDkuKrlsZ7mgKdpc190b3RhbOihqOekuuaYr+WQpuaxh+aAu+iKgueCue+8jOWmguaenOaYr++8jOWImeaKiuWkmuS4quiKgueCueaxh+aAu+WQiOW5tuaIkOS4gOS4qu+8jFxyXG5cdFx0IyDkvYbmmK/mnKzouqvmnInlkI7nu63lrZDoioLngrnnmoToioLngrnkuI3lj4LkuI7msYfmgLvlj4rorqHmlbDjgIJcclxuXHRcdGNvdW50ZXJzID0ge31cclxuXHRcdGFwcHJvdmVzID0gdHJhY2UuYXBwcm92ZXNcclxuXHRcdHVubGVzcyBhcHByb3Zlc1xyXG5cdFx0XHRyZXR1cm4gbnVsbFxyXG5cdFx0dHJhY2VNYXhBcHByb3ZlQ291bnQgPSBGbG93dmVyc2lvbkFQSS50cmFjZU1heEFwcHJvdmVDb3VudFxyXG5cdFx0aXNFeHBhbmRBcHByb3ZlID0gRmxvd3ZlcnNpb25BUEkuaXNFeHBhbmRBcHByb3ZlXHJcblxyXG5cdFx0YXBwcm92ZXMuZm9yRWFjaCAodG9BcHByb3ZlKS0+XHJcblx0XHRcdHRvQXBwcm92ZVR5cGUgPSB0b0FwcHJvdmUudHlwZVxyXG5cdFx0XHR0b0FwcHJvdmVGcm9tSWQgPSB0b0FwcHJvdmUuZnJvbV9hcHByb3ZlX2lkXHJcblx0XHRcdHRvQXBwcm92ZUhhbmRsZXJOYW1lID0gdG9BcHByb3ZlLmhhbmRsZXJfbmFtZVxyXG5cdFx0XHR1bmxlc3MgdG9BcHByb3ZlRnJvbUlkXHJcblx0XHRcdFx0cmV0dXJuXHJcblx0XHRcdGFwcHJvdmVzLmZvckVhY2ggKGZyb21BcHByb3ZlKS0+XHJcblx0XHRcdFx0aWYgZnJvbUFwcHJvdmUuX2lkID09IHRvQXBwcm92ZUZyb21JZFxyXG5cdFx0XHRcdFx0Y291bnRlciA9IGNvdW50ZXJzW3RvQXBwcm92ZUZyb21JZF1cclxuXHRcdFx0XHRcdHVubGVzcyBjb3VudGVyXHJcblx0XHRcdFx0XHRcdGNvdW50ZXIgPSBjb3VudGVyc1t0b0FwcHJvdmVGcm9tSWRdID0ge31cclxuXHRcdFx0XHRcdHVubGVzcyBjb3VudGVyW3RvQXBwcm92ZS50eXBlXVxyXG5cdFx0XHRcdFx0XHRjb3VudGVyW3RvQXBwcm92ZS50eXBlXSA9IFtdXHJcblx0XHRcdFx0XHRjb3VudGVyMiA9IGNvdW50ZXJbdG9BcHByb3ZlLnR5cGVdXHJcblx0XHRcdFx0XHRpZiB0cmFjZUZyb21BcHByb3ZlQ291bnRlcnNbdG9BcHByb3ZlLl9pZF0/W3RvQXBwcm92ZVR5cGVdXHJcblx0XHRcdFx0XHRcdCMg5pyJ5ZCO57ut5a2Q6IqC54K577yM5YiZ5LiN5Y+C5LiO5rGH5oC75Y+K6K6h5pWwXHJcblx0XHRcdFx0XHRcdGNvdW50ZXIyLnB1c2hcclxuXHRcdFx0XHRcdFx0XHRmcm9tX3R5cGU6IGZyb21BcHByb3ZlLnR5cGVcclxuXHRcdFx0XHRcdFx0XHRmcm9tX2FwcHJvdmVfaGFuZGxlcl9uYW1lOiBmcm9tQXBwcm92ZS5oYW5kbGVyX25hbWVcclxuXHRcdFx0XHRcdFx0XHR0b19hcHByb3ZlX2lkOiB0b0FwcHJvdmUuX2lkXHJcblx0XHRcdFx0XHRcdFx0dG9fYXBwcm92ZV9oYW5kbGVyX25hbWU6IHRvQXBwcm92ZS5oYW5kbGVyX25hbWVcclxuXHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdGNvdW50ZXJDb250ZW50ID0gaWYgaXNFeHBhbmRBcHByb3ZlIHRoZW4gbnVsbCBlbHNlIGNvdW50ZXIyLmZpbmRQcm9wZXJ0eUJ5UEsoXCJpc190b3RhbFwiLCB0cnVlKVxyXG5cdFx0XHRcdFx0XHQjIGNvdW50ZXJDb250ZW50ID0gY291bnRlcjIuZmluZFByb3BlcnR5QnlQSyhcImlzX3RvdGFsXCIsIHRydWUpXHJcblx0XHRcdFx0XHRcdCMg5aaC5p6c5by65Yi26KaB5rGC5bGV5byA5omA5pyJ6IqC54K577yM5YiZ5LiN5YGa5rGH5oC75aSE55CGXHJcblx0XHRcdFx0XHRcdGlmIGNvdW50ZXJDb250ZW50XHJcblx0XHRcdFx0XHRcdFx0Y291bnRlckNvbnRlbnQuY291bnQrK1xyXG5cdFx0XHRcdFx0XHRcdHVubGVzcyBjb3VudGVyQ29udGVudC5jb3VudCA+IHRyYWNlTWF4QXBwcm92ZUNvdW50XHJcblx0XHRcdFx0XHRcdFx0XHRjb3VudGVyQ29udGVudC50b19hcHByb3ZlX2hhbmRsZXJfbmFtZXMucHVzaCB0b0FwcHJvdmUuaGFuZGxlcl9uYW1lXHJcblx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRjb3VudGVyMi5wdXNoXHJcblx0XHRcdFx0XHRcdFx0XHRmcm9tX3R5cGU6IGZyb21BcHByb3ZlLnR5cGVcclxuXHRcdFx0XHRcdFx0XHRcdGZyb21fYXBwcm92ZV9oYW5kbGVyX25hbWU6IGZyb21BcHByb3ZlLmhhbmRsZXJfbmFtZVxyXG5cdFx0XHRcdFx0XHRcdFx0dG9fYXBwcm92ZV9pZDogdG9BcHByb3ZlLl9pZFxyXG5cdFx0XHRcdFx0XHRcdFx0Y291bnQ6IDFcclxuXHRcdFx0XHRcdFx0XHRcdHRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lczogW3RvQXBwcm92ZS5oYW5kbGVyX25hbWVdXHJcblx0XHRcdFx0XHRcdFx0XHRpc190b3RhbDogdHJ1ZVxyXG5cclxuXHRcdHJldHVybiBjb3VudGVyc1xyXG5cclxuXHRwdXNoQXBwcm92ZXNXaXRoVHlwZUdyYXBoU3ludGF4OiAobm9kZXMsIHRyYWNlKS0+XHJcblx0XHR0cmFjZUZyb21BcHByb3ZlQ291bnRlcnMgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZUZyb21BcHByb3ZlQ291bnRlcnNXaXRoVHlwZSB0cmFjZVxyXG5cdFx0dHJhY2VDb3VudGVycyA9IEZsb3d2ZXJzaW9uQVBJLmdldFRyYWNlQ291bnRlcnNXaXRoVHlwZSB0cmFjZSwgdHJhY2VGcm9tQXBwcm92ZUNvdW50ZXJzXHJcblx0XHR1bmxlc3MgdHJhY2VDb3VudGVyc1xyXG5cdFx0XHRyZXR1cm5cclxuXHRcdGV4dHJhSGFuZGxlck5hbWVzQ291bnRlciA9IHt9ICPorrDlvZXpnIDopoHpop3lpJbnlJ/miJDmiYDmnInlpITnkIbkurrlp5PlkI3nmoTooqvkvKDpmIXjgIHliIblj5HjgIHovazlj5HoioLngrlcclxuXHRcdHRyYWNlTWF4QXBwcm92ZUNvdW50ID0gRmxvd3ZlcnNpb25BUEkudHJhY2VNYXhBcHByb3ZlQ291bnRcclxuXHRcdHNwbGl0SW5kZXggPSBGbG93dmVyc2lvbkFQSS50cmFjZVNwbGl0QXBwcm92ZXNJbmRleFxyXG5cdFx0Y3VycmVudFRyYWNlTmFtZSA9IHRyYWNlLm5hbWVcclxuXHRcdGZvciBmcm9tQXBwcm92ZUlkLGZyb21BcHByb3ZlIG9mIHRyYWNlQ291bnRlcnNcclxuXHRcdFx0Zm9yIHRvQXBwcm92ZVR5cGUsdG9BcHByb3ZlcyBvZiBmcm9tQXBwcm92ZVxyXG5cdFx0XHRcdHRvQXBwcm92ZXMuZm9yRWFjaCAodG9BcHByb3ZlKS0+XHJcblx0XHRcdFx0XHR0eXBlTmFtZSA9IFwiXCJcclxuXHRcdFx0XHRcdHN3aXRjaCB0b0FwcHJvdmVUeXBlXHJcblx0XHRcdFx0XHRcdHdoZW4gJ2NjJ1xyXG5cdFx0XHRcdFx0XHRcdHR5cGVOYW1lID0gXCLkvKDpmIVcIlxyXG5cdFx0XHRcdFx0XHR3aGVuICdmb3J3YXJkJ1xyXG5cdFx0XHRcdFx0XHRcdHR5cGVOYW1lID0gXCLovazlj5FcIlxyXG5cdFx0XHRcdFx0XHR3aGVuICdkaXN0cmlidXRlJ1xyXG5cdFx0XHRcdFx0XHRcdHR5cGVOYW1lID0gXCLliIblj5FcIlxyXG5cdFx0XHRcdFx0aXNUeXBlTm9kZSA9IFtcImNjXCIsXCJmb3J3YXJkXCIsXCJkaXN0cmlidXRlXCJdLmluZGV4T2YodG9BcHByb3ZlLmZyb21fdHlwZSkgPj0gMFxyXG5cdFx0XHRcdFx0aWYgaXNUeXBlTm9kZVxyXG5cdFx0XHRcdFx0XHR0cmFjZU5hbWUgPSB0b0FwcHJvdmUuZnJvbV9hcHByb3ZlX2hhbmRsZXJfbmFtZVxyXG5cdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHR0cmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZU5hbWUgY3VycmVudFRyYWNlTmFtZSwgdG9BcHByb3ZlLmZyb21fYXBwcm92ZV9oYW5kbGVyX25hbWVcclxuXHRcdFx0XHRcdGlmIHRvQXBwcm92ZS5pc190b3RhbFxyXG5cdFx0XHRcdFx0XHR0b0hhbmRsZXJOYW1lcyA9IHRvQXBwcm92ZS50b19hcHByb3ZlX2hhbmRsZXJfbmFtZXNcclxuXHRcdFx0XHRcdFx0aWYgc3BsaXRJbmRleCBhbmQgdG9BcHByb3ZlLmNvdW50ID4gc3BsaXRJbmRleFxyXG5cdFx0XHRcdFx0XHRcdCMg5Zyo5aeT5ZCN6ZuG5ZCI5Lit5o+S5YWl5Zue6L2m56ym5Y+35o2i6KGMXHJcblx0XHRcdFx0XHRcdFx0dG9IYW5kbGVyTmFtZXMuc3BsaWNlKHNwbGl0SW5kZXgsMCxcIjxici8+LFwiKVxyXG5cdFx0XHRcdFx0XHRzdHJUb0hhbmRsZXJOYW1lcyA9IHRvSGFuZGxlck5hbWVzLmpvaW4oXCIsXCIpLnJlcGxhY2UoXCIsLFwiLFwiXCIpXHJcblx0XHRcdFx0XHRcdGV4dHJhQ291bnQgPSB0b0FwcHJvdmUuY291bnQgLSB0cmFjZU1heEFwcHJvdmVDb3VudFxyXG5cdFx0XHRcdFx0XHRpZiBleHRyYUNvdW50ID4gMFxyXG5cdFx0XHRcdFx0XHRcdHN0clRvSGFuZGxlck5hbWVzICs9IFwi562JI3t0b0FwcHJvdmUuY291bnR95Lq6XCJcclxuXHRcdFx0XHRcdFx0XHR1bmxlc3MgZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyW2Zyb21BcHByb3ZlSWRdXHJcblx0XHRcdFx0XHRcdFx0XHRleHRyYUhhbmRsZXJOYW1lc0NvdW50ZXJbZnJvbUFwcHJvdmVJZF0gPSB7fVxyXG5cdFx0XHRcdFx0XHRcdGV4dHJhSGFuZGxlck5hbWVzQ291bnRlcltmcm9tQXBwcm92ZUlkXVt0b0FwcHJvdmVUeXBlXSA9IHRvQXBwcm92ZS50b19hcHByb3ZlX2lkXHJcblx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdHN0clRvSGFuZGxlck5hbWVzID0gdG9BcHByb3ZlLnRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lXHJcblx0XHRcdFx0XHRpZiBpc1R5cGVOb2RlXHJcblx0XHRcdFx0XHRcdG5vZGVzLnB1c2ggXCJcdCN7ZnJvbUFwcHJvdmVJZH0+XFxcIiN7dHJhY2VOYW1lfVxcXCJdLS0je3R5cGVOYW1lfS0tPiN7dG9BcHByb3ZlLnRvX2FwcHJvdmVfaWR9PlxcXCIje3N0clRvSGFuZGxlck5hbWVzfVxcXCJdXCJcclxuXHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0bm9kZXMucHVzaCBcIlx0I3tmcm9tQXBwcm92ZUlkfShcXFwiI3t0cmFjZU5hbWV9XFxcIiktLSN7dHlwZU5hbWV9LS0+I3t0b0FwcHJvdmUudG9fYXBwcm92ZV9pZH0+XFxcIiN7c3RyVG9IYW5kbGVyTmFtZXN9XFxcIl1cIlxyXG5cclxuXHRcdCMg5Li66ZyA6KaB6aKd5aSW55Sf5oiQ5omA5pyJ5aSE55CG5Lq65aeT5ZCN55qE6KKr5Lyg6ZiF44CB5YiG5Y+R44CB6L2s5Y+R6IqC54K577yM5aKe5Yqg6byg5qCH5by55Ye66K+m57uG5bGC5LqL5Lu2XHJcblx0XHQjIGV4dHJhSGFuZGxlck5hbWVzQ291bnRlcueahOe7k+aehOS4uu+8mlxyXG5cdFx0IyBjb3VudGVycyA9IHtcclxuXHRcdCMgXHRbZnJvbUFwcHJvdmVJZCjmnaXmupDoioLngrlJRCldOntcclxuXHRcdCMgXHRcdFt0b0FwcHJvdmVUeXBlKOebruagh+e7k+eCueexu+WeiyldOuebruagh+e7k+eCuUlEXHJcblx0XHQjIFx0fVxyXG5cdFx0IyB9XHJcblx0XHRhcHByb3ZlcyA9IHRyYWNlLmFwcHJvdmVzXHJcblx0XHR1bmxlc3MgXy5pc0VtcHR5KGV4dHJhSGFuZGxlck5hbWVzQ291bnRlcilcclxuXHRcdFx0Zm9yIGZyb21BcHByb3ZlSWQsZnJvbUFwcHJvdmUgb2YgZXh0cmFIYW5kbGVyTmFtZXNDb3VudGVyXHJcblx0XHRcdFx0Zm9yIHRvQXBwcm92ZVR5cGUsdG9BcHByb3ZlSWQgb2YgZnJvbUFwcHJvdmVcclxuXHRcdFx0XHRcdHRlbXBIYW5kbGVyTmFtZXMgPSBbXVxyXG5cdFx0XHRcdFx0YXBwcm92ZXMuZm9yRWFjaCAoYXBwcm92ZSktPlxyXG5cdFx0XHRcdFx0XHRpZiBmcm9tQXBwcm92ZUlkID09IGFwcHJvdmUuZnJvbV9hcHByb3ZlX2lkXHJcblx0XHRcdFx0XHRcdFx0dW5sZXNzIHRyYWNlRnJvbUFwcHJvdmVDb3VudGVyc1thcHByb3ZlLl9pZF0/W3RvQXBwcm92ZVR5cGVdXHJcblx0XHRcdFx0XHRcdFx0XHQjIOacieWQjue7reWtkOiKgueCue+8jOWImeS4jeWPguS4juaxh+aAu+WPiuiuoeaVsFxyXG5cdFx0XHRcdFx0XHRcdFx0dGVtcEhhbmRsZXJOYW1lcy5wdXNoIGFwcHJvdmUuaGFuZGxlcl9uYW1lXHJcblx0XHRcdFx0XHRub2Rlcy5wdXNoIFwiXHRjbGljayAje3RvQXBwcm92ZUlkfSBjYWxsYmFjayBcXFwiI3t0ZW1wSGFuZGxlck5hbWVzLmpvaW4oXCIsXCIpfVxcXCJcIlxyXG5cclxuXHRnZW5lcmF0ZVRyYWNlc0dyYXBoU3ludGF4OiAodHJhY2VzLCBpc0NvbnZlcnRUb1N0cmluZyktPlxyXG5cdFx0IyDor6Xlh73mlbDov5Tlm57ku6XkuIvmoLzlvI/nmoRncmFwaOiEmuacrFxyXG5cdFx0IyBncmFwaFN5bnRheCA9ICcnJ1xyXG5cdFx0IyBcdGdyYXBoIExSXHJcblx0XHQjIFx0XHRBLS0+QlxyXG5cdFx0IyBcdFx0QS0tPkNcclxuXHRcdCMgXHRcdEItLT5DXHJcblx0XHQjIFx0XHRDLS0+QVxyXG5cdFx0IyBcdFx0RC0tPkNcclxuXHRcdCMgXHQnJydcclxuXHRcdG5vZGVzID0gW1wiZ3JhcGggVERcIl1cclxuXHRcdGxhc3RUcmFjZSA9IG51bGxcclxuXHRcdGxhc3RBcHByb3ZlcyA9IFtdXHJcblx0XHR0cmFjZXMuZm9yRWFjaCAodHJhY2UpLT5cclxuXHRcdFx0bGluZXMgPSB0cmFjZS5wcmV2aW91c190cmFjZV9pZHNcclxuXHRcdFx0Y3VycmVudFRyYWNlTmFtZSA9IHRyYWNlLm5hbWVcclxuXHRcdFx0aWYgbGluZXM/Lmxlbmd0aFxyXG5cdFx0XHRcdGxpbmVzLmZvckVhY2ggKGxpbmUpLT5cclxuXHRcdFx0XHRcdGZyb21UcmFjZSA9IHRyYWNlcy5maW5kUHJvcGVydHlCeVBLKFwiX2lkXCIsbGluZSlcclxuXHRcdFx0XHRcdGN1cnJlbnRGcm9tVHJhY2VOYW1lID0gZnJvbVRyYWNlLm5hbWVcclxuXHRcdFx0XHRcdGZyb21BcHByb3ZlcyA9IGZyb21UcmFjZS5hcHByb3Zlc1xyXG5cdFx0XHRcdFx0dG9BcHByb3ZlcyA9IHRyYWNlLmFwcHJvdmVzXHJcblx0XHRcdFx0XHRsYXN0VHJhY2UgPSB0cmFjZVxyXG5cdFx0XHRcdFx0bGFzdEFwcHJvdmVzID0gdG9BcHByb3Zlc1xyXG5cdFx0XHRcdFx0ZnJvbUFwcHJvdmVzLmZvckVhY2ggKGZyb21BcHByb3ZlKS0+XHJcblx0XHRcdFx0XHRcdGZyb21BcHByb3ZlSGFuZGxlck5hbWUgPSBmcm9tQXBwcm92ZS5oYW5kbGVyX25hbWVcclxuXHRcdFx0XHRcdFx0aWYgdG9BcHByb3Zlcz8ubGVuZ3RoXHJcblx0XHRcdFx0XHRcdFx0dG9BcHByb3Zlcy5mb3JFYWNoICh0b0FwcHJvdmUpLT5cclxuXHRcdFx0XHRcdFx0XHRcdGlmIFtcImNjXCIsXCJmb3J3YXJkXCIsXCJkaXN0cmlidXRlXCJdLmluZGV4T2YodG9BcHByb3ZlLnR5cGUpIDwgMFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiBbXCJjY1wiLFwiZm9yd2FyZFwiLFwiZGlzdHJpYnV0ZVwiXS5pbmRleE9mKGZyb21BcHByb3ZlLnR5cGUpIDwgMFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZyb21UcmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZU5hbWUgY3VycmVudEZyb21UcmFjZU5hbWUsIGZyb21BcHByb3ZlSGFuZGxlck5hbWVcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0b1RyYWNlTmFtZSA9IEZsb3d2ZXJzaW9uQVBJLmdldFRyYWNlTmFtZSBjdXJyZW50VHJhY2VOYW1lLCB0b0FwcHJvdmUuaGFuZGxlcl9uYW1lXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0IyDkuI3mmK/kvKDpmIXjgIHliIblj5HjgIHovazlj5HvvIzliJnov57mjqXliLDkuIvkuIDkuKp0cmFjZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGp1ZGdlVGV4dCA9IEZsb3d2ZXJzaW9uQVBJLmdldEFwcHJvdmVKdWRnZVRleHQgZnJvbUFwcHJvdmUuanVkZ2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiBqdWRnZVRleHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGVzLnB1c2ggXCJcdCN7ZnJvbUFwcHJvdmUuX2lkfShcXFwiI3tmcm9tVHJhY2VOYW1lfVxcXCIpLS0je2p1ZGdlVGV4dH0tLT4je3RvQXBwcm92ZS5faWR9KFxcXCIje3RvVHJhY2VOYW1lfVxcXCIpXCJcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRub2Rlcy5wdXNoIFwiXHQje2Zyb21BcHByb3ZlLl9pZH0oXFxcIiN7ZnJvbVRyYWNlTmFtZX1cXFwiKS0tPiN7dG9BcHByb3ZlLl9pZH0oXFxcIiN7dG9UcmFjZU5hbWV9XFxcIilcIlxyXG5cdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0IyDmnIDlkI7kuIDkuKrmraXpqqTnmoR0cmFjZVxyXG5cdFx0XHRcdFx0XHRcdGlmIFtcImNjXCIsXCJmb3J3YXJkXCIsXCJkaXN0cmlidXRlXCJdLmluZGV4T2YoZnJvbUFwcHJvdmUudHlwZSkgPCAwXHJcblx0XHRcdFx0XHRcdFx0XHRmcm9tVHJhY2VOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0VHJhY2VOYW1lIGN1cnJlbnRGcm9tVHJhY2VOYW1lLCBmcm9tQXBwcm92ZUhhbmRsZXJOYW1lXHJcblx0XHRcdFx0XHRcdFx0XHR0b1RyYWNlTmFtZSA9IEZsb3d2ZXJzaW9uQVBJLnJlcGxhY2VFcnJvclN5bWJvbChjdXJyZW50VHJhY2VOYW1lKVxyXG5cdFx0XHRcdFx0XHRcdFx0IyDkuI3mmK/kvKDpmIXjgIHliIblj5HjgIHovazlj5HvvIzliJnov57mjqXliLDkuIvkuIDkuKp0cmFjZVxyXG5cdFx0XHRcdFx0XHRcdFx0anVkZ2VUZXh0ID0gRmxvd3ZlcnNpb25BUEkuZ2V0QXBwcm92ZUp1ZGdlVGV4dCBmcm9tQXBwcm92ZS5qdWRnZVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYganVkZ2VUZXh0XHJcblx0XHRcdFx0XHRcdFx0XHRcdG5vZGVzLnB1c2ggXCJcdCN7ZnJvbUFwcHJvdmUuX2lkfShcXFwiI3tmcm9tVHJhY2VOYW1lfVxcXCIpLS0je2p1ZGdlVGV4dH0tLT4je3RyYWNlLl9pZH0oXFxcIiN7dG9UcmFjZU5hbWV9XFxcIilcIlxyXG5cdFx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRub2Rlcy5wdXNoIFwiXHQje2Zyb21BcHByb3ZlLl9pZH0oXFxcIiN7ZnJvbVRyYWNlTmFtZX1cXFwiKS0tPiN7dHJhY2UuX2lkfShcXFwiI3t0b1RyYWNlTmFtZX1cXFwiKVwiXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHQjIOesrOS4gOS4qnRyYWNl77yM5ZugdHJhY2Vz5Y+v6IO95Y+q5pyJ5LiA5Liq77yM6L+Z5pe26ZyA6KaB5Y2V54us5pi+56S65Ye65p2lXHJcblx0XHRcdFx0dHJhY2UuYXBwcm92ZXMuZm9yRWFjaCAoYXBwcm92ZSktPlxyXG5cdFx0XHRcdFx0dHJhY2VOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0VHJhY2VOYW1lIGN1cnJlbnRUcmFjZU5hbWUsIGFwcHJvdmUuaGFuZGxlcl9uYW1lXHJcblx0XHRcdFx0XHRub2Rlcy5wdXNoIFwiXHQje2FwcHJvdmUuX2lkfShcXFwiI3t0cmFjZU5hbWV9XFxcIilcIlxyXG5cclxuXHRcdFx0Rmxvd3ZlcnNpb25BUEkucHVzaEFwcHJvdmVzV2l0aFR5cGVHcmFwaFN5bnRheCBub2RlcywgdHJhY2VcclxuXHJcblx0XHQjIOetvuaJueWOhueoi+S4reacgOWQjueahGFwcHJvdmVz6auY5Lqu5pi+56S677yM57uT5p2f5q2l6aqk55qEdHJhY2XkuK3mmK/msqHmnIlhcHByb3Zlc+eahO+8jOaJgOS7pee7k+adn+atpemqpOS4jemrmOS6ruaYvuekulxyXG5cdFx0bGFzdEFwcHJvdmVzPy5mb3JFYWNoIChsYXN0QXBwcm92ZSktPlxyXG5cdFx0XHRub2Rlcy5wdXNoIFwiXHRjbGFzcyAje2xhc3RBcHByb3ZlLl9pZH0gY3VycmVudC1zdGVwLW5vZGU7XCJcclxuXHJcblx0XHRpZiBpc0NvbnZlcnRUb1N0cmluZ1xyXG5cdFx0XHRncmFwaFN5bnRheCA9IG5vZGVzLmpvaW4gXCJcXG5cIlxyXG5cdFx0XHRyZXR1cm4gZ3JhcGhTeW50YXhcclxuXHRcdGVsc2VcclxuXHRcdFx0cmV0dXJuIG5vZGVzXHJcblxyXG5cdHNlbmRIdG1sUmVzcG9uc2U6IChyZXEsIHJlcywgdHlwZSktPlxyXG5cdFx0cXVlcnkgPSByZXEucXVlcnlcclxuXHRcdGluc3RhbmNlX2lkID0gcXVlcnkuaW5zdGFuY2VfaWRcclxuXHJcblx0XHR1bmxlc3MgaW5zdGFuY2VfaWRcclxuXHRcdFx0Rmxvd3ZlcnNpb25BUEkuc2VuZEludmFsaWRVUkxSZXNwb25zZSByZXMgXHJcblx0XHRcclxuXHRcdHRpdGxlID0gcXVlcnkudGl0bGVcclxuXHRcdGlmIHRpdGxlXHJcblx0XHRcdHRpdGxlID0gZGVjb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudCh0aXRsZSkpXHJcblx0XHRlbHNlXHJcblx0XHRcdHRpdGxlID0gXCJXb3JrZmxvdyBDaGFydFwiXHJcblxyXG5cdFx0ZXJyb3JfbXNnID0gXCJcIlxyXG5cdFx0Z3JhcGhTeW50YXggPSBcIlwiXHJcblx0XHRGbG93dmVyc2lvbkFQSS5pc0V4cGFuZEFwcHJvdmUgPSBmYWxzZVxyXG5cdFx0aWYgdHlwZSA9PSBcInRyYWNlc19leHBhbmRcIlxyXG5cdFx0XHR0eXBlID0gXCJ0cmFjZXNcIlxyXG5cdFx0XHRGbG93dmVyc2lvbkFQSS5pc0V4cGFuZEFwcHJvdmUgPSB0cnVlXHJcblx0XHRzd2l0Y2ggdHlwZVxyXG5cdFx0XHR3aGVuICd0cmFjZXMnXHJcblx0XHRcdFx0aW5zdGFuY2UgPSBkYi5pbnN0YW5jZXMuZmluZE9uZSBpbnN0YW5jZV9pZCx7ZmllbGRzOnt0cmFjZXM6IDF9fVxyXG5cdFx0XHRcdGlmIGluc3RhbmNlXHJcblx0XHRcdFx0XHR0cmFjZXMgPSBpbnN0YW5jZS50cmFjZXNcclxuXHRcdFx0XHRcdGlmIHRyYWNlcz8ubGVuZ3RoXHJcblx0XHRcdFx0XHRcdGdyYXBoU3ludGF4ID0gdGhpcy5nZW5lcmF0ZVRyYWNlc0dyYXBoU3ludGF4IHRyYWNlc1xyXG5cdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRlcnJvcl9tc2cgPSBcIuayoeacieaJvuWIsOW9k+WJjeeUs+ivt+WNleeahOa1geeoi+atpemqpOaVsOaNrlwiXHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0ZXJyb3JfbXNnID0gXCLlvZPliY3nlLPor7fljZXkuI3lrZjlnKjmiJblt7LooqvliKDpmaRcIlxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0aW5zdGFuY2UgPSBkYi5pbnN0YW5jZXMuZmluZE9uZSBpbnN0YW5jZV9pZCx7ZmllbGRzOntmbG93X3ZlcnNpb246MSxmbG93OjEsdHJhY2VzOiB7JHNsaWNlOiAtMX19fVxyXG5cdFx0XHRcdGlmIGluc3RhbmNlXHJcblx0XHRcdFx0XHRjdXJyZW50U3RlcElkID0gaW5zdGFuY2UudHJhY2VzP1swXT8uc3RlcFxyXG5cdFx0XHRcdFx0Zmxvd3ZlcnNpb24gPSBXb3JrZmxvd01hbmFnZXIuZ2V0SW5zdGFuY2VGbG93VmVyc2lvbihpbnN0YW5jZSlcclxuXHRcdFx0XHRcdHN0ZXBzID0gZmxvd3ZlcnNpb24/LnN0ZXBzXHJcblx0XHRcdFx0XHRpZiBzdGVwcz8ubGVuZ3RoXHJcblx0XHRcdFx0XHRcdGdyYXBoU3ludGF4ID0gdGhpcy5nZW5lcmF0ZVN0ZXBzR3JhcGhTeW50YXggc3RlcHMsY3VycmVudFN0ZXBJZFxyXG5cdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRlcnJvcl9tc2cgPSBcIuayoeacieaJvuWIsOW9k+WJjeeUs+ivt+WNleeahOa1geeoi+atpemqpOaVsOaNrlwiXHJcblx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0ZXJyb3JfbXNnID0gXCLlvZPliY3nlLPor7fljZXkuI3lrZjlnKjmiJblt7LooqvliKDpmaRcIlxyXG5cdFx0XHRcdGJyZWFrXHJcblxyXG5cdFx0cmV0dXJuIEB3cml0ZVJlc3BvbnNlIHJlcywgMjAwLCBcIlwiXCJcclxuXHRcdFx0PCFET0NUWVBFIGh0bWw+XHJcblx0XHRcdDxodG1sPlxyXG5cdFx0XHRcdDxoZWFkPlxyXG5cdFx0XHRcdFx0PG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XHJcblx0XHRcdFx0XHQ8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSx1c2VyLXNjYWxhYmxlPXllc1wiPlxyXG5cdFx0XHRcdFx0PHRpdGxlPiN7dGl0bGV9PC90aXRsZT5cclxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImljb25cIiB0eXBlPVwiaW1hZ2UvcG5nXCIgc2l6ZXM9XCIxOTJ4MTkyXCIgaHJlZj1cIi9mYXZpY29ucy9hbmRyb2lkLWNocm9tZS0xOTJ4MTkyLnBuZ1wiPlxyXG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwibWFuaWZlc3RcIiBocmVmPVwiL2Zhdmljb25zL21hbmlmZXN0Lmpzb25cIj5cclxuXHRcdFx0XHRcdDxtZXRhIG5hbWU9XCJtb2JpbGUtd2ViLWFwcC1jYXBhYmxlXCIgY29udGVudD1cInllc1wiPlxyXG5cdFx0XHRcdFx0PG1ldGEgbmFtZT1cInRoZW1lLWNvbG9yXCIgY29udGVudD1cIiMwMDBcIj5cclxuXHRcdFx0XHRcdDxtZXRhIG5hbWU9XCJhcHBsaWNhdGlvbi1uYW1lXCI+XHJcblx0XHRcdFx0XHQ8bGluayByZWw9XCJhcHBsZS10b3VjaC1pY29uXCIgc2l6ZXM9XCI1N3g1N1wiIGhyZWY9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9hcHBsZS10b3VjaC1pY29uLTU3eDU3LnBuZ1wiKX1cIj5cclxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImFwcGxlLXRvdWNoLWljb25cIiBzaXplcz1cIjYweDYwXCIgaHJlZj1cIiN7QGdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tNjB4NjAucG5nXCIpfVwiPlxyXG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwiYXBwbGUtdG91Y2gtaWNvblwiIHNpemVzPVwiNzJ4NzJcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi03Mng3Mi5wbmdcIil9XCI+XHJcblx0XHRcdFx0XHQ8bGluayByZWw9XCJhcHBsZS10b3VjaC1pY29uXCIgc2l6ZXM9XCI3Nng3NlwiIGhyZWY9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9hcHBsZS10b3VjaC1pY29uLTc2eDc2LnBuZ1wiKX1cIj5cclxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImFwcGxlLXRvdWNoLWljb25cIiBzaXplcz1cIjExNHgxMTRcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi0xMTR4MTE0LnBuZ1wiKX1cIj5cclxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImFwcGxlLXRvdWNoLWljb25cIiBzaXplcz1cIjEyMHgxMjBcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi0xMjB4MTIwLnBuZ1wiKX1cIj5cclxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImFwcGxlLXRvdWNoLWljb25cIiBzaXplcz1cIjE0NHgxNDRcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi0xNDR4MTQ0LnBuZ1wiKX1cIj5cclxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImFwcGxlLXRvdWNoLWljb25cIiBzaXplcz1cIjE1MngxNTJcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi0xNTJ4MTUyLnBuZ1wiKX1cIj5cclxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cImFwcGxlLXRvdWNoLWljb25cIiBzaXplcz1cIjE4MHgxODBcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi0xODB4MTgwLnBuZ1wiKX1cIj5cclxuXHRcdFx0XHRcdDxtZXRhIG5hbWU9XCJhcHBsZS1tb2JpbGUtd2ViLWFwcC1jYXBhYmxlXCIgY29udGVudD1cInllc1wiPlxyXG5cdFx0XHRcdFx0PG1ldGEgbmFtZT1cImFwcGxlLW1vYmlsZS13ZWItYXBwLXN0YXR1cy1iYXItc3R5bGVcIiBjb250ZW50PVwiYmxhY2stdHJhbnNsdWNlbnRcIj5cclxuXHRcdFx0XHRcdDxtZXRhIG5hbWU9XCJhcHBsZS1tb2JpbGUtd2ViLWFwcC10aXRsZVwiPlxyXG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwiaWNvblwiIHR5cGU9XCJpbWFnZS9wbmdcIiBzaXplcz1cIjIyOHgyMjhcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvY29hc3QtMjI4eDIyOC5wbmdcIil9XCI+XHJcblx0XHRcdFx0XHQ8bGluayByZWw9XCJpY29uXCIgdHlwZT1cImltYWdlL3BuZ1wiIHNpemVzPVwiMTZ4MTZcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvZmF2aWNvbi0xNngxNi5wbmdcIil9XCI+XHJcblx0XHRcdFx0XHQ8bGluayByZWw9XCJpY29uXCIgdHlwZT1cImltYWdlL3BuZ1wiIHNpemVzPVwiMzJ4MzJcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvZmF2aWNvbi0zMngzMi5wbmdcIil9XCI+XHJcblx0XHRcdFx0XHQ8bGluayByZWw9XCJpY29uXCIgdHlwZT1cImltYWdlL3BuZ1wiIHNpemVzPVwiOTZ4OTZcIiBocmVmPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvZmF2aWNvbi05Nng5Ni5wbmdcIil9XCI+XHJcblx0XHRcdFx0XHQ8bGluayByZWw9XCJpY29uXCIgdHlwZT1cImltYWdlL3BuZ1wiIHNpemVzPVwiMjMweDIzMFwiIGhyZWY9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9mYXZpY29uLTIzMHgyMzAucG5nXCIpfVwiPlxyXG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwic2hvcnRjdXQgaWNvblwiIGhyZWY9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9mYXZpY29uLmljb1wiKX1cIj5cclxuXHRcdFx0XHRcdDxsaW5rIHJlbD1cInlhbmRleC10YWJsZWF1LXdpZGdldFwiIGhyZWY9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy95YW5kZXgtYnJvd3Nlci1tYW5pZmVzdC5qc29uXCIpfVwiPlxyXG5cdFx0XHRcdFx0PG1ldGEgbmFtZT1cIm1zYXBwbGljYXRpb24tVGlsZUNvbG9yXCIgY29udGVudD1cIiNmZmZcIj5cclxuXHRcdFx0XHRcdDxtZXRhIG5hbWU9XCJtc2FwcGxpY2F0aW9uLVRpbGVJbWFnZVwiIGNvbnRlbnQ9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9tc3RpbGUtMTQ0eDE0NC5wbmdcIil9XCI+XHJcblx0XHRcdFx0XHQ8bWV0YSBuYW1lPVwibXNhcHBsaWNhdGlvbi1jb25maWdcIiBjb250ZW50PVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYnJvd3NlcmNvbmZpZy54bWxcIil9XCI+XHJcblx0XHRcdFx0XHQ8bWV0YSBwcm9wZXJ0eT1cInR3aXR0ZXI6aW1hZ2VcIiBjb250ZW50PVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvdHdpdHRlci5wbmdcIil9XCI+XHJcblx0XHRcdFx0XHQ8bWV0YSBwcm9wZXJ0eT1cIm9nOmltYWdlXCIgY29udGVudD1cIiN7QGdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL29wZW4tZ3JhcGgucG5nXCIpfVwiPlxyXG5cdFx0XHRcdFx0PGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIje0BnZXRBYnNvbHV0ZVVybChcIi9wYWNrYWdlcy9zdGVlZG9zX3dvcmtmbG93LWNoYXJ0L2Fzc2V0cy9tZXJtYWlkL2Rpc3QvbWVybWFpZC5jc3NcIil9XCIvPlxyXG5cdFx0XHRcdFx0PHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIgc3JjPVwiI3tAZ2V0QWJzb2x1dGVVcmwoXCIvbGliL2pxdWVyeS9qcXVlcnktMS4xMS4yLm1pbi5qc1wiKX1cIj48L3NjcmlwdD5cclxuXHRcdFx0XHRcdDxzY3JpcHQgdHlwZT1cInRleHQvamF2YXNjcmlwdFwiIHNyYz1cIiN7QGdldEFic29sdXRlVXJsKFwiL3BhY2thZ2VzL3N0ZWVkb3Nfd29ya2Zsb3ctY2hhcnQvYXNzZXRzL21lcm1haWQvZGlzdC9tZXJtYWlkLm1pbi5qc1wiKX1cIj48L3NjcmlwdD5cclxuXHRcdFx0XHRcdDxzdHlsZT5cclxuXHRcdFx0XHRcdFx0Ym9keSB7IFxyXG5cdFx0XHRcdFx0XHRcdGZvbnQtZmFtaWx5OiAnU291cmNlIFNhbnMgUHJvJywgJ0hlbHZldGljYSBOZXVlJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjtcclxuXHRcdFx0XHRcdFx0XHR0ZXh0LWFsaWduOiBjZW50ZXI7XHJcblx0XHRcdFx0XHRcdFx0YmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQubG9hZGluZ3tcclxuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbjogYWJzb2x1dGU7XHJcblx0XHRcdFx0XHRcdFx0bGVmdDogMHB4O1xyXG5cdFx0XHRcdFx0XHRcdHJpZ2h0OiAwcHg7XHJcblx0XHRcdFx0XHRcdFx0dG9wOiA1MCU7XHJcblx0XHRcdFx0XHRcdFx0ei1pbmRleDogMTEwMDtcclxuXHRcdFx0XHRcdFx0XHR0ZXh0LWFsaWduOiBjZW50ZXI7XHJcblx0XHRcdFx0XHRcdFx0bWFyZ2luLXRvcDogLTMwcHg7XHJcblx0XHRcdFx0XHRcdFx0Zm9udC1zaXplOiAzNnB4O1xyXG5cdFx0XHRcdFx0XHRcdGNvbG9yOiAjZGZkZmRmO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC5lcnJvci1tc2d7XHJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IGFic29sdXRlO1xyXG5cdFx0XHRcdFx0XHRcdGxlZnQ6IDBweDtcclxuXHRcdFx0XHRcdFx0XHRyaWdodDogMHB4O1xyXG5cdFx0XHRcdFx0XHRcdGJvdHRvbTogMjBweDtcclxuXHRcdFx0XHRcdFx0XHR6LWluZGV4OiAxMTAwO1xyXG5cdFx0XHRcdFx0XHRcdHRleHQtYWxpZ246IGNlbnRlcjtcclxuXHRcdFx0XHRcdFx0XHRmb250LXNpemU6IDIwcHg7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3I6ICNhOTQ0NDI7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlIHJlY3R7XHJcblx0XHRcdFx0XHRcdFx0ZmlsbDogI2NjY2NmZjtcclxuXHRcdFx0XHRcdFx0XHRzdHJva2U6IHJnYigxNDQsIDE0NCwgMjU1KTtcclxuICAgIFx0XHRcdFx0XHRcdHN0cm9rZS13aWR0aDogMnB4O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdCNmbG93LXN0ZXBzLXN2ZyAubm9kZS5jdXJyZW50LXN0ZXAtbm9kZSByZWN0e1xyXG5cdFx0XHRcdFx0XHRcdGZpbGw6ICNjZGU0OTg7XHJcblx0XHRcdFx0XHRcdFx0c3Ryb2tlOiAjMTM1NDBjO1xyXG5cdFx0XHRcdFx0XHRcdHN0cm9rZS13aWR0aDogMnB4O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdCNmbG93LXN0ZXBzLXN2ZyAubm9kZS5jb25kaXRpb24gcmVjdHtcclxuXHRcdFx0XHRcdFx0XHRmaWxsOiAjZWNlY2ZmO1xyXG5cdFx0XHRcdFx0XHRcdHN0cm9rZTogcmdiKDIwNCwgMjA0LCAyNTUpO1xyXG4gICAgXHRcdFx0XHRcdFx0c3Ryb2tlLXdpZHRoOiAxcHg7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlIC50cmFjZS1oYW5kbGVyLW5hbWV7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3I6ICM3Nzc7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlIC5zdGVwLWhhbmRsZXItbmFtZXtcclxuXHRcdFx0XHRcdFx0XHRjb2xvcjogIzc3NztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRkaXYubWVybWFpZFRvb2x0aXB7XHJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IGZpeGVkIWltcG9ydGFudDtcclxuXHRcdFx0XHRcdFx0XHR0ZXh0LWFsaWduOiBsZWZ0IWltcG9ydGFudDtcclxuXHRcdFx0XHRcdFx0XHRwYWRkaW5nOiA0cHghaW1wb3J0YW50O1xyXG5cdFx0XHRcdFx0XHRcdGZvbnQtc2l6ZTogMTRweCFpbXBvcnRhbnQ7XHJcblx0XHRcdFx0XHRcdFx0bWF4LXdpZHRoOiA1MDBweCFpbXBvcnRhbnQ7XHJcblx0XHRcdFx0XHRcdFx0bGVmdDogYXV0byFpbXBvcnRhbnQ7XHJcblx0XHRcdFx0XHRcdFx0dG9wOiAxNXB4IWltcG9ydGFudDtcclxuXHRcdFx0XHRcdFx0XHRyaWdodDogMTVweDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQuYnRuLXpvb217XHJcblx0XHRcdFx0XHRcdFx0YmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjEpO1xyXG5cdFx0XHRcdFx0XHRcdGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcblx0XHRcdFx0XHRcdFx0ZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG5cdFx0XHRcdFx0XHRcdHBhZGRpbmc6IDJweCAxMHB4O1xyXG5cdFx0XHRcdFx0XHRcdGZvbnQtc2l6ZTogMjZweDtcclxuXHRcdFx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiAyMHB4O1xyXG5cdFx0XHRcdFx0XHRcdGJhY2tncm91bmQ6ICNlZWU7XHJcblx0XHRcdFx0XHRcdFx0Y29sb3I6ICM3Nzc7XHJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IGZpeGVkO1xyXG5cdFx0XHRcdFx0XHRcdGJvdHRvbTogMTVweDtcclxuXHRcdFx0XHRcdFx0XHRvdXRsaW5lOiBub25lO1xyXG5cdFx0XHRcdFx0XHRcdGN1cnNvcjogcG9pbnRlcjtcclxuXHRcdFx0XHRcdFx0XHR6LWluZGV4OiA5OTk5OTtcclxuXHRcdFx0XHRcdFx0XHQtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xyXG5cdFx0XHRcdFx0XHRcdC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XHJcblx0XHRcdFx0XHRcdFx0LW1zLXVzZXItc2VsZWN0OiBub25lO1xyXG5cdFx0XHRcdFx0XHRcdHVzZXItc2VsZWN0OiBub25lO1xyXG5cdFx0XHRcdFx0XHRcdGxpbmUtaGVpZ2h0OiAxLjI7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0QG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XHJcblx0XHRcdFx0XHRcdFx0LmJ0bi16b29te1xyXG5cdFx0XHRcdFx0XHRcdFx0ZGlzcGxheTpub25lO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQuYnRuLXpvb206aG92ZXJ7XHJcblx0XHRcdFx0XHRcdFx0YmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjIpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC5idG4tem9vbS11cHtcclxuXHRcdFx0XHRcdFx0XHRsZWZ0OiAxNXB4O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC5idG4tem9vbS1kb3due1xyXG5cdFx0XHRcdFx0XHRcdGxlZnQ6IDYwcHg7XHJcblx0XHRcdFx0XHRcdFx0cGFkZGluZzogMXB4IDEzcHggM3B4IDEzcHg7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdDwvc3R5bGU+XHJcblx0XHRcdFx0PC9oZWFkPlxyXG5cdFx0XHRcdDxib2R5PlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcyA9IFwibG9hZGluZ1wiPkxvYWRpbmcuLi48L2Rpdj5cclxuXHRcdFx0XHRcdDxkaXYgY2xhc3MgPSBcImVycm9yLW1zZ1wiPiN7ZXJyb3JfbXNnfTwvZGl2PlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lcm1haWRcIj48L2Rpdj5cclxuXHRcdFx0XHRcdDxzY3JpcHQgdHlwZT1cInRleHQvamF2YXNjcmlwdFwiPlxyXG5cdFx0XHRcdFx0XHRtZXJtYWlkLmluaXRpYWxpemUoe1xyXG5cdFx0XHRcdFx0XHRcdHN0YXJ0T25Mb2FkOmZhbHNlXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHQkKGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdFx0dmFyIGdyYXBoTm9kZXMgPSAje0pTT04uc3RyaW5naWZ5KGdyYXBoU3ludGF4KX07XHJcblx0XHRcdFx0XHRcdFx0Ly/mlrnkvr/liY3pnaLlj6/ku6XpgJrov4fosIPnlKhtZXJtYWlkLmN1cnJlbnROb2Rlc+iwg+W8j++8jOeJueaEj+WinuWKoGN1cnJlbnROb2Rlc+WxnuaAp+OAglxyXG5cdFx0XHRcdFx0XHRcdG1lcm1haWQuY3VycmVudE5vZGVzID0gZ3JhcGhOb2RlcztcclxuXHRcdFx0XHRcdFx0XHR2YXIgZ3JhcGhTeW50YXggPSBncmFwaE5vZGVzLmpvaW4oXCJcXFxcblwiKTtcclxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhncmFwaE5vZGVzKTtcclxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhncmFwaFN5bnRheCk7XHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJZb3UgY2FuIGFjY2VzcyB0aGUgZ3JhcGggbm9kZXMgYnkgJ21lcm1haWQuY3VycmVudE5vZGVzJyBpbiB0aGUgY29uc29sZSBvZiBicm93c2VyLlwiKTtcclxuXHRcdFx0XHRcdFx0XHQkKFwiLmxvYWRpbmdcIikucmVtb3ZlKCk7XHJcblxyXG5cdFx0XHRcdFx0XHRcdHZhciBpZCA9IFwiZmxvdy1zdGVwcy1zdmdcIjtcclxuXHRcdFx0XHRcdFx0XHR2YXIgZWxlbWVudCA9ICQoJy5tZXJtYWlkJyk7XHJcblx0XHRcdFx0XHRcdFx0dmFyIGluc2VydFN2ZyA9IGZ1bmN0aW9uKHN2Z0NvZGUsIGJpbmRGdW5jdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGVsZW1lbnQuaHRtbChzdmdDb2RlKTtcclxuXHRcdFx0XHRcdFx0XHRcdGlmKHR5cGVvZiBjYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcpe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjYWxsYmFjayhpZCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRiaW5kRnVuY3Rpb25zKGVsZW1lbnRbMF0pO1xyXG5cdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdFx0bWVybWFpZC5yZW5kZXIoaWQsIGdyYXBoU3ludGF4LCBpbnNlcnRTdmcsIGVsZW1lbnRbMF0pO1xyXG5cclxuXHRcdFx0XHRcdFx0XHR2YXIgem9vbVNWRyA9IGZ1bmN0aW9uKHpvb20pe1xyXG5cdFx0XHRcdFx0XHRcdFx0dmFyIGN1cnJlbnRXaWR0aCA9ICQoXCJzdmdcIikud2lkdGgoKTtcclxuXHRcdFx0XHRcdFx0XHRcdHZhciBuZXdXaWR0aCA9IGN1cnJlbnRXaWR0aCAqIHpvb207XHJcblx0XHRcdFx0XHRcdFx0XHQkKFwic3ZnXCIpLmNzcyhcIm1heFdpZHRoXCIsbmV3V2lkdGggKyBcInB4XCIpLndpZHRoKG5ld1dpZHRoKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8v5pSv5oyB6byg5qCH5rua6L2u57yp5pS+55S75biDXHJcblx0XHRcdFx0XHRcdFx0JCh3aW5kb3cpLm9uKFwibW91c2V3aGVlbFwiLGZ1bmN0aW9uKGV2ZW50KXtcclxuXHRcdFx0XHRcdFx0XHRcdGlmKGV2ZW50LmN0cmxLZXkpe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgem9vbSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA+IDAgPyAxLjEgOiAwLjk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHpvb21TVkcoem9vbSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0JChcIi5idG4tem9vbVwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0XHRcdHpvb21TVkcoJCh0aGlzKS5hdHRyKFwiem9vbVwiKSk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0PC9zY3JpcHQ+XHJcblx0XHRcdFx0XHQ8YSBjbGFzcz1cImJ0bi16b29tIGJ0bi16b29tLXVwXCIgem9vbT0xLjEgdGl0bGU9XCLngrnlh7vmlL7lpKdcIj4rPC9hPlxyXG5cdFx0XHRcdFx0PGEgY2xhc3M9XCJidG4tem9vbSBidG4tem9vbS1kb3duXCIgem9vbT0wLjkgdGl0bGU9XCLngrnlh7vnvKnlsI9cIj4tPC9hPlxyXG5cdFx0XHRcdDwvYm9keT5cclxuXHRcdFx0PC9odG1sPlxyXG5cdFx0XCJcIlwiXHJcblxyXG5Kc29uUm91dGVzLmFkZCAnZ2V0JywgJy9hcGkvd29ya2Zsb3cvY2hhcnQ/aW5zdGFuY2VfaWQ9Omluc3RhbmNlX2lkJywgKHJlcSwgcmVzLCBuZXh0KSAtPlxyXG5cdCMg5rWB56iL5Zu+XHJcblx0Rmxvd3ZlcnNpb25BUEkuc2VuZEh0bWxSZXNwb25zZSByZXEsIHJlc1xyXG5cclxuSnNvblJvdXRlcy5hZGQgJ2dldCcsICcvYXBpL3dvcmtmbG93L2NoYXJ0L3RyYWNlcz9pbnN0YW5jZV9pZD06aW5zdGFuY2VfaWQnLCAocmVxLCByZXMsIG5leHQpIC0+XHJcblx0IyDmsYfmgLvnrb7mibnljobnqIvlm75cclxuXHRGbG93dmVyc2lvbkFQSS5zZW5kSHRtbFJlc3BvbnNlIHJlcSwgcmVzLCBcInRyYWNlc1wiXHJcblxyXG5Kc29uUm91dGVzLmFkZCAnZ2V0JywgJy9hcGkvd29ya2Zsb3cvY2hhcnQvdHJhY2VzX2V4cGFuZD9pbnN0YW5jZV9pZD06aW5zdGFuY2VfaWQnLCAocmVxLCByZXMsIG5leHQpIC0+XHJcblx0IyDlsZXlvIDmiYDmnInoioLngrnnmoTnrb7mibnljobnqIvlm75cclxuXHRGbG93dmVyc2lvbkFQSS5zZW5kSHRtbFJlc3BvbnNlIHJlcSwgcmVzLCBcInRyYWNlc19leHBhbmRcIlxyXG5cclxuIiwidmFyIEZsb3d2ZXJzaW9uQVBJO1xuXG5GbG93dmVyc2lvbkFQSSA9IHtcbiAgdHJhY2VNYXhBcHByb3ZlQ291bnQ6IDEwLFxuICB0cmFjZVNwbGl0QXBwcm92ZXNJbmRleDogNSxcbiAgaXNFeHBhbmRBcHByb3ZlOiBmYWxzZSxcbiAgZ2V0QWJzb2x1dGVVcmw6IGZ1bmN0aW9uKHVybCkge1xuICAgIHZhciByb290VXJsO1xuICAgIHJvb3RVcmwgPSBfX21ldGVvcl9ydW50aW1lX2NvbmZpZ19fID8gX19tZXRlb3JfcnVudGltZV9jb25maWdfXy5ST09UX1VSTF9QQVRIX1BSRUZJWCA6IFwiXCI7XG4gICAgaWYgKHJvb3RVcmwpIHtcbiAgICAgIHVybCA9IHJvb3RVcmwgKyB1cmw7XG4gICAgfVxuICAgIHJldHVybiB1cmw7XG4gIH0sXG4gIHdyaXRlUmVzcG9uc2U6IGZ1bmN0aW9uKHJlcywgaHR0cENvZGUsIGJvZHkpIHtcbiAgICByZXMuc3RhdHVzQ29kZSA9IGh0dHBDb2RlO1xuICAgIHJldHVybiByZXMuZW5kKGJvZHkpO1xuICB9LFxuICBzZW5kSW52YWxpZFVSTFJlc3BvbnNlOiBmdW5jdGlvbihyZXMpIHtcbiAgICByZXR1cm4gdGhpcy53cml0ZVJlc3BvbnNlKHJlcywgNDA0LCBcInVybCBtdXN0IGhhcyBxdWVyeXMgYXMgaW5zdGFuY2VfaWQuXCIpO1xuICB9LFxuICBzZW5kQXV0aFRva2VuRXhwaXJlZFJlc3BvbnNlOiBmdW5jdGlvbihyZXMpIHtcbiAgICByZXR1cm4gdGhpcy53cml0ZVJlc3BvbnNlKHJlcywgNDAxLCBcInRoZSBhdXRoX3Rva2VuIGhhcyBleHBpcmVkLlwiKTtcbiAgfSxcbiAgcmVwbGFjZUVycm9yU3ltYm9sOiBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1xcXCIvZywgXCImcXVvdDtcIikucmVwbGFjZSgvXFxuL2csIFwiPGJyLz5cIik7XG4gIH0sXG4gIGdldFN0ZXBIYW5kbGVyTmFtZTogZnVuY3Rpb24oc3RlcCkge1xuICAgIHZhciBhcHByb3Zlck5hbWVzLCBzdGVwSGFuZGxlck5hbWU7XG4gICAgc3dpdGNoIChzdGVwLmRlYWxfdHlwZSkge1xuICAgICAgY2FzZSAnc3BlY2lmeVVzZXInOlxuICAgICAgICBhcHByb3Zlck5hbWVzID0gc3RlcC5hcHByb3Zlcl91c2Vycy5tYXAoZnVuY3Rpb24odXNlcklkKSB7XG4gICAgICAgICAgdmFyIHVzZXI7XG4gICAgICAgICAgdXNlciA9IGRiLnVzZXJzLmZpbmRPbmUodXNlcklkKTtcbiAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3RlcEhhbmRsZXJOYW1lID0gYXBwcm92ZXJOYW1lcy5qb2luKFwiLFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdhcHBsaWNhbnRSb2xlJzpcbiAgICAgICAgYXBwcm92ZXJOYW1lcyA9IHN0ZXAuYXBwcm92ZXJfcm9sZXMubWFwKGZ1bmN0aW9uKHJvbGVJZCkge1xuICAgICAgICAgIHZhciByb2xlO1xuICAgICAgICAgIHJvbGUgPSBkYi5mbG93X3JvbGVzLmZpbmRPbmUocm9sZUlkKTtcbiAgICAgICAgICBpZiAocm9sZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJvbGUubmFtZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3RlcEhhbmRsZXJOYW1lID0gYXBwcm92ZXJOYW1lcy5qb2luKFwiLFwiKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzdGVwSGFuZGxlck5hbWUgPSAnJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBzdGVwSGFuZGxlck5hbWU7XG4gIH0sXG4gIGdldFN0ZXBOYW1lOiBmdW5jdGlvbihzdGVwTmFtZSwgc3RlcEhhbmRsZXJOYW1lKSB7XG4gICAgaWYgKHN0ZXBOYW1lKSB7XG4gICAgICBzdGVwTmFtZSA9IFwiPGRpdiBjbGFzcz0nZ3JhcGgtbm9kZSc+IDxkaXYgY2xhc3M9J3N0ZXAtbmFtZSc+XCIgKyBzdGVwTmFtZSArIFwiPC9kaXY+IDxkaXYgY2xhc3M9J3N0ZXAtaGFuZGxlci1uYW1lJz5cIiArIHN0ZXBIYW5kbGVyTmFtZSArIFwiPC9kaXY+IDwvZGl2PlwiO1xuICAgICAgc3RlcE5hbWUgPSBGbG93dmVyc2lvbkFQSS5yZXBsYWNlRXJyb3JTeW1ib2woc3RlcE5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGVwTmFtZSA9IFwiXCI7XG4gICAgfVxuICAgIHJldHVybiBzdGVwTmFtZTtcbiAgfSxcbiAgZ2VuZXJhdGVTdGVwc0dyYXBoU3ludGF4OiBmdW5jdGlvbihzdGVwcywgY3VycmVudFN0ZXBJZCwgaXNDb252ZXJ0VG9TdHJpbmcpIHtcbiAgICB2YXIgZ3JhcGhTeW50YXgsIG5vZGVzO1xuICAgIG5vZGVzID0gW1wiZ3JhcGggVERcIl07XG4gICAgc3RlcHMuZm9yRWFjaChmdW5jdGlvbihzdGVwKSB7XG4gICAgICB2YXIgbGluZXM7XG4gICAgICBsaW5lcyA9IHN0ZXAubGluZXM7XG4gICAgICBpZiAobGluZXMgIT0gbnVsbCA/IGxpbmVzLmxlbmd0aCA6IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4gbGluZXMuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgdmFyIHN0ZXBIYW5kbGVyTmFtZSwgc3RlcE5hbWUsIHRvU3RlcE5hbWU7XG4gICAgICAgICAgaWYgKHN0ZXAubmFtZSkge1xuICAgICAgICAgICAgaWYgKHN0ZXAuc3RlcF90eXBlID09PSBcImNvbmRpdGlvblwiKSB7XG4gICAgICAgICAgICAgIG5vZGVzLnB1c2goXCJcdGNsYXNzIFwiICsgc3RlcC5faWQgKyBcIiBjb25kaXRpb247XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RlcEhhbmRsZXJOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0U3RlcEhhbmRsZXJOYW1lKHN0ZXApO1xuICAgICAgICAgICAgc3RlcE5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRTdGVwTmFtZShzdGVwLm5hbWUsIHN0ZXBIYW5kbGVyTmFtZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0ZXBOYW1lID0gXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdG9TdGVwTmFtZSA9IHN0ZXBzLmZpbmRQcm9wZXJ0eUJ5UEsoXCJfaWRcIiwgbGluZS50b19zdGVwKS5uYW1lO1xuICAgICAgICAgIHRvU3RlcE5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRTdGVwTmFtZSh0b1N0ZXBOYW1lLCBcIlwiKTtcbiAgICAgICAgICByZXR1cm4gbm9kZXMucHVzaChcIlx0XCIgKyBzdGVwLl9pZCArIFwiKFxcXCJcIiArIHN0ZXBOYW1lICsgXCJcXFwiKS0tPlwiICsgbGluZS50b19zdGVwICsgXCIoXFxcIlwiICsgdG9TdGVwTmFtZSArIFwiXFxcIilcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChjdXJyZW50U3RlcElkKSB7XG4gICAgICBub2Rlcy5wdXNoKFwiXHRjbGFzcyBcIiArIGN1cnJlbnRTdGVwSWQgKyBcIiBjdXJyZW50LXN0ZXAtbm9kZTtcIik7XG4gICAgfVxuICAgIGlmIChpc0NvbnZlcnRUb1N0cmluZykge1xuICAgICAgZ3JhcGhTeW50YXggPSBub2Rlcy5qb2luKFwiXFxuXCIpO1xuICAgICAgcmV0dXJuIGdyYXBoU3ludGF4O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbm9kZXM7XG4gICAgfVxuICB9LFxuICBnZXRBcHByb3ZlSnVkZ2VUZXh0OiBmdW5jdGlvbihqdWRnZSkge1xuICAgIHZhciBqdWRnZVRleHQsIGxvY2FsZTtcbiAgICBsb2NhbGUgPSBcInpoLUNOXCI7XG4gICAgc3dpdGNoIChqdWRnZSkge1xuICAgICAgY2FzZSAnYXBwcm92ZWQnOlxuICAgICAgICBqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSBhcHByb3ZlZCcsIHt9LCBsb2NhbGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JlamVjdGVkJzpcbiAgICAgICAganVkZ2VUZXh0ID0gVEFQaTE4bi5fXygnSW5zdGFuY2UgU3RhdGUgcmVqZWN0ZWQnLCB7fSwgbG9jYWxlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0ZXJtaW5hdGVkJzpcbiAgICAgICAganVkZ2VUZXh0ID0gVEFQaTE4bi5fXygnSW5zdGFuY2UgU3RhdGUgdGVybWluYXRlZCcsIHt9LCBsb2NhbGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JlYXNzaWduZWQnOlxuICAgICAgICBqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSByZWFzc2lnbmVkJywge30sIGxvY2FsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmVsb2NhdGVkJzpcbiAgICAgICAganVkZ2VUZXh0ID0gVEFQaTE4bi5fXygnSW5zdGFuY2UgU3RhdGUgcmVsb2NhdGVkJywge30sIGxvY2FsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmV0cmlldmVkJzpcbiAgICAgICAganVkZ2VUZXh0ID0gVEFQaTE4bi5fXygnSW5zdGFuY2UgU3RhdGUgcmV0cmlldmVkJywge30sIGxvY2FsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmV0dXJuZWQnOlxuICAgICAgICBqdWRnZVRleHQgPSBUQVBpMThuLl9fKCdJbnN0YW5jZSBTdGF0ZSByZXR1cm5lZCcsIHt9LCBsb2NhbGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JlYWRlZCc6XG4gICAgICAgIGp1ZGdlVGV4dCA9IFRBUGkxOG4uX18oJ0luc3RhbmNlIFN0YXRlIHJlYWRlZCcsIHt9LCBsb2NhbGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGp1ZGdlVGV4dCA9ICcnO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGp1ZGdlVGV4dDtcbiAgfSxcbiAgZ2V0VHJhY2VOYW1lOiBmdW5jdGlvbih0cmFjZU5hbWUsIGFwcHJvdmVIYW5kbGVyTmFtZSkge1xuICAgIGlmICh0cmFjZU5hbWUpIHtcbiAgICAgIHRyYWNlTmFtZSA9IFwiPGRpdiBjbGFzcz0nZ3JhcGgtbm9kZSc+IDxkaXYgY2xhc3M9J3RyYWNlLW5hbWUnPlwiICsgdHJhY2VOYW1lICsgXCI8L2Rpdj4gPGRpdiBjbGFzcz0ndHJhY2UtaGFuZGxlci1uYW1lJz5cIiArIGFwcHJvdmVIYW5kbGVyTmFtZSArIFwiPC9kaXY+IDwvZGl2PlwiO1xuICAgICAgdHJhY2VOYW1lID0gRmxvd3ZlcnNpb25BUEkucmVwbGFjZUVycm9yU3ltYm9sKHRyYWNlTmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYWNlTmFtZSA9IFwiXCI7XG4gICAgfVxuICAgIHJldHVybiB0cmFjZU5hbWU7XG4gIH0sXG4gIGdldFRyYWNlRnJvbUFwcHJvdmVDb3VudGVyc1dpdGhUeXBlOiBmdW5jdGlvbih0cmFjZSkge1xuICAgIHZhciBhcHByb3ZlcywgY291bnRlcnM7XG4gICAgY291bnRlcnMgPSB7fTtcbiAgICBhcHByb3ZlcyA9IHRyYWNlLmFwcHJvdmVzO1xuICAgIGlmICghYXBwcm92ZXMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBhcHByb3Zlcy5mb3JFYWNoKGZ1bmN0aW9uKGFwcHJvdmUpIHtcbiAgICAgIGlmIChhcHByb3ZlLmZyb21fYXBwcm92ZV9pZCkge1xuICAgICAgICBpZiAoIWNvdW50ZXJzW2FwcHJvdmUuZnJvbV9hcHByb3ZlX2lkXSkge1xuICAgICAgICAgIGNvdW50ZXJzW2FwcHJvdmUuZnJvbV9hcHByb3ZlX2lkXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb3VudGVyc1thcHByb3ZlLmZyb21fYXBwcm92ZV9pZF1bYXBwcm92ZS50eXBlXSkge1xuICAgICAgICAgIHJldHVybiBjb3VudGVyc1thcHByb3ZlLmZyb21fYXBwcm92ZV9pZF1bYXBwcm92ZS50eXBlXSsrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBjb3VudGVyc1thcHByb3ZlLmZyb21fYXBwcm92ZV9pZF1bYXBwcm92ZS50eXBlXSA9IDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY291bnRlcnM7XG4gIH0sXG4gIGdldFRyYWNlQ291bnRlcnNXaXRoVHlwZTogZnVuY3Rpb24odHJhY2UsIHRyYWNlRnJvbUFwcHJvdmVDb3VudGVycykge1xuICAgIHZhciBhcHByb3ZlcywgY291bnRlcnMsIGlzRXhwYW5kQXBwcm92ZSwgdHJhY2VNYXhBcHByb3ZlQ291bnQ7XG4gICAgY291bnRlcnMgPSB7fTtcbiAgICBhcHByb3ZlcyA9IHRyYWNlLmFwcHJvdmVzO1xuICAgIGlmICghYXBwcm92ZXMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cmFjZU1heEFwcHJvdmVDb3VudCA9IEZsb3d2ZXJzaW9uQVBJLnRyYWNlTWF4QXBwcm92ZUNvdW50O1xuICAgIGlzRXhwYW5kQXBwcm92ZSA9IEZsb3d2ZXJzaW9uQVBJLmlzRXhwYW5kQXBwcm92ZTtcbiAgICBhcHByb3Zlcy5mb3JFYWNoKGZ1bmN0aW9uKHRvQXBwcm92ZSkge1xuICAgICAgdmFyIHRvQXBwcm92ZUZyb21JZCwgdG9BcHByb3ZlSGFuZGxlck5hbWUsIHRvQXBwcm92ZVR5cGU7XG4gICAgICB0b0FwcHJvdmVUeXBlID0gdG9BcHByb3ZlLnR5cGU7XG4gICAgICB0b0FwcHJvdmVGcm9tSWQgPSB0b0FwcHJvdmUuZnJvbV9hcHByb3ZlX2lkO1xuICAgICAgdG9BcHByb3ZlSGFuZGxlck5hbWUgPSB0b0FwcHJvdmUuaGFuZGxlcl9uYW1lO1xuICAgICAgaWYgKCF0b0FwcHJvdmVGcm9tSWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFwcHJvdmVzLmZvckVhY2goZnVuY3Rpb24oZnJvbUFwcHJvdmUpIHtcbiAgICAgICAgdmFyIGNvdW50ZXIsIGNvdW50ZXIyLCBjb3VudGVyQ29udGVudCwgcmVmO1xuICAgICAgICBpZiAoZnJvbUFwcHJvdmUuX2lkID09PSB0b0FwcHJvdmVGcm9tSWQpIHtcbiAgICAgICAgICBjb3VudGVyID0gY291bnRlcnNbdG9BcHByb3ZlRnJvbUlkXTtcbiAgICAgICAgICBpZiAoIWNvdW50ZXIpIHtcbiAgICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyc1t0b0FwcHJvdmVGcm9tSWRdID0ge307XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghY291bnRlclt0b0FwcHJvdmUudHlwZV0pIHtcbiAgICAgICAgICAgIGNvdW50ZXJbdG9BcHByb3ZlLnR5cGVdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvdW50ZXIyID0gY291bnRlclt0b0FwcHJvdmUudHlwZV07XG4gICAgICAgICAgaWYgKChyZWYgPSB0cmFjZUZyb21BcHByb3ZlQ291bnRlcnNbdG9BcHByb3ZlLl9pZF0pICE9IG51bGwgPyByZWZbdG9BcHByb3ZlVHlwZV0gOiB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBjb3VudGVyMi5wdXNoKHtcbiAgICAgICAgICAgICAgZnJvbV90eXBlOiBmcm9tQXBwcm92ZS50eXBlLFxuICAgICAgICAgICAgICBmcm9tX2FwcHJvdmVfaGFuZGxlcl9uYW1lOiBmcm9tQXBwcm92ZS5oYW5kbGVyX25hbWUsXG4gICAgICAgICAgICAgIHRvX2FwcHJvdmVfaWQ6IHRvQXBwcm92ZS5faWQsXG4gICAgICAgICAgICAgIHRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lOiB0b0FwcHJvdmUuaGFuZGxlcl9uYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY291bnRlckNvbnRlbnQgPSBpc0V4cGFuZEFwcHJvdmUgPyBudWxsIDogY291bnRlcjIuZmluZFByb3BlcnR5QnlQSyhcImlzX3RvdGFsXCIsIHRydWUpO1xuICAgICAgICAgICAgaWYgKGNvdW50ZXJDb250ZW50KSB7XG4gICAgICAgICAgICAgIGNvdW50ZXJDb250ZW50LmNvdW50Kys7XG4gICAgICAgICAgICAgIGlmICghKGNvdW50ZXJDb250ZW50LmNvdW50ID4gdHJhY2VNYXhBcHByb3ZlQ291bnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXJDb250ZW50LnRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lcy5wdXNoKHRvQXBwcm92ZS5oYW5kbGVyX25hbWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gY291bnRlcjIucHVzaCh7XG4gICAgICAgICAgICAgICAgZnJvbV90eXBlOiBmcm9tQXBwcm92ZS50eXBlLFxuICAgICAgICAgICAgICAgIGZyb21fYXBwcm92ZV9oYW5kbGVyX25hbWU6IGZyb21BcHByb3ZlLmhhbmRsZXJfbmFtZSxcbiAgICAgICAgICAgICAgICB0b19hcHByb3ZlX2lkOiB0b0FwcHJvdmUuX2lkLFxuICAgICAgICAgICAgICAgIGNvdW50OiAxLFxuICAgICAgICAgICAgICAgIHRvX2FwcHJvdmVfaGFuZGxlcl9uYW1lczogW3RvQXBwcm92ZS5oYW5kbGVyX25hbWVdLFxuICAgICAgICAgICAgICAgIGlzX3RvdGFsOiB0cnVlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvdW50ZXJzO1xuICB9LFxuICBwdXNoQXBwcm92ZXNXaXRoVHlwZUdyYXBoU3ludGF4OiBmdW5jdGlvbihub2RlcywgdHJhY2UpIHtcbiAgICB2YXIgYXBwcm92ZXMsIGN1cnJlbnRUcmFjZU5hbWUsIGV4dHJhSGFuZGxlck5hbWVzQ291bnRlciwgZnJvbUFwcHJvdmUsIGZyb21BcHByb3ZlSWQsIHJlc3VsdHMsIHNwbGl0SW5kZXgsIHRlbXBIYW5kbGVyTmFtZXMsIHRvQXBwcm92ZUlkLCB0b0FwcHJvdmVUeXBlLCB0b0FwcHJvdmVzLCB0cmFjZUNvdW50ZXJzLCB0cmFjZUZyb21BcHByb3ZlQ291bnRlcnMsIHRyYWNlTWF4QXBwcm92ZUNvdW50O1xuICAgIHRyYWNlRnJvbUFwcHJvdmVDb3VudGVycyA9IEZsb3d2ZXJzaW9uQVBJLmdldFRyYWNlRnJvbUFwcHJvdmVDb3VudGVyc1dpdGhUeXBlKHRyYWNlKTtcbiAgICB0cmFjZUNvdW50ZXJzID0gRmxvd3ZlcnNpb25BUEkuZ2V0VHJhY2VDb3VudGVyc1dpdGhUeXBlKHRyYWNlLCB0cmFjZUZyb21BcHByb3ZlQ291bnRlcnMpO1xuICAgIGlmICghdHJhY2VDb3VudGVycykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBleHRyYUhhbmRsZXJOYW1lc0NvdW50ZXIgPSB7fTtcbiAgICB0cmFjZU1heEFwcHJvdmVDb3VudCA9IEZsb3d2ZXJzaW9uQVBJLnRyYWNlTWF4QXBwcm92ZUNvdW50O1xuICAgIHNwbGl0SW5kZXggPSBGbG93dmVyc2lvbkFQSS50cmFjZVNwbGl0QXBwcm92ZXNJbmRleDtcbiAgICBjdXJyZW50VHJhY2VOYW1lID0gdHJhY2UubmFtZTtcbiAgICBmb3IgKGZyb21BcHByb3ZlSWQgaW4gdHJhY2VDb3VudGVycykge1xuICAgICAgZnJvbUFwcHJvdmUgPSB0cmFjZUNvdW50ZXJzW2Zyb21BcHByb3ZlSWRdO1xuICAgICAgZm9yICh0b0FwcHJvdmVUeXBlIGluIGZyb21BcHByb3ZlKSB7XG4gICAgICAgIHRvQXBwcm92ZXMgPSBmcm9tQXBwcm92ZVt0b0FwcHJvdmVUeXBlXTtcbiAgICAgICAgdG9BcHByb3Zlcy5mb3JFYWNoKGZ1bmN0aW9uKHRvQXBwcm92ZSkge1xuICAgICAgICAgIHZhciBleHRyYUNvdW50LCBpc1R5cGVOb2RlLCBzdHJUb0hhbmRsZXJOYW1lcywgdG9IYW5kbGVyTmFtZXMsIHRyYWNlTmFtZSwgdHlwZU5hbWU7XG4gICAgICAgICAgdHlwZU5hbWUgPSBcIlwiO1xuICAgICAgICAgIHN3aXRjaCAodG9BcHByb3ZlVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnY2MnOlxuICAgICAgICAgICAgICB0eXBlTmFtZSA9IFwi5Lyg6ZiFXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZm9yd2FyZCc6XG4gICAgICAgICAgICAgIHR5cGVOYW1lID0gXCLovazlj5FcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkaXN0cmlidXRlJzpcbiAgICAgICAgICAgICAgdHlwZU5hbWUgPSBcIuWIhuWPkVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1R5cGVOb2RlID0gW1wiY2NcIiwgXCJmb3J3YXJkXCIsIFwiZGlzdHJpYnV0ZVwiXS5pbmRleE9mKHRvQXBwcm92ZS5mcm9tX3R5cGUpID49IDA7XG4gICAgICAgICAgaWYgKGlzVHlwZU5vZGUpIHtcbiAgICAgICAgICAgIHRyYWNlTmFtZSA9IHRvQXBwcm92ZS5mcm9tX2FwcHJvdmVfaGFuZGxlcl9uYW1lO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZU5hbWUoY3VycmVudFRyYWNlTmFtZSwgdG9BcHByb3ZlLmZyb21fYXBwcm92ZV9oYW5kbGVyX25hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodG9BcHByb3ZlLmlzX3RvdGFsKSB7XG4gICAgICAgICAgICB0b0hhbmRsZXJOYW1lcyA9IHRvQXBwcm92ZS50b19hcHByb3ZlX2hhbmRsZXJfbmFtZXM7XG4gICAgICAgICAgICBpZiAoc3BsaXRJbmRleCAmJiB0b0FwcHJvdmUuY291bnQgPiBzcGxpdEluZGV4KSB7XG4gICAgICAgICAgICAgIHRvSGFuZGxlck5hbWVzLnNwbGljZShzcGxpdEluZGV4LCAwLCBcIjxici8+LFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0clRvSGFuZGxlck5hbWVzID0gdG9IYW5kbGVyTmFtZXMuam9pbihcIixcIikucmVwbGFjZShcIiwsXCIsIFwiXCIpO1xuICAgICAgICAgICAgZXh0cmFDb3VudCA9IHRvQXBwcm92ZS5jb3VudCAtIHRyYWNlTWF4QXBwcm92ZUNvdW50O1xuICAgICAgICAgICAgaWYgKGV4dHJhQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAgIHN0clRvSGFuZGxlck5hbWVzICs9IFwi562JXCIgKyB0b0FwcHJvdmUuY291bnQgKyBcIuS6ulwiO1xuICAgICAgICAgICAgICBpZiAoIWV4dHJhSGFuZGxlck5hbWVzQ291bnRlcltmcm9tQXBwcm92ZUlkXSkge1xuICAgICAgICAgICAgICAgIGV4dHJhSGFuZGxlck5hbWVzQ291bnRlcltmcm9tQXBwcm92ZUlkXSA9IHt9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGV4dHJhSGFuZGxlck5hbWVzQ291bnRlcltmcm9tQXBwcm92ZUlkXVt0b0FwcHJvdmVUeXBlXSA9IHRvQXBwcm92ZS50b19hcHByb3ZlX2lkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJUb0hhbmRsZXJOYW1lcyA9IHRvQXBwcm92ZS50b19hcHByb3ZlX2hhbmRsZXJfbmFtZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzVHlwZU5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBub2Rlcy5wdXNoKFwiXHRcIiArIGZyb21BcHByb3ZlSWQgKyBcIj5cXFwiXCIgKyB0cmFjZU5hbWUgKyBcIlxcXCJdLS1cIiArIHR5cGVOYW1lICsgXCItLT5cIiArIHRvQXBwcm92ZS50b19hcHByb3ZlX2lkICsgXCI+XFxcIlwiICsgc3RyVG9IYW5kbGVyTmFtZXMgKyBcIlxcXCJdXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZXMucHVzaChcIlx0XCIgKyBmcm9tQXBwcm92ZUlkICsgXCIoXFxcIlwiICsgdHJhY2VOYW1lICsgXCJcXFwiKS0tXCIgKyB0eXBlTmFtZSArIFwiLS0+XCIgKyB0b0FwcHJvdmUudG9fYXBwcm92ZV9pZCArIFwiPlxcXCJcIiArIHN0clRvSGFuZGxlck5hbWVzICsgXCJcXFwiXVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBhcHByb3ZlcyA9IHRyYWNlLmFwcHJvdmVzO1xuICAgIGlmICghXy5pc0VtcHR5KGV4dHJhSGFuZGxlck5hbWVzQ291bnRlcikpIHtcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoZnJvbUFwcHJvdmVJZCBpbiBleHRyYUhhbmRsZXJOYW1lc0NvdW50ZXIpIHtcbiAgICAgICAgZnJvbUFwcHJvdmUgPSBleHRyYUhhbmRsZXJOYW1lc0NvdW50ZXJbZnJvbUFwcHJvdmVJZF07XG4gICAgICAgIHJlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdHMxO1xuICAgICAgICAgIHJlc3VsdHMxID0gW107XG4gICAgICAgICAgZm9yICh0b0FwcHJvdmVUeXBlIGluIGZyb21BcHByb3ZlKSB7XG4gICAgICAgICAgICB0b0FwcHJvdmVJZCA9IGZyb21BcHByb3ZlW3RvQXBwcm92ZVR5cGVdO1xuICAgICAgICAgICAgdGVtcEhhbmRsZXJOYW1lcyA9IFtdO1xuICAgICAgICAgICAgYXBwcm92ZXMuZm9yRWFjaChmdW5jdGlvbihhcHByb3ZlKSB7XG4gICAgICAgICAgICAgIHZhciByZWY7XG4gICAgICAgICAgICAgIGlmIChmcm9tQXBwcm92ZUlkID09PSBhcHByb3ZlLmZyb21fYXBwcm92ZV9pZCkge1xuICAgICAgICAgICAgICAgIGlmICghKChyZWYgPSB0cmFjZUZyb21BcHByb3ZlQ291bnRlcnNbYXBwcm92ZS5faWRdKSAhPSBudWxsID8gcmVmW3RvQXBwcm92ZVR5cGVdIDogdm9pZCAwKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBIYW5kbGVyTmFtZXMucHVzaChhcHByb3ZlLmhhbmRsZXJfbmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc3VsdHMxLnB1c2gobm9kZXMucHVzaChcIlx0Y2xpY2sgXCIgKyB0b0FwcHJvdmVJZCArIFwiIGNhbGxiYWNrIFxcXCJcIiArICh0ZW1wSGFuZGxlck5hbWVzLmpvaW4oXCIsXCIpKSArIFwiXFxcIlwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHRzMTtcbiAgICAgICAgfSkoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gIH0sXG4gIGdlbmVyYXRlVHJhY2VzR3JhcGhTeW50YXg6IGZ1bmN0aW9uKHRyYWNlcywgaXNDb252ZXJ0VG9TdHJpbmcpIHtcbiAgICB2YXIgZ3JhcGhTeW50YXgsIGxhc3RBcHByb3ZlcywgbGFzdFRyYWNlLCBub2RlcztcbiAgICBub2RlcyA9IFtcImdyYXBoIFREXCJdO1xuICAgIGxhc3RUcmFjZSA9IG51bGw7XG4gICAgbGFzdEFwcHJvdmVzID0gW107XG4gICAgdHJhY2VzLmZvckVhY2goZnVuY3Rpb24odHJhY2UpIHtcbiAgICAgIHZhciBjdXJyZW50VHJhY2VOYW1lLCBsaW5lcztcbiAgICAgIGxpbmVzID0gdHJhY2UucHJldmlvdXNfdHJhY2VfaWRzO1xuICAgICAgY3VycmVudFRyYWNlTmFtZSA9IHRyYWNlLm5hbWU7XG4gICAgICBpZiAobGluZXMgIT0gbnVsbCA/IGxpbmVzLmxlbmd0aCA6IHZvaWQgMCkge1xuICAgICAgICBsaW5lcy5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICB2YXIgY3VycmVudEZyb21UcmFjZU5hbWUsIGZyb21BcHByb3ZlcywgZnJvbVRyYWNlLCB0b0FwcHJvdmVzO1xuICAgICAgICAgIGZyb21UcmFjZSA9IHRyYWNlcy5maW5kUHJvcGVydHlCeVBLKFwiX2lkXCIsIGxpbmUpO1xuICAgICAgICAgIGN1cnJlbnRGcm9tVHJhY2VOYW1lID0gZnJvbVRyYWNlLm5hbWU7XG4gICAgICAgICAgZnJvbUFwcHJvdmVzID0gZnJvbVRyYWNlLmFwcHJvdmVzO1xuICAgICAgICAgIHRvQXBwcm92ZXMgPSB0cmFjZS5hcHByb3ZlcztcbiAgICAgICAgICBsYXN0VHJhY2UgPSB0cmFjZTtcbiAgICAgICAgICBsYXN0QXBwcm92ZXMgPSB0b0FwcHJvdmVzO1xuICAgICAgICAgIHJldHVybiBmcm9tQXBwcm92ZXMuZm9yRWFjaChmdW5jdGlvbihmcm9tQXBwcm92ZSkge1xuICAgICAgICAgICAgdmFyIGZyb21BcHByb3ZlSGFuZGxlck5hbWUsIGZyb21UcmFjZU5hbWUsIGp1ZGdlVGV4dCwgdG9UcmFjZU5hbWU7XG4gICAgICAgICAgICBmcm9tQXBwcm92ZUhhbmRsZXJOYW1lID0gZnJvbUFwcHJvdmUuaGFuZGxlcl9uYW1lO1xuICAgICAgICAgICAgaWYgKHRvQXBwcm92ZXMgIT0gbnVsbCA/IHRvQXBwcm92ZXMubGVuZ3RoIDogdm9pZCAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0b0FwcHJvdmVzLmZvckVhY2goZnVuY3Rpb24odG9BcHByb3ZlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZyb21UcmFjZU5hbWUsIGp1ZGdlVGV4dCwgdG9UcmFjZU5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKFtcImNjXCIsIFwiZm9yd2FyZFwiLCBcImRpc3RyaWJ1dGVcIl0uaW5kZXhPZih0b0FwcHJvdmUudHlwZSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoW1wiY2NcIiwgXCJmb3J3YXJkXCIsIFwiZGlzdHJpYnV0ZVwiXS5pbmRleE9mKGZyb21BcHByb3ZlLnR5cGUpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBmcm9tVHJhY2VOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0VHJhY2VOYW1lKGN1cnJlbnRGcm9tVHJhY2VOYW1lLCBmcm9tQXBwcm92ZUhhbmRsZXJOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdG9UcmFjZU5hbWUgPSBGbG93dmVyc2lvbkFQSS5nZXRUcmFjZU5hbWUoY3VycmVudFRyYWNlTmFtZSwgdG9BcHByb3ZlLmhhbmRsZXJfbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGp1ZGdlVGV4dCA9IEZsb3d2ZXJzaW9uQVBJLmdldEFwcHJvdmVKdWRnZVRleHQoZnJvbUFwcHJvdmUuanVkZ2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoanVkZ2VUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzLnB1c2goXCJcdFwiICsgZnJvbUFwcHJvdmUuX2lkICsgXCIoXFxcIlwiICsgZnJvbVRyYWNlTmFtZSArIFwiXFxcIiktLVwiICsganVkZ2VUZXh0ICsgXCItLT5cIiArIHRvQXBwcm92ZS5faWQgKyBcIihcXFwiXCIgKyB0b1RyYWNlTmFtZSArIFwiXFxcIilcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVzLnB1c2goXCJcdFwiICsgZnJvbUFwcHJvdmUuX2lkICsgXCIoXFxcIlwiICsgZnJvbVRyYWNlTmFtZSArIFwiXFxcIiktLT5cIiArIHRvQXBwcm92ZS5faWQgKyBcIihcXFwiXCIgKyB0b1RyYWNlTmFtZSArIFwiXFxcIilcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKFtcImNjXCIsIFwiZm9yd2FyZFwiLCBcImRpc3RyaWJ1dGVcIl0uaW5kZXhPZihmcm9tQXBwcm92ZS50eXBlKSA8IDApIHtcbiAgICAgICAgICAgICAgICBmcm9tVHJhY2VOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0VHJhY2VOYW1lKGN1cnJlbnRGcm9tVHJhY2VOYW1lLCBmcm9tQXBwcm92ZUhhbmRsZXJOYW1lKTtcbiAgICAgICAgICAgICAgICB0b1RyYWNlTmFtZSA9IEZsb3d2ZXJzaW9uQVBJLnJlcGxhY2VFcnJvclN5bWJvbChjdXJyZW50VHJhY2VOYW1lKTtcbiAgICAgICAgICAgICAgICBqdWRnZVRleHQgPSBGbG93dmVyc2lvbkFQSS5nZXRBcHByb3ZlSnVkZ2VUZXh0KGZyb21BcHByb3ZlLmp1ZGdlKTtcbiAgICAgICAgICAgICAgICBpZiAoanVkZ2VUZXh0KSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXMucHVzaChcIlx0XCIgKyBmcm9tQXBwcm92ZS5faWQgKyBcIihcXFwiXCIgKyBmcm9tVHJhY2VOYW1lICsgXCJcXFwiKS0tXCIgKyBqdWRnZVRleHQgKyBcIi0tPlwiICsgdHJhY2UuX2lkICsgXCIoXFxcIlwiICsgdG9UcmFjZU5hbWUgKyBcIlxcXCIpXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZXMucHVzaChcIlx0XCIgKyBmcm9tQXBwcm92ZS5faWQgKyBcIihcXFwiXCIgKyBmcm9tVHJhY2VOYW1lICsgXCJcXFwiKS0tPlwiICsgdHJhY2UuX2lkICsgXCIoXFxcIlwiICsgdG9UcmFjZU5hbWUgKyBcIlxcXCIpXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyYWNlLmFwcHJvdmVzLmZvckVhY2goZnVuY3Rpb24oYXBwcm92ZSkge1xuICAgICAgICAgIHZhciB0cmFjZU5hbWU7XG4gICAgICAgICAgdHJhY2VOYW1lID0gRmxvd3ZlcnNpb25BUEkuZ2V0VHJhY2VOYW1lKGN1cnJlbnRUcmFjZU5hbWUsIGFwcHJvdmUuaGFuZGxlcl9uYW1lKTtcbiAgICAgICAgICByZXR1cm4gbm9kZXMucHVzaChcIlx0XCIgKyBhcHByb3ZlLl9pZCArIFwiKFxcXCJcIiArIHRyYWNlTmFtZSArIFwiXFxcIilcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIEZsb3d2ZXJzaW9uQVBJLnB1c2hBcHByb3Zlc1dpdGhUeXBlR3JhcGhTeW50YXgobm9kZXMsIHRyYWNlKTtcbiAgICB9KTtcbiAgICBpZiAobGFzdEFwcHJvdmVzICE9IG51bGwpIHtcbiAgICAgIGxhc3RBcHByb3Zlcy5mb3JFYWNoKGZ1bmN0aW9uKGxhc3RBcHByb3ZlKSB7XG4gICAgICAgIHJldHVybiBub2Rlcy5wdXNoKFwiXHRjbGFzcyBcIiArIGxhc3RBcHByb3ZlLl9pZCArIFwiIGN1cnJlbnQtc3RlcC1ub2RlO1wiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXNDb252ZXJ0VG9TdHJpbmcpIHtcbiAgICAgIGdyYXBoU3ludGF4ID0gbm9kZXMuam9pbihcIlxcblwiKTtcbiAgICAgIHJldHVybiBncmFwaFN5bnRheDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5vZGVzO1xuICAgIH1cbiAgfSxcbiAgc2VuZEh0bWxSZXNwb25zZTogZnVuY3Rpb24ocmVxLCByZXMsIHR5cGUpIHtcbiAgICB2YXIgY3VycmVudFN0ZXBJZCwgZXJyb3JfbXNnLCBmbG93dmVyc2lvbiwgZ3JhcGhTeW50YXgsIGluc3RhbmNlLCBpbnN0YW5jZV9pZCwgcXVlcnksIHJlZiwgcmVmMSwgc3RlcHMsIHRpdGxlLCB0cmFjZXM7XG4gICAgcXVlcnkgPSByZXEucXVlcnk7XG4gICAgaW5zdGFuY2VfaWQgPSBxdWVyeS5pbnN0YW5jZV9pZDtcbiAgICBpZiAoIWluc3RhbmNlX2lkKSB7XG4gICAgICBGbG93dmVyc2lvbkFQSS5zZW5kSW52YWxpZFVSTFJlc3BvbnNlKHJlcyk7XG4gICAgfVxuICAgIHRpdGxlID0gcXVlcnkudGl0bGU7XG4gICAgaWYgKHRpdGxlKSB7XG4gICAgICB0aXRsZSA9IGRlY29kZVVSSUNvbXBvbmVudChkZWNvZGVVUklDb21wb25lbnQodGl0bGUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGl0bGUgPSBcIldvcmtmbG93IENoYXJ0XCI7XG4gICAgfVxuICAgIGVycm9yX21zZyA9IFwiXCI7XG4gICAgZ3JhcGhTeW50YXggPSBcIlwiO1xuICAgIEZsb3d2ZXJzaW9uQVBJLmlzRXhwYW5kQXBwcm92ZSA9IGZhbHNlO1xuICAgIGlmICh0eXBlID09PSBcInRyYWNlc19leHBhbmRcIikge1xuICAgICAgdHlwZSA9IFwidHJhY2VzXCI7XG4gICAgICBGbG93dmVyc2lvbkFQSS5pc0V4cGFuZEFwcHJvdmUgPSB0cnVlO1xuICAgIH1cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3RyYWNlcyc6XG4gICAgICAgIGluc3RhbmNlID0gZGIuaW5zdGFuY2VzLmZpbmRPbmUoaW5zdGFuY2VfaWQsIHtcbiAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgIHRyYWNlczogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICAgIHRyYWNlcyA9IGluc3RhbmNlLnRyYWNlcztcbiAgICAgICAgICBpZiAodHJhY2VzICE9IG51bGwgPyB0cmFjZXMubGVuZ3RoIDogdm9pZCAwKSB7XG4gICAgICAgICAgICBncmFwaFN5bnRheCA9IHRoaXMuZ2VuZXJhdGVUcmFjZXNHcmFwaFN5bnRheCh0cmFjZXMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnJvcl9tc2cgPSBcIuayoeacieaJvuWIsOW9k+WJjeeUs+ivt+WNleeahOa1geeoi+atpemqpOaVsOaNrlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlcnJvcl9tc2cgPSBcIuW9k+WJjeeUs+ivt+WNleS4jeWtmOWcqOaIluW3suiiq+WIoOmZpFwiO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaW5zdGFuY2UgPSBkYi5pbnN0YW5jZXMuZmluZE9uZShpbnN0YW5jZV9pZCwge1xuICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgZmxvd192ZXJzaW9uOiAxLFxuICAgICAgICAgICAgZmxvdzogMSxcbiAgICAgICAgICAgIHRyYWNlczoge1xuICAgICAgICAgICAgICAkc2xpY2U6IC0xXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGluc3RhbmNlKSB7XG4gICAgICAgICAgY3VycmVudFN0ZXBJZCA9IChyZWYgPSBpbnN0YW5jZS50cmFjZXMpICE9IG51bGwgPyAocmVmMSA9IHJlZlswXSkgIT0gbnVsbCA/IHJlZjEuc3RlcCA6IHZvaWQgMCA6IHZvaWQgMDtcbiAgICAgICAgICBmbG93dmVyc2lvbiA9IFdvcmtmbG93TWFuYWdlci5nZXRJbnN0YW5jZUZsb3dWZXJzaW9uKGluc3RhbmNlKTtcbiAgICAgICAgICBzdGVwcyA9IGZsb3d2ZXJzaW9uICE9IG51bGwgPyBmbG93dmVyc2lvbi5zdGVwcyA6IHZvaWQgMDtcbiAgICAgICAgICBpZiAoc3RlcHMgIT0gbnVsbCA/IHN0ZXBzLmxlbmd0aCA6IHZvaWQgMCkge1xuICAgICAgICAgICAgZ3JhcGhTeW50YXggPSB0aGlzLmdlbmVyYXRlU3RlcHNHcmFwaFN5bnRheChzdGVwcywgY3VycmVudFN0ZXBJZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yX21zZyA9IFwi5rKh5pyJ5om+5Yiw5b2T5YmN55Sz6K+35Y2V55qE5rWB56iL5q2l6aqk5pWw5o2uXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVycm9yX21zZyA9IFwi5b2T5YmN55Sz6K+35Y2V5LiN5a2Y5Zyo5oiW5bey6KKr5Yig6ZmkXCI7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLndyaXRlUmVzcG9uc2UocmVzLCAyMDAsIFwiPCFET0NUWVBFIGh0bWw+XFxuPGh0bWw+XFxuXHQ8aGVhZD5cXG5cdFx0PG1ldGEgY2hhcnNldD1cXFwidXRmLThcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJ2aWV3cG9ydFxcXCIgY29udGVudD1cXFwid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSx1c2VyLXNjYWxhYmxlPXllc1xcXCI+XFxuXHRcdDx0aXRsZT5cIiArIHRpdGxlICsgXCI8L3RpdGxlPlxcblx0XHQ8bGluayByZWw9XFxcImljb25cXFwiIHR5cGU9XFxcImltYWdlL3BuZ1xcXCIgc2l6ZXM9XFxcIjE5MngxOTJcXFwiIGhyZWY9XFxcIi9mYXZpY29ucy9hbmRyb2lkLWNocm9tZS0xOTJ4MTkyLnBuZ1xcXCI+XFxuXHRcdDxsaW5rIHJlbD1cXFwibWFuaWZlc3RcXFwiIGhyZWY9XFxcIi9mYXZpY29ucy9tYW5pZmVzdC5qc29uXFxcIj5cXG5cdFx0PG1ldGEgbmFtZT1cXFwibW9iaWxlLXdlYi1hcHAtY2FwYWJsZVxcXCIgY29udGVudD1cXFwieWVzXFxcIj5cXG5cdFx0PG1ldGEgbmFtZT1cXFwidGhlbWUtY29sb3JcXFwiIGNvbnRlbnQ9XFxcIiMwMDBcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJhcHBsaWNhdGlvbi1uYW1lXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJhcHBsZS10b3VjaC1pY29uXFxcIiBzaXplcz1cXFwiNTd4NTdcXFwiIGhyZWY9XFxcIlwiICsgKHRoaXMuZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi01N3g1Ny5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCI2MHg2MFxcXCIgaHJlZj1cXFwiXCIgKyAodGhpcy5nZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9hcHBsZS10b3VjaC1pY29uLTYweDYwLnBuZ1wiKSkgKyBcIlxcXCI+XFxuXHRcdDxsaW5rIHJlbD1cXFwiYXBwbGUtdG91Y2gtaWNvblxcXCIgc2l6ZXM9XFxcIjcyeDcyXFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tNzJ4NzIucG5nXCIpKSArIFwiXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJhcHBsZS10b3VjaC1pY29uXFxcIiBzaXplcz1cXFwiNzZ4NzZcXFwiIGhyZWY9XFxcIlwiICsgKHRoaXMuZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvYXBwbGUtdG91Y2gtaWNvbi03Nng3Ni5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCIxMTR4MTE0XFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTE0eDExNC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCIxMjB4MTIwXFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTIweDEyMC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCIxNDR4MTQ0XFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTQ0eDE0NC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCIxNTJ4MTUyXFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTUyeDE1Mi5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImFwcGxlLXRvdWNoLWljb25cXFwiIHNpemVzPVxcXCIxODB4MTgwXFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2FwcGxlLXRvdWNoLWljb24tMTgweDE4MC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJhcHBsZS1tb2JpbGUtd2ViLWFwcC1jYXBhYmxlXFxcIiBjb250ZW50PVxcXCJ5ZXNcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJhcHBsZS1tb2JpbGUtd2ViLWFwcC1zdGF0dXMtYmFyLXN0eWxlXFxcIiBjb250ZW50PVxcXCJibGFjay10cmFuc2x1Y2VudFxcXCI+XFxuXHRcdDxtZXRhIG5hbWU9XFxcImFwcGxlLW1vYmlsZS13ZWItYXBwLXRpdGxlXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJpY29uXFxcIiB0eXBlPVxcXCJpbWFnZS9wbmdcXFwiIHNpemVzPVxcXCIyMjh4MjI4XFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2NvYXN0LTIyOHgyMjgucG5nXCIpKSArIFwiXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJpY29uXFxcIiB0eXBlPVxcXCJpbWFnZS9wbmdcXFwiIHNpemVzPVxcXCIxNngxNlxcXCIgaHJlZj1cXFwiXCIgKyAodGhpcy5nZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9mYXZpY29uLTE2eDE2LnBuZ1wiKSkgKyBcIlxcXCI+XFxuXHRcdDxsaW5rIHJlbD1cXFwiaWNvblxcXCIgdHlwZT1cXFwiaW1hZ2UvcG5nXFxcIiBzaXplcz1cXFwiMzJ4MzJcXFwiIGhyZWY9XFxcIlwiICsgKHRoaXMuZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvZmF2aWNvbi0zMngzMi5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcImljb25cXFwiIHR5cGU9XFxcImltYWdlL3BuZ1xcXCIgc2l6ZXM9XFxcIjk2eDk2XFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2Zhdmljb24tOTZ4OTYucG5nXCIpKSArIFwiXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJpY29uXFxcIiB0eXBlPVxcXCJpbWFnZS9wbmdcXFwiIHNpemVzPVxcXCIyMzB4MjMwXFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL2Zhdmljb24tMjMweDIzMC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcInNob3J0Y3V0IGljb25cXFwiIGhyZWY9XFxcIlwiICsgKHRoaXMuZ2V0QWJzb2x1dGVVcmwoXCIvZmF2aWNvbnMvZmF2aWNvbi5pY29cIikpICsgXCJcXFwiPlxcblx0XHQ8bGluayByZWw9XFxcInlhbmRleC10YWJsZWF1LXdpZGdldFxcXCIgaHJlZj1cXFwiXCIgKyAodGhpcy5nZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy95YW5kZXgtYnJvd3Nlci1tYW5pZmVzdC5qc29uXCIpKSArIFwiXFxcIj5cXG5cdFx0PG1ldGEgbmFtZT1cXFwibXNhcHBsaWNhdGlvbi1UaWxlQ29sb3JcXFwiIGNvbnRlbnQ9XFxcIiNmZmZcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJtc2FwcGxpY2F0aW9uLVRpbGVJbWFnZVxcXCIgY29udGVudD1cXFwiXCIgKyAodGhpcy5nZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9tc3RpbGUtMTQ0eDE0NC5wbmdcIikpICsgXCJcXFwiPlxcblx0XHQ8bWV0YSBuYW1lPVxcXCJtc2FwcGxpY2F0aW9uLWNvbmZpZ1xcXCIgY29udGVudD1cXFwiXCIgKyAodGhpcy5nZXRBYnNvbHV0ZVVybChcIi9mYXZpY29ucy9icm93c2VyY29uZmlnLnhtbFwiKSkgKyBcIlxcXCI+XFxuXHRcdDxtZXRhIHByb3BlcnR5PVxcXCJ0d2l0dGVyOmltYWdlXFxcIiBjb250ZW50PVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL3R3aXR0ZXIucG5nXCIpKSArIFwiXFxcIj5cXG5cdFx0PG1ldGEgcHJvcGVydHk9XFxcIm9nOmltYWdlXFxcIiBjb250ZW50PVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2Zhdmljb25zL29wZW4tZ3JhcGgucG5nXCIpKSArIFwiXFxcIj5cXG5cdFx0PGxpbmsgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIiBocmVmPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL3BhY2thZ2VzL3N0ZWVkb3Nfd29ya2Zsb3ctY2hhcnQvYXNzZXRzL21lcm1haWQvZGlzdC9tZXJtYWlkLmNzc1wiKSkgKyBcIlxcXCIvPlxcblx0XHQ8c2NyaXB0IHR5cGU9XFxcInRleHQvamF2YXNjcmlwdFxcXCIgc3JjPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL2xpYi9qcXVlcnkvanF1ZXJ5LTEuMTEuMi5taW4uanNcIikpICsgXCJcXFwiPjwvc2NyaXB0Plxcblx0XHQ8c2NyaXB0IHR5cGU9XFxcInRleHQvamF2YXNjcmlwdFxcXCIgc3JjPVxcXCJcIiArICh0aGlzLmdldEFic29sdXRlVXJsKFwiL3BhY2thZ2VzL3N0ZWVkb3Nfd29ya2Zsb3ctY2hhcnQvYXNzZXRzL21lcm1haWQvZGlzdC9tZXJtYWlkLm1pbi5qc1wiKSkgKyBcIlxcXCI+PC9zY3JpcHQ+XFxuXHRcdDxzdHlsZT5cXG5cdFx0XHRib2R5IHsgXFxuXHRcdFx0XHRmb250LWZhbWlseTogJ1NvdXJjZSBTYW5zIFBybycsICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7XFxuXHRcdFx0XHR0ZXh0LWFsaWduOiBjZW50ZXI7XFxuXHRcdFx0XHRiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcblx0XHRcdH1cXG5cdFx0XHQubG9hZGluZ3tcXG5cdFx0XHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG5cdFx0XHRcdGxlZnQ6IDBweDtcXG5cdFx0XHRcdHJpZ2h0OiAwcHg7XFxuXHRcdFx0XHR0b3A6IDUwJTtcXG5cdFx0XHRcdHotaW5kZXg6IDExMDA7XFxuXHRcdFx0XHR0ZXh0LWFsaWduOiBjZW50ZXI7XFxuXHRcdFx0XHRtYXJnaW4tdG9wOiAtMzBweDtcXG5cdFx0XHRcdGZvbnQtc2l6ZTogMzZweDtcXG5cdFx0XHRcdGNvbG9yOiAjZGZkZmRmO1xcblx0XHRcdH1cXG5cdFx0XHQuZXJyb3ItbXNne1xcblx0XHRcdFx0cG9zaXRpb246IGFic29sdXRlO1xcblx0XHRcdFx0bGVmdDogMHB4O1xcblx0XHRcdFx0cmlnaHQ6IDBweDtcXG5cdFx0XHRcdGJvdHRvbTogMjBweDtcXG5cdFx0XHRcdHotaW5kZXg6IDExMDA7XFxuXHRcdFx0XHR0ZXh0LWFsaWduOiBjZW50ZXI7XFxuXHRcdFx0XHRmb250LXNpemU6IDIwcHg7XFxuXHRcdFx0XHRjb2xvcjogI2E5NDQ0MjtcXG5cdFx0XHR9XFxuXHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlIHJlY3R7XFxuXHRcdFx0XHRmaWxsOiAjY2NjY2ZmO1xcblx0XHRcdFx0c3Ryb2tlOiByZ2IoMTQ0LCAxNDQsIDI1NSk7XFxuICAgIFx0XHRcdFx0XHRcdHN0cm9rZS13aWR0aDogMnB4O1xcblx0XHRcdH1cXG5cdFx0XHQjZmxvdy1zdGVwcy1zdmcgLm5vZGUuY3VycmVudC1zdGVwLW5vZGUgcmVjdHtcXG5cdFx0XHRcdGZpbGw6ICNjZGU0OTg7XFxuXHRcdFx0XHRzdHJva2U6ICMxMzU0MGM7XFxuXHRcdFx0XHRzdHJva2Utd2lkdGg6IDJweDtcXG5cdFx0XHR9XFxuXHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlLmNvbmRpdGlvbiByZWN0e1xcblx0XHRcdFx0ZmlsbDogI2VjZWNmZjtcXG5cdFx0XHRcdHN0cm9rZTogcmdiKDIwNCwgMjA0LCAyNTUpO1xcbiAgICBcdFx0XHRcdFx0XHRzdHJva2Utd2lkdGg6IDFweDtcXG5cdFx0XHR9XFxuXHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlIC50cmFjZS1oYW5kbGVyLW5hbWV7XFxuXHRcdFx0XHRjb2xvcjogIzc3NztcXG5cdFx0XHR9XFxuXHRcdFx0I2Zsb3ctc3RlcHMtc3ZnIC5ub2RlIC5zdGVwLWhhbmRsZXItbmFtZXtcXG5cdFx0XHRcdGNvbG9yOiAjNzc3O1xcblx0XHRcdH1cXG5cdFx0XHRkaXYubWVybWFpZFRvb2x0aXB7XFxuXHRcdFx0XHRwb3NpdGlvbjogZml4ZWQhaW1wb3J0YW50O1xcblx0XHRcdFx0dGV4dC1hbGlnbjogbGVmdCFpbXBvcnRhbnQ7XFxuXHRcdFx0XHRwYWRkaW5nOiA0cHghaW1wb3J0YW50O1xcblx0XHRcdFx0Zm9udC1zaXplOiAxNHB4IWltcG9ydGFudDtcXG5cdFx0XHRcdG1heC13aWR0aDogNTAwcHghaW1wb3J0YW50O1xcblx0XHRcdFx0bGVmdDogYXV0byFpbXBvcnRhbnQ7XFxuXHRcdFx0XHR0b3A6IDE1cHghaW1wb3J0YW50O1xcblx0XHRcdFx0cmlnaHQ6IDE1cHg7XFxuXHRcdFx0fVxcblx0XHRcdC5idG4tem9vbXtcXG5cdFx0XHRcdGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcXG5cdFx0XHRcdGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XFxuXHRcdFx0XHRkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuXHRcdFx0XHRwYWRkaW5nOiAycHggMTBweDtcXG5cdFx0XHRcdGZvbnQtc2l6ZTogMjZweDtcXG5cdFx0XHRcdGJvcmRlci1yYWRpdXM6IDIwcHg7XFxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAjZWVlO1xcblx0XHRcdFx0Y29sb3I6ICM3Nzc7XFxuXHRcdFx0XHRwb3NpdGlvbjogZml4ZWQ7XFxuXHRcdFx0XHRib3R0b206IDE1cHg7XFxuXHRcdFx0XHRvdXRsaW5lOiBub25lO1xcblx0XHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xcblx0XHRcdFx0ei1pbmRleDogOTk5OTk7XFxuXHRcdFx0XHQtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xcblx0XHRcdFx0LW1vei11c2VyLXNlbGVjdDogbm9uZTtcXG5cdFx0XHRcdC1tcy11c2VyLXNlbGVjdDogbm9uZTtcXG5cdFx0XHRcdHVzZXItc2VsZWN0OiBub25lO1xcblx0XHRcdFx0bGluZS1oZWlnaHQ6IDEuMjtcXG5cdFx0XHR9XFxuXHRcdFx0QG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XFxuXHRcdFx0XHQuYnRuLXpvb217XFxuXHRcdFx0XHRcdGRpc3BsYXk6bm9uZTtcXG5cdFx0XHRcdH1cXG5cdFx0XHR9XFxuXHRcdFx0LmJ0bi16b29tOmhvdmVye1xcblx0XHRcdFx0YmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjIpO1xcblx0XHRcdH1cXG5cdFx0XHQuYnRuLXpvb20tdXB7XFxuXHRcdFx0XHRsZWZ0OiAxNXB4O1xcblx0XHRcdH1cXG5cdFx0XHQuYnRuLXpvb20tZG93bntcXG5cdFx0XHRcdGxlZnQ6IDYwcHg7XFxuXHRcdFx0XHRwYWRkaW5nOiAxcHggMTNweCAzcHggMTNweDtcXG5cdFx0XHR9XFxuXHRcdDwvc3R5bGU+XFxuXHQ8L2hlYWQ+XFxuXHQ8Ym9keT5cXG5cdFx0PGRpdiBjbGFzcyA9IFxcXCJsb2FkaW5nXFxcIj5Mb2FkaW5nLi4uPC9kaXY+XFxuXHRcdDxkaXYgY2xhc3MgPSBcXFwiZXJyb3ItbXNnXFxcIj5cIiArIGVycm9yX21zZyArIFwiPC9kaXY+XFxuXHRcdDxkaXYgY2xhc3M9XFxcIm1lcm1haWRcXFwiPjwvZGl2Plxcblx0XHQ8c2NyaXB0IHR5cGU9XFxcInRleHQvamF2YXNjcmlwdFxcXCI+XFxuXHRcdFx0bWVybWFpZC5pbml0aWFsaXplKHtcXG5cdFx0XHRcdHN0YXJ0T25Mb2FkOmZhbHNlXFxuXHRcdFx0fSk7XFxuXHRcdFx0JChmdW5jdGlvbigpe1xcblx0XHRcdFx0dmFyIGdyYXBoTm9kZXMgPSBcIiArIChKU09OLnN0cmluZ2lmeShncmFwaFN5bnRheCkpICsgXCI7XFxuXHRcdFx0XHQvL+aWueS+v+WJjemdouWPr+S7pemAmui/h+iwg+eUqG1lcm1haWQuY3VycmVudE5vZGVz6LCD5byP77yM54m55oSP5aKe5YqgY3VycmVudE5vZGVz5bGe5oCn44CCXFxuXHRcdFx0XHRtZXJtYWlkLmN1cnJlbnROb2RlcyA9IGdyYXBoTm9kZXM7XFxuXHRcdFx0XHR2YXIgZ3JhcGhTeW50YXggPSBncmFwaE5vZGVzLmpvaW4oXFxcIlxcXFxuXFxcIik7XFxuXHRcdFx0XHRjb25zb2xlLmxvZyhncmFwaE5vZGVzKTtcXG5cdFx0XHRcdGNvbnNvbGUubG9nKGdyYXBoU3ludGF4KTtcXG5cdFx0XHRcdGNvbnNvbGUubG9nKFxcXCJZb3UgY2FuIGFjY2VzcyB0aGUgZ3JhcGggbm9kZXMgYnkgJ21lcm1haWQuY3VycmVudE5vZGVzJyBpbiB0aGUgY29uc29sZSBvZiBicm93c2VyLlxcXCIpO1xcblx0XHRcdFx0JChcXFwiLmxvYWRpbmdcXFwiKS5yZW1vdmUoKTtcXG5cXG5cdFx0XHRcdHZhciBpZCA9IFxcXCJmbG93LXN0ZXBzLXN2Z1xcXCI7XFxuXHRcdFx0XHR2YXIgZWxlbWVudCA9ICQoJy5tZXJtYWlkJyk7XFxuXHRcdFx0XHR2YXIgaW5zZXJ0U3ZnID0gZnVuY3Rpb24oc3ZnQ29kZSwgYmluZEZ1bmN0aW9ucykge1xcblx0XHRcdFx0XHRlbGVtZW50Lmh0bWwoc3ZnQ29kZSk7XFxuXHRcdFx0XHRcdGlmKHR5cGVvZiBjYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcpe1xcblx0XHRcdFx0XHRcdGNhbGxiYWNrKGlkKTtcXG5cdFx0XHRcdFx0fVxcblx0XHRcdFx0XHRiaW5kRnVuY3Rpb25zKGVsZW1lbnRbMF0pO1xcblx0XHRcdFx0fTtcXG5cdFx0XHRcdG1lcm1haWQucmVuZGVyKGlkLCBncmFwaFN5bnRheCwgaW5zZXJ0U3ZnLCBlbGVtZW50WzBdKTtcXG5cXG5cdFx0XHRcdHZhciB6b29tU1ZHID0gZnVuY3Rpb24oem9vbSl7XFxuXHRcdFx0XHRcdHZhciBjdXJyZW50V2lkdGggPSAkKFxcXCJzdmdcXFwiKS53aWR0aCgpO1xcblx0XHRcdFx0XHR2YXIgbmV3V2lkdGggPSBjdXJyZW50V2lkdGggKiB6b29tO1xcblx0XHRcdFx0XHQkKFxcXCJzdmdcXFwiKS5jc3MoXFxcIm1heFdpZHRoXFxcIixuZXdXaWR0aCArIFxcXCJweFxcXCIpLndpZHRoKG5ld1dpZHRoKTtcXG5cdFx0XHRcdH1cXG5cXG5cdFx0XHRcdC8v5pSv5oyB6byg5qCH5rua6L2u57yp5pS+55S75biDXFxuXHRcdFx0XHQkKHdpbmRvdykub24oXFxcIm1vdXNld2hlZWxcXFwiLGZ1bmN0aW9uKGV2ZW50KXtcXG5cdFx0XHRcdFx0aWYoZXZlbnQuY3RybEtleSl7XFxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcXG5cdFx0XHRcdFx0XHR2YXIgem9vbSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA+IDAgPyAxLjEgOiAwLjk7XFxuXHRcdFx0XHRcdFx0em9vbVNWRyh6b29tKTtcXG5cdFx0XHRcdFx0fVxcblx0XHRcdFx0fSk7XFxuXHRcdFx0XHQkKFxcXCIuYnRuLXpvb21cXFwiKS5vbihcXFwiY2xpY2tcXFwiLGZ1bmN0aW9uKCl7XFxuXHRcdFx0XHRcdHpvb21TVkcoJCh0aGlzKS5hdHRyKFxcXCJ6b29tXFxcIikpO1xcblx0XHRcdFx0fSk7XFxuXHRcdFx0fSk7XFxuXHRcdDwvc2NyaXB0Plxcblx0XHQ8YSBjbGFzcz1cXFwiYnRuLXpvb20gYnRuLXpvb20tdXBcXFwiIHpvb209MS4xIHRpdGxlPVxcXCLngrnlh7vmlL7lpKdcXFwiPis8L2E+XFxuXHRcdDxhIGNsYXNzPVxcXCJidG4tem9vbSBidG4tem9vbS1kb3duXFxcIiB6b29tPTAuOSB0aXRsZT1cXFwi54K55Ye757yp5bCPXFxcIj4tPC9hPlxcblx0PC9ib2R5PlxcbjwvaHRtbD5cIik7XG4gIH1cbn07XG5cbkpzb25Sb3V0ZXMuYWRkKCdnZXQnLCAnL2FwaS93b3JrZmxvdy9jaGFydD9pbnN0YW5jZV9pZD06aW5zdGFuY2VfaWQnLCBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICByZXR1cm4gRmxvd3ZlcnNpb25BUEkuc2VuZEh0bWxSZXNwb25zZShyZXEsIHJlcyk7XG59KTtcblxuSnNvblJvdXRlcy5hZGQoJ2dldCcsICcvYXBpL3dvcmtmbG93L2NoYXJ0L3RyYWNlcz9pbnN0YW5jZV9pZD06aW5zdGFuY2VfaWQnLCBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICByZXR1cm4gRmxvd3ZlcnNpb25BUEkuc2VuZEh0bWxSZXNwb25zZShyZXEsIHJlcywgXCJ0cmFjZXNcIik7XG59KTtcblxuSnNvblJvdXRlcy5hZGQoJ2dldCcsICcvYXBpL3dvcmtmbG93L2NoYXJ0L3RyYWNlc19leHBhbmQ/aW5zdGFuY2VfaWQ9Omluc3RhbmNlX2lkJywgZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcbiAgcmV0dXJuIEZsb3d2ZXJzaW9uQVBJLnNlbmRIdG1sUmVzcG9uc2UocmVxLCByZXMsIFwidHJhY2VzX2V4cGFuZFwiKTtcbn0pO1xuIl19
