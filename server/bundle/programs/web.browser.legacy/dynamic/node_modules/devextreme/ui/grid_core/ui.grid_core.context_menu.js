function(e,t,n){"use strict";var o,r=m(e("../../core/renderer")),i=e("../../core/utils/dom"),a=e("../../core/utils/common"),u=e("../../core/utils/iterator"),c,s=m(e("./ui.grid_core.modules")),l,d=m(e("../context_menu"));function m(e){return e&&e.__esModule?e:{default:e}}var f="dx-context-menu",g={columnHeadersView:"header",rowsView:"content",footerView:"footer",headerPanel:"headerPanel"},x=["columnHeadersView","rowsView","footerView","headerPanel"],w=s.default.ViewController.inherit({init:function(){this.createAction("onContextMenuPreparing")},getContextMenuItems:function(e){if(!e)return!1;var t,n,o,a,c,s,l,d,m,f=this,w=(0,r.default)(e.target);return(0,u.each)(x,function(){if(t=f.getView(this),(s=t&&t.element())&&(s.is(w)||s.find(w).length)&&(d=w.closest(".dx-row > td"),l=d.parent(),o=t.getRowIndex(l),a=d[0]&&d[0].cellIndex,c=l.data("options"),(n={event:e,targetElement:(0,i.getPublicElement)(w),target:g[this],rowIndex:o,row:t._getRows()[o],columnIndex:a,column:c&&c.cells[a].column}).items=t.getContextMenuItems&&t.getContextMenuItems(n),f.executeAction("onContextMenuPreparing",n),f._contextMenuPrepared(n),m=n.items))return!1}),m},_contextMenuPrepared:a.noop}),C=s.default.View.inherit({_renderCore:function(){var e=this,t=e.element().addClass(f);this.setAria("role","presentation",t),this._createComponent(t,d.default,{onPositioning:function(t){var n=t.event,o=t.component,r=e.getController("contextMenu").getContextMenuItems(n);r?(o.option("items",r),n.stopPropagation()):t.cancel=!0},onItemClick:function(e){e.itemData.onItemClick&&e.itemData.onItemClick(e)},cssClass:e.getWidgetContainerClass(),target:e.component.$element()})}});n.exports={defaultOptions:function(){return{onContextMenuPreparing:null}},controllers:{contextMenu:w},views:{contextMenuView:C}}}

