function(e,t,n){var o;o=function(e){"use strict";function t(e){e.state.markedSelection&&e.operation(function(){a(e)})}function n(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation(function(){f(e)})}e.defineOption("styleSelectedText",!1,function(o,i,r){var l=r&&r!=e.Init;i&&!l?(o.state.markedSelection=[],o.state.markedSelectionStyle="string"==typeof i?i:"CodeMirror-selectedtext",c(o),o.on("cursorActivity",t),o.on("change",n)):!i&&l&&(o.off("cursorActivity",t),o.off("change",n),f(o),o.state.markedSelection=o.state.markedSelectionStyle=null)});var o=8,i=e.Pos,r=e.cmpPos;function l(e,t,n,l){if(0!=r(t,n))for(var f=e.state.markedSelection,c=e.state.markedSelectionStyle,a=t.line;;){var s=a==t.line?t:i(a,0),d=a+o,m=d>=n.line,u=m?n:i(d,0),S=e.markText(s,u,{className:c});if(null==l?f.push(S):f.splice(l++,0,S),m)break;a=d}}function f(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function c(e){f(e);for(var t=e.listSelections(),n=0;n<t.length;n++)l(e,t[n].from(),t[n].to())}function a(e){if(!e.somethingSelected())return f(e);if(e.listSelections().length>1)return c(e);var t=e.getCursor("start"),n=e.getCursor("end"),i=e.state.markedSelection;if(!i.length)return l(e,t,n);var a=i[0].find(),s=i[i.length-1].find();if(!a||!s||n.line-t.line<=o||r(t,s.to)>=0||r(n,a.from)<=0)return c(e);for(;r(t,a.from)>0;)i.shift().clear(),a=i[0].find();for(r(t,a.from)<0&&(a.to.line-t.line<o?(i.shift().clear(),l(e,t,a.to,0)):l(e,t,a.from,0));r(n,s.to)<0;)i.pop().clear(),s=i[i.length-1].find();r(n,s.to)>0&&(n.line-s.from.line<o?(i.pop().clear(),l(e,s.from,n)):l(e,s.to,n))}},"object"==typeof t&&"object"==typeof n?o(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],o):o(CodeMirror)}

