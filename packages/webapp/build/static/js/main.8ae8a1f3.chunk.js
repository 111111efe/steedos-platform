(this["webpackJsonp@steedos/webapp"]=this["webpackJsonp@steedos/webapp"]||[]).push([[0],{132:function(e){e.exports=JSON.parse('{"accounts.signin":"Sign In","accounts.signup":"Sign Up","accounts.submit":"Submit","accounts.username":"Username","accounts.forget_password":"Forget Password","accounts.reset_password":"Reset Password","accounts.goHome":"Go Home","accounts.emailVerifiedSuccess":"Your email has been verified","accounts.emailSent":"Email sent","accounts.passwordResetSuccessfully":"Your password has been reset successfully","accounts.incorrectPassword":"Incorrect password","accounts.unrecognizedOptionsForLogin":"Unrecognized options for login request","accounts.matchFailed":"Match failed","accounts.invalidUsername":"Invalid username","accounts.invalidEmail":"Invalid email","accounts.invalidMobile":"Invalid Mobile","accounts.invalidPassword":"Invalid password","accounts.invalidNewPassword":"Invalid new password","accounts.invalidToken":"Invalid token","accounts.invalidCode":"Invalid code","accounts.verifyEmailLinkExpired":"Verify email link expired","accounts.resetPasswordLinkExpired":"Reset password link expired","accounts.usernameAlreadyExists":"Username already exists","accounts.emailAlreadyExists":"Email already exists","accounts.mobileAlreadyExists":"Mobile already exists","accounts.usernameOrEmailRequired":"Mobile or Username or Email is required","accounts.emailRequired":"Email is required","accounts.mobileRequired":"Mobile is required","accounts.spaceUnExists":"Invalid Tenant Id","accounts.create_tenant":"Create Tenant","accounts.tenant_name":"Tenant Name","accounts.name":"Fullname","accounts.email":"Email","accounts.password":"Password","accounts.logout":"Logout","accounts.home":"Home","accounts.welcome":"Welcome","accounts.invalid_credentials":"Invalid username or password","accounts.update_password":"Change Password","accounts.oldPassword":"Old Password","accounts.newPassword":"New Password","accounts.confirmPassword":"Confirm Password","accounts.oldAndNewPasswordNotEQ":"Old and new passwords cannot be the same","accounts.passwordNotEQ":"Passwords are inconsistent","accounts.passwordRegError":"Password must contain characters, numbers and letters, and at least one capital letter, and no less than 8 digits","accounts.passwordExpired":"Password has expired, please change the password","accounts.access_denied":"You don\'t have permission","accounts.updatePassword_invalid_credentials":"Invalid old password","accounts.nameRequired":"Name is required","accounts.usernameRequired":"Username is required","accounts.passwordRequired":"Password is required","accounts.tenantNameRequired":"Tenant name is requiredd","accounts.verify":"Verify","accounts.verify_email":"Verify Email","accounts.verify_mobile":"Verify Mobile","accounts.verifyCode":"Verify code","accounts.next":"Next","accounts.reSendCode":"Resend code","accounts.goBack":"Back","accounts.unenableRegister":"This company is set to prohibit the registration of new accounts, please contact the company administrator.","accounts.userNotFound":"Account information not found","accounts.noPasswordSet":"Account has no password","accounts.noEmailSet":"Account has no email","accounts.loginCode":"Login with Verify code","accounts.loginCode.email":"Email","accounts.signupCode.email":"Email","accounts.loginCode.email_or_mobile":"Mobile or Email","accounts.signupCode.email_or_mobile":"Mobile or Email","accounts.set_fullname":"Fullname is required","accounts.mobile":"Mobile","accounts.signupCode.mobile":"Mobile","accounts.title.login":"Sign In","accounts.title.signup":"Sign Up","accounts.title.createTenant":"Create Tenant","accounts.title.resetPassword":"Login with Verify code","accounts.title.updatePassword":"Change Password","accounts.title.verifyEmail":"Verify Email","accounts.title.setName":"Set Fullname","accounts.title.chooseTenant":"Choose Tenant","accounts.title.verifyMobile":"Bind Mobile","accounts.title.verify":"Verify","accounts.emailHelp":"Mail service is not configured\uff0c<email_help>View help</email_help>","accounts.mobileHelp":"SMS service is not configured\uff0c<mobile_help>View help</mobile_help>","accounts.emailHelp_mobileHelp":"Mail service is not configured\uff0c<email_help>View help</email_help>; SMS service is not configured\uff0c<mobile_help>View help</mobile_help>.","accounts.codeRequired":"Verify code is required","accounts.codeExpired":"Verify code is expired","accounts.loginWithCode":"Login with Verify code","accounts.loginWithPassword":"Login with password","accounts.goIn":"Go In","accounts.verifyEmail":"Verify Email","accounts.verifyMobile":"Verify Mobile","accounts.verify.info":"A 6-digit code was sent to {name}, enter it within 10 minutes. Didn\'t get it? Try resending the code.","accounts.disablePasswordLogin":"Login with password is disabled, please contact the administrator","accounts.disableUnverifiedMobilePasswordLogin":"Your mobile is not verified, please login with the verify code","accounts.disableUnverifiedEmailPasswordLogin":"Your email is not verified, please login with the verify code","accounts.invalidRequest":"Invalid request","accounts.serverError":"Server error","accounts.tooManyFailures":"Too many failures, please try again in 10 minutes."}')},246:function(e){e.exports=JSON.parse('{"accounts.signin":"\u767b\u5f55","accounts.signup":"\u521b\u5efa\u8d26\u6237","accounts.no_account":"\u6ca1\u6709\u8d26\u6237\uff1f","accounts.has_account":"\u5df2\u6709\u8d26\u6237\uff1f","accounts.submit":"\u63d0\u4ea4","accounts.forget_password":"\u5fd8\u8bb0\u5bc6\u7801","accounts.reset_password":"\u91cd\u7f6e\u5bc6\u7801","accounts.username":"\u7528\u6237\u540d","accounts.create_tenant":"\u521b\u5efa\u65b0\u56e2\u961f","accounts.no_tenant":"\u60a8\u4e0d\u5c5e\u4e8e\u4efb\u4f55\u56e2\u961f","accounts.create_tenant_description":"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u56e2\u961f\uff0c\u5e76\u9080\u8bf7\u540c\u4e8b\u52a0\u5165\u3002\u60a8\u5c06\u6210\u4e3a\u65b0\u56e2\u961f\u7684\u7ba1\u7406\u5458\u3002","accounts.tenant_name":"\u56e2\u961f\u540d\u79f0","accounts.name":"\u59d3\u540d","accounts.name_placeholder":"\u60a8\u7684\u59d3\u540d","accounts.email":"\u90ae\u7bb1","accounts.email_placeholder":"\u60a8\u7684\u90ae\u7bb1","accounts.mobile":"\u624b\u673a\u53f7","accounts.mobile_placeholder":"\u60a8\u7684\u624b\u673a\u53f7\u7801","accounts.email_mobile":"\u624b\u673a\u6216\u90ae\u7bb1","accounts.email_mobile_username":"\u624b\u673a\u3001\u90ae\u7bb1\u6216\u7528\u6237\u540d","accounts.password":"\u5bc6\u7801","accounts.password_placeholder":"\u5bc6\u7801","accounts.password_create":"\u8bbe\u7f6e\u60a8\u7684\u8d26\u6237\u5bc6\u7801","accounts.switch_email":"\u6539\u4e3a\u4f7f\u7528\u7535\u5b50\u90ae\u4ef6","accounts.switch_mobile":"\u6539\u4e3a\u4f7f\u7528\u624b\u673a\u53f7\u7801","accounts.switch_code":"\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.switch_password":"\u4f7f\u7528\u5bc6\u7801\u767b\u5f55","accounts.select_space":"\u9009\u62e9\u4f01\u4e1a","accounts.title.password":"\u8f93\u5165\u5bc6\u7801","accounts.title.setPassword":"\u8bbe\u7f6e\u5bc6\u7801","accounts.logout":"\u6ce8\u9500","accounts.title.signup":"\u521b\u5efa\u8d26\u6237","accounts.title.createTenant":"\u521b\u5efa\u4f01\u4e1a","accounts.title.resetPassword":"\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.title.updatePassword":"\u4fee\u6539\u5bc6\u7801","accounts.title.verifyEmail":"\u9a8c\u8bc1\u90ae\u7bb1","accounts.title.setName":"\u586b\u5199\u59d3\u540d","accounts.title.chooseTenant":"\u9009\u62e9\u4f01\u4e1a","accounts.title.verifyMobile":"\u7ed1\u5b9a\u624b\u673a\u53f7","accounts.title.verify":"\u9a8c\u8bc1\u7801","accounts.home":"\u9996\u9875","accounts.welcome":"\u6b22\u8fce\u60a8","accounts.invalid_credentials":"\u8d26\u53f7\u6216\u5bc6\u7801\u9519\u3002","accounts.update_password":"\u4fee\u6539\u5bc6\u7801","accounts.oldPassword":"\u65e7\u5bc6\u7801","accounts.newPassword":"\u65b0\u5bc6\u7801","accounts.confirmPassword":"\u786e\u8ba4\u5bc6\u7801","accounts.oldAndNewPasswordNotEQ":"\u65b0\u65e7\u5bc6\u7801\u4e0d\u80fd\u76f8\u540c","accounts.passwordNotEQ":"\u5bc6\u7801\u4e0d\u4e00\u81f4","accounts.passwordRegError":"\u5bc6\u7801\u5fc5\u987b\u5305\u542b\u5b57\u7b26\u3001\u6570\u5b57\u548c\u5b57\u6bcd\uff0c\u5e76\u81f3\u5c11\u6709\u4e00\u4e2a\u5927\u5199\u5b57\u6bcd\uff0c\u4e14\u4e0d\u80fd\u5c11\u4e8e8\u4f4d","accounts.passwordExpired":"\u5bc6\u7801\u5df2\u8fc7\u671f\uff0c\u8bf7\u4fee\u6539\u5bc6\u7801","accounts.access_denied":"\u60a8\u65e0\u6743\u6267\u884c\u6b64\u64cd\u4f5c\u3002","accounts.updatePassword_invalid_credentials":"\u65e7\u5bc6\u7801\u9519\u8bef","accounts.goHome":"\u8fd4\u56de\u9996\u9875","accounts.emailVerifiedSuccess":"\u60a8\u7684\u90ae\u4ef6\u5df2\u88ab\u9a8c\u8bc1","accounts.emailSent":"\u90ae\u4ef6\u5df2\u53d1\u9001","accounts.passwordResetSuccessfully":"\u60a8\u7684\u5bc6\u7801\u5df2\u88ab\u91cd\u7f6e\u6210\u529f","accounts.incorrectPassword":"\u5bc6\u7801\u9519\u8bef","accounts.unrecognizedOptionsForLogin":"\u65e0\u6cd5\u8bc6\u522b\u7684\u767b\u5f55\u8bf7\u6c42\u9009\u9879","accounts.matchFailed":"\u5339\u914d\u5931\u8d25","accounts.invalidUsername":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7528\u6237\u540d","accounts.invalidEmail":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740","accounts.invalidMobile":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a","accounts.invalidEmailMobile":"\u8bf7\u8f93\u5165\u6709\u6548\u7684\u624b\u673a\u6216\u90ae\u7bb1","accounts.invalidPassword":"\u65e0\u6548\u7684\u5bc6\u7801","accounts.invalidNewPassword":"\u65e0\u6548\u7684\u65b0\u5bc6\u7801","accounts.invalidToken":"\u65e0\u6548\u7684token","accounts.invalidCode":"\u65e0\u6548\u7684\u9a8c\u8bc1\u7801","accounts.verifyEmailLinkExpired":"\u8be5\u90ae\u7bb1\u9a8c\u8bc1\u94fe\u63a5\u5df2\u5931\u6548","accounts.resetPasswordLinkExpired":"\u8be5\u91cd\u7f6e\u5bc6\u7801\u94fe\u63a5\u5df2\u5931\u6548","accounts.usernameAlreadyExists":"\u8be5\u7528\u6237\u540d\u5df2\u88ab\u6ce8\u518c\u4f7f\u7528","accounts.emailAlreadyExists":"\u8be5\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c\u4f7f\u7528","accounts.mobileAlreadyExists":"\u8be5\u624b\u673a\u53f7\u5df2\u88ab\u6ce8\u518c\u4f7f\u7528","accounts.usernameOrEmailRequired":"\u8bf7\u586b\u5199\u624b\u673a\u53f7\u6216\u90ae\u7bb1","accounts.mobileOrEmailRequired":"\u8bf7\u586b\u5199\u624b\u673a\u53f7\u6216\u90ae\u7bb1","accounts.nameRequired":"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a","accounts.emailRequired":"\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a","accounts.mobileRequired":"\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a","accounts.usernameRequired":"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a","accounts.passwordRequired":"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a","accounts.tenantNameRequired":"\u4f01\u4e1a\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a","accounts.verify":"\u9a8c\u8bc1","accounts.verify_email":"\u9a8c\u8bc1\u90ae\u4ef6","accounts.verify_mobile":"\u9a8c\u8bc1\u624b\u673a\u53f7","accounts.verifyCode":"\u9a8c\u8bc1\u7801","accounts.next":"\u4e0b\u4e00\u6b65","accounts.sendCode":"\u83b7\u53d6\u9a8c\u8bc1\u7801","accounts.reSendCode":"\u91cd\u65b0\u83b7\u53d6","accounts.goBack":"\u8fd4\u56de","accounts.unenableRegister":"\u6b64\u516c\u53f8\u88ab\u8bbe\u7f6e\u4e3a\u7981\u6b62\u6ce8\u518c\u65b0\u8d26\u6237\uff0c\u8bf7\u8054\u7cfb\u516c\u53f8\u7ba1\u7406\u5458\u3002","accounts.userNotFound":"\u672a\u627e\u5230\u8d26\u6237\u4fe1\u606f","accounts.noPasswordSet":"\u8d26\u6237\u672a\u8bbe\u7f6e\u5bc6\u7801","accounts.noEmailSet":"\u8d26\u6237\u672a\u8bbe\u7f6e\u90ae\u7bb1","accounts.loginCode":"\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.signupCode.email":"\u90ae\u7bb1","accounts.signupCode.email_or_mobile":"\u624b\u673a\u6216\u90ae\u7bb1","accounts.set_fullname":"\u8bf7\u586b\u5199\u59d3\u540d","accounts.spaceUnExists":"\u65e0\u6548\u7684\u4f01\u4e1a\u6807\u8bc6","accounts.signupCode.mobile":"\u624b\u673a\u53f7","accounts.emailHelp":"\u90ae\u4ef6\u670d\u52a1\u672a\u914d\u7f6e\uff0c<email_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</email_help>","accounts.mobileHelp":"\u77ed\u4fe1\u670d\u52a1\u672a\u914d\u7f6e\uff0c<mobile_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</mobile_help>","accounts.emailHelp_mobileHelp":"\u90ae\u4ef6\u670d\u52a1\u672a\u914d\u7f6e\uff0c<email_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</email_help>\uff1b\u77ed\u4fe1\u670d\u52a1\u672a\u914d\u7f6e\uff0c<mobile_help>\u70b9\u51fb\u67e5\u770b\u5e2e\u52a9</mobile_help>","accounts.codeRequired":"\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a","accounts.codeExpired":"\u9a8c\u8bc1\u7801\u5df2\u5931\u6548","accounts.loginWithCode":"\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.loginWithPassword":"\u4f7f\u7528\u5bc6\u7801\u767b\u5f55","accounts.goIn":"\u8fdb\u5165","accounts.verifyEmail":"\u9a8c\u8bc1\u90ae\u7bb1","accounts.verifyMobile":"\u9a8c\u8bc1\u624b\u673a\u53f7","accounts.verify.info":"\u8bf7\u8f93\u5165\u53d1\u9001\u81f3 {name} \u7684 6 \u4f4d\u6570\u5b57\u9a8c\u8bc1\u7801\uff0c\u6709\u6548\u671f10\u5206\u949f\u3002","accounts.disablePasswordLogin":"\u5df2\u7981\u6b62\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458","accounts.disableUnverifiedMobilePasswordLogin":"\u4f60\u7684\u624b\u673a\u53f7\u672a\u9a8c\u8bc1\uff0c\u8bf7\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.disableUnverifiedEmailPasswordLogin":"\u4f60\u7684\u90ae\u7bb1\u672a\u9a8c\u8bc1\uff0c\u8bf7\u4f7f\u7528\u9a8c\u8bc1\u7801\u767b\u5f55","accounts.invalidRequest":"\u65e0\u6548\u7684\u8bf7\u6c42","accounts.serverError":"\u670d\u52a1\u5f02\u5e38","accounts.tooManyFailures":"\u9a8c\u8bc1\u6b21\u6570\u8fc7\u591a\uff0c\u8bf710\u5206\u949f\u540e\u518d\u8bd5!","accounts.invalidVerifyCode":"\u9a8c\u8bc1\u7801\u65e0\u6548"}')},260:function(e,t,a){e.exports=a(500)},497:function(e,t){},500:function(e,t,a){"use strict";a.r(t);a(175),a(187),a(188),a(189),a(190),a(191),a(192),a(193),a(194),a(195),a(196),a(197),a(198),a(199),a(200),a(261),a(262),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(204),a(270),a(271),a(118),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(280),a(281),a(282),a(283),a(284),a(285),a(286),a(288),a(289),a(291),a(292),a(214),a(215),a(293),a(294),a(295),a(296),a(297),a(298),a(299),a(300),a(302),a(303),a(304),a(305),a(306),a(307),a(308),a(309),a(219),a(310),a(311),a(312),a(314),a(315),a(316),a(317),a(318),a(319),a(321),a(323),a(325),a(326),a(327),a(328),a(329),a(330),a(331),a(332),a(333),a(334),a(335),a(336),a(337),a(338),a(339),a(340),a(341),a(342),a(343),a(162),a(345),a(346),a(349),a(350),a(351),a(353),a(354),a(355),a(356),a(357),a(358),a(359),a(360),a(361),a(362),a(363),a(229),a(364),a(365),a(231),a(366),a(367),a(368),a(369),a(127),a(370),a(371),a(372),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(390),a(391),a(392),a(393),a(394),a(395),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(431),a(432),a(239),a(433),a(434),a(435),a(437),a(241),a(438);var n=a(0),r=a.n(n),s=a(54),o=a.n(s),c=a(34),i=a(16),l=a(18),u=a(19),d=a(20),m=a(90),p=a(12),f=a(33),h=a(62),g=a(17);function b(e){return Object(c.a)({},e.settings)}function E(e){var t=Object.assign({},e.settings.tenant);return t.name||(t.name="Steedos"),t}function v(e){return e.requests}function y(e){if(e.settings&&e.settings.tenant)return e.settings.tenant._id}var w=a(3),S=a.n(w),_=a(5),C=a(45),O=Object(C.b)(),x="BATCHING_REDUCER.BATCH";function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;return{type:t,meta:{batch:!0},payload:e}}function k(e){if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=a);return t}var R=k({CREATE_USER_REQUEST:null,CREATE_USER_SUCCESS:null,CREATE_USER_FAILURE:null,LOGIN_REQUEST:null,LOGIN_SUCCESS:null,LOGIN_FAILURE:null,LOGOUT_REQUEST:null,LOGOUT_SUCCESS:null,LOGOUT_FAILURE:null,REVOKE_ALL_USER_SESSIONS_SUCCESS:null,REVOKE_SESSIONS_FOR_ALL_USERS_SUCCESS:null,UPDATE_ME_REQUEST:null,UPDATE_ME_SUCCESS:null,UPDATE_ME_FAILURE:null,RECEIVED_ME:null,RECEIVED_PROFILE:null,RECEIVED_PROFILES:null,RECEIVED_PROFILES_LIST:null,RECEIVED_PROFILE_IN_TEAM:null,RECEIVED_PROFILE_NOT_IN_TEAM:null,RECEIVED_PROFILE_WITHOUT_TEAM:null,RECEIVED_SESSIONS:null,RECEIVED_REVOKED_SESSION:null,RESET_LOGOUT_STATE:null,RECEIVED_MY_USER_ACCESS_TOKEN:null,RECEIVED_MY_USER_ACCESS_TOKENS:null,CLEAR_MY_USER_ACCESS_TOKENS:null,REVOKED_USER_ACCESS_TOKEN:null,DISABLED_USER_ACCESS_TOKEN:null,ENABLED_USER_ACCESS_TOKEN:null,LOGIN:null,VERIFICATION_TOKEN_RECIEVED:null}),N=k({GET_SPACES_REQUEST:null,GET_SPACES_SUCCESS:null,GET_SPACES_FAILURE:null,MY_SPACES_REQUEST:null,MY_SPACES_SUCCESS:null,MY_SPACES_FAILURE:null,CREATE_SPACE_REQUEST:null,CREATE_SPACE_SUCCESS:null,CREATE_SPACE_FAILURE:null,JOIN_SPACE_REQUEST:null,JOIN_SPACE_SUCCESS:null,JOIN_SPACE_FAILURE:null,CREATED_SPACE:null,SELECT_SPACE:null,UPDATED_SPACE:null,RECEIVED_SPACE:null,RECEIVED_SPACES_LIST:null}),j=(k({DISMISS_ERROR:null,LOG_ERROR:null,CLEAR_ERRORS:null,RESTORE_ERRORS:null}),k({RECEIVED_SETTINGS:null,RECEIVED_APP_STATE:null,RECEIVED_APP_CREDENTIALS:null,REMOVED_APP_CREDENTIALS:null,RECEIVED_APP_DEVICE_TOKEN:null,PING_RESET:null,RECEIVED_SERVER_VERSION:null,CLIENT_CONFIG_RECEIVED:null,CLIENT_CONFIG_RESET:null,CLIENT_LICENSE_RECEIVED:null,CLIENT_LICENSE_RESET:null,RECEIVED_DATA_RETENTION_POLICY:null,LOG_CLIENT_ERROR_REQUEST:null,LOG_CLIENT_ERROR_SUCCESS:null,LOG_CLIENT_ERROR_FAILURE:null,SUPPORTED_TIMEZONES_REQUEST:null,SUPPORTED_TIMEZONES_SUCCESS:null,SUPPORTED_TIMEZONES_FAILURE:null,SUPPORTED_TIMEZONES_RECEIVED:null,WEBSOCKET_REQUEST:null,WEBSOCKET_SUCCESS:null,WEBSOCKET_FAILURE:null,WEBSOCKET_CLOSED:null,REDIRECT_LOCATION_SUCCESS:null,REDIRECT_LOCATION_FAILURE:null,SET_CONFIG_AND_LICENSE:null,WARN_METRICS_STATUS_RECEIVED:null,WARN_METRIC_STATUS_RECEIVED:null,WARN_METRIC_STATUS_REMOVED:null})),T=a(134),U=a(141),P=a(55),A=a(63),L={},M={},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{headers:{}};if(e=e||t.url,"GET"===t.method||!t.method){var a=M[e],n=L["".concat(e).concat(a)];return a&&(t.headers["If-None-Match"]=a),fetch(e,t).then((function(t){if(304===t.status)return n.clone();if(200===t.status){var a=t.headers.get("Etag");a&&(L["".concat(e).concat(a)]=t.clone(),M[e]=a)}return t}))}return Reflect.apply(fetch,void 0,[e,t])};function D(e){var t=Object.keys(e);if(0===t.length)return"";for(var a="?",n=0;n<t.length;n++){var r=t[n];a+=r+"="+encodeURIComponent(e[r]),n<t.length-1&&(a+="&")}return a}a(496);var B=function(){function e(){var t=this;Object(i.a)(this,e),this.logToConsole=!1,this.serverVersion="",this.clusterId="",this.token="",this.csrf="",this.url="",this.urlVersion="",this.userAgent=null,this.enableLogging=!1,this.defaultHeaders={"Content-Type":"application/json"},this.userId="",this.diagnosticId="",this.includeCookies=!0,this.isRudderKeySet=!1,this.translations={connectionError:"There appears to be a problem with your internet connection.",unknownError:"We received an unexpected status code from the server."},this.userRoles=void 0,this.getTranslations=function(e){return t.doFetch(e,{method:"get"})},this.logClientError=function(e){},this.login=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t.trackEvent("api","api_users_login");var s={device_id:r,user:e,password:a,token:n,locale:"zh-cn"};return t.doFetch("".concat(t.getAccountsRoute(),"/password/login"),{method:"POST",body:JSON.stringify(s)})},this.createUser=function(e,a,n,r){t.trackEvent("api","api_users_createUser");var s={};return a&&(s.t=a),n&&(s.iid=n),r&&(s.r=r),t.doFetch("".concat(t.getAccountsRoute(),"/password/register").concat(D(s)),{method:"POST",body:JSON.stringify(e)})},this.createSpace=function(e){t.trackEvent("api","api_users_createTenant");return t.doFetch("".concat(t.getBaseRoute(),"/api/v4/spaces/register/tenant").concat(D({})),{method:"POST",body:JSON.stringify({name:e})})},this.sendVerificationToken=function(e){t.trackEvent("api","api_users_verify");var a={user:e};return t.doFetch("".concat(t.getAccountsRoute(),"/password/sendVerificationCode"),{method:"POST",body:JSON.stringify(a)})},this.getSettings=function(){return t.doFetch("".concat(t.getAccountsRoute(),"/settings"),{method:"get"})},this.getMe=function(){return t.doFetch("".concat(t.getAccountsRoute(),"/user"),{method:"get"})},this.getMySpaces=function(){return t.doFetch("".concat(t.getAccountsRoute(),"/user/spaces"),{method:"get"})},this.logout=Object(_.a)(S.a.mark((function e(){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.trackEvent("api","api_users_logout"),e.next=3,t.doFetchWithResponse("".concat(t.getAccountsRoute(),"/logout"),{method:"post"});case 3:return a=e.sent,(n=a.response).ok&&(t.token=""),t.serverVersion="",e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),this.doFetch=function(){var e=Object(_.a)(S.a.mark((function e(a,n){var r,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.doFetchWithResponse(a,n);case 2:return r=e.sent,s=r.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.doFetchWithResponse=function(){var e=Object(_.a)(S.a.mark((function e(a,n){var r,s,o,c,i,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(a,t.getOptions(n));case 2:return r=e.sent,s=F(r.headers),e.prev=4,e.next=7,r.json();case 7:o=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),new W(t.getUrl(),{message:"Received invalid response from the server.",intl:{id:"mobile.request.invalid_response",defaultMessage:"Received invalid response from the server."},url:a});case 13:if(s.has("X-Version-Id")&&!s.get("Cache-Control")&&(c=s.get("X-Version-Id"))&&t.serverVersion!==c&&(t.serverVersion=c),s.has("X-Cluster-Id")&&(i=s.get("X-Cluster-Id"))&&t.clusterId!==i&&(t.clusterId=i),!r.ok){e.next=17;break}return e.abrupt("return",{response:r,headers:s,data:o});case 17:throw l=o.message||"",t.logToConsole&&console.error(l),new W(t.getUrl(),{message:l,server_error_id:o.id,status_code:o.status_code,url:a});case 20:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,a){return e.apply(this,arguments)}}()}return Object(l.a)(e,[{key:"getUrl",value:function(){return this.url}},{key:"getAbsoluteUrl",value:function(e){return"string"===typeof e&&e.startsWith("/")?this.getUrl()+e:e}},{key:"setUrl",value:function(e){this.url=e}},{key:"setUserAgent",value:function(e){this.userAgent=e}},{key:"getToken",value:function(){return this.token}},{key:"setToken",value:function(e){this.token=e}},{key:"setCSRF",value:function(e){this.csrf=e}},{key:"setAcceptLanguage",value:function(e){this.defaultHeaders["Accept-Language"]=e}},{key:"setEnableLogging",value:function(e){this.enableLogging=e}},{key:"setIncludeCookies",value:function(e){this.includeCookies=e}},{key:"setUserId",value:function(e){this.userId=e}},{key:"setUserRoles",value:function(e){this.userRoles=e}},{key:"setDiagnosticId",value:function(e){this.diagnosticId=e}},{key:"enableRudderEvents",value:function(){this.isRudderKeySet=!0}},{key:"getServerVersion",value:function(){return this.serverVersion}},{key:"getUrlVersion",value:function(){return this.urlVersion}},{key:"getBaseRoute",value:function(){return"".concat(this.url).concat(this.urlVersion)}},{key:"getAccountsRoute",value:function(){return"".concat(this.getBaseRoute(),"/accounts")}},{key:"getCSRFFromCookie",value:function(){if("undefined"!==typeof document&&"undefined"!==typeof document.cookie)for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var a=e[t].trim();if(a.startsWith("MMCSRF="))return a.replace("MMCSRF=","")}return""}},{key:"getOptions",value:function(e){var t=Object(c.a)({},e),a=Object(c.a)(Object(A.a)({},"X-Requested-With","XMLHttpRequest"),this.defaultHeaders);this.token&&(a.Authorization="".concat("BEARER"," ").concat(this.token));var n=this.csrf||this.getCSRFFromCookie();return e.method&&"get"!==e.method.toLowerCase()&&n&&(a["X-CSRF-Token"]=n),this.includeCookies&&(t.credentials="include"),this.userAgent&&(a["User-Agent"]=this.userAgent),t.headers&&Object.assign(a,t.headers),Object(c.a)(Object(c.a)({},t),{},{headers:a})}},{key:"trackEvent",value:function(e,t,a){if(this.isRudderKeySet)Object.assign({category:e,type:t,user_actual_id:this.userId},a)}}]),e}();function F(e){var t=new Map,a=new Map;return e.forEach((function(e,n){var r=n.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()})),s=e;if(e&&e.match(/\n\S+:\s\S+/)){var o=e.split("\n");s=o.shift();var c=new Map(o.map((function(e){return e.split(/:\s/)})));a=new Map([].concat(Object(P.a)(a),Object(P.a)(c)))}t.set(r,s)})),new Map([].concat(Object(P.a)(t),Object(P.a)(a)))}var W=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,n.message+": "+function(e,t){var a=t,n=(a=a.substring(e.length)).indexOf("?");-1!==n&&(a=a.substring(0,n));var r=["api","v4","users","teams","scheme","name","members","channels","posts","reactions","commands","files","preferences","hooks","incoming","outgoing","oauth","apps","emoji","brand","image","data_retention","jobs","plugins","roles","system","timezones","schemes","redirect_location","patch","mfa","password","reset","send","active","verify","terms_of_service","login","logout","ids","usernames","me","username","email","default","sessions","revoke","all","audits","device","status","search","switch","authorized","authorize","deauthorize","tokens","disable","enable","exists","unread","invite","batch","stats","import","schemeRoles","direct","group","convert","view","search_autocomplete","thread","info","flagged","pinned","pin","unpin","opengraph","actions","thumbnail","preview","link","delete","logs","ping","config","client","license","websocket","webrtc","token","regen_token","autocomplete","execute","regen_secret","policy","type","cancel","reload","environment","s3_test","file","caches","invalidate","database","recycle","compliance","reports","cluster","ldap","test","sync","saml","certificate","public","private","idp","elasticsearch","purge_indexes","analytics","old","webapp","fake"];return a=a.split("/").map((function(e){return""!==e&&-1===r.indexOf(e)?"<filtered>":e})).join("/"),-1!==n&&(a+="?<filtered>"),a}(e,n.url||""))).url=void 0,r.intl=void 0,r.server_error_id=void 0,r.status_code=void 0,r.message=n.message,r.url=n.url,r.intl=n.intl,r.server_error_id=n.server_error_id,r.status_code=n.status_code,Object.defineProperty(Object(T.a)(r),"message",{enumerable:!0}),r}return a}(Object(U.a)(Error)),G=new B;function q(e){return function(){var e=Object(_.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}window.Client4=G;function z(e,t,a){var n=a().entities.users.currentUserId;"status_code"in e&&401===e.status_code&&e.url&&-1===e.url.indexOf("/login")&&n&&(G.setToken(""),t({type:R.LOGOUT_SUCCESS,data:{}}))}function H(e,t,a){-1===e.indexOf("SUCCESS")?a(function(e,t){return{type:e,data:t}}(e,t)):a(K(e))}function K(e){return{type:e,data:null}}function Q(e){var t=e.clientFunc,a=e.onRequest,n=e.onSuccess,r=e.onFailure,s=e.params,o=void 0===s?[]:s;return function(){var e=Object(_.a)(S.a.mark((function e(s,c){var i,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a&&s(K(a)),i=null,e.prev=2,e.next=5,t.apply(void 0,Object(P.a)(o));case 5:i=e.sent,e.next=15;break;case 8:return e.prev=8,e.t0=e.catch(2),z(e.t0,s,c),l=[q(e.t0)],r&&l.push((u=r,d=e.t0,{type:u,error:d})),s(I(l)),e.abrupt("return",{error:e.t0});case 15:return Array.isArray(n)?n.forEach((function(e){H(e,i,s)})):n&&H(n,i,s),e.abrupt("return",{data:i});case 17:case"end":return e.stop()}var u,d}),e,null,[[2,8]])})));return function(t,a){return e.apply(this,arguments)}}()}Error;var X=a(248),Y=Object(p.combineReducers)({currentUserId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.RECEIVED_ME:var a=t.data||t.payload;return a._id;case R.LOGIN:var n=t.data.user;return n?n._id:e;case R.LOGOUT_SUCCESS:return""}return e},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.RECEIVED_ME:case R.RECEIVED_PROFILE:var a=t.data||t.payload,n=Object(c.a)({},a);return Object(c.a)(Object(c.a)({},e),{},Object(A.a)({},a._id,n));case R.LOGIN:var r=t.data.user;if(r){var s=Object(c.a)({},e);return s[r._id]=r,s}return e;case R.LOGOUT_SUCCESS:return{};default:return e}}}),J={en:{value:"en",name:"English",order:1,translations:a(132)},"zh-CN":{value:"zh-CN",name:"\u4e2d\u6587 (\u7b80\u4f53)",order:13,translations:a(246)}};function $(){return J}function Z(e){return $()[e]}function ee(e){return b(e).DefaultClientLocale,ae()}function te(e,t){return Z(t)?e.i18n.translations[t]:e.i18n.translations.en}a(497);var ae=function(){var e=window.navigator;return(e.userLanguage||e.language||"en").indexOf("zh")>=0?"zh-CN":"en"};function ne(e,t){var a=he.getState(),n=te(a,ee(a));return n&&e in n?n[e]:t||e}function re(e){for(var t={},a=0;a<e.length;a++)t[e[a]._id]=e[a];return t}var se=Object(p.combineReducers)({currentSpaceId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.SELECT_SPACE:return t.data;case R.LOGOUT_SUCCESS:return"";default:return e}},spaces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.RECEIVED_SPACES_LIST:return Object.assign({},e,re(t.data));case R.LOGOUT_SUCCESS:return{};default:return e}}});var oe=Object(p.combineReducers)({appState:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.RECEIVED_APP_STATE:return t.data;default:return e}},credentials:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.RECEIVED_APP_CREDENTIALS:return Object.assign({},e,t.data);case R.LOGIN:return{url:t.data.url};case R.LOGOUT_SUCCESS:return{};default:return e}},deviceToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.RECEIVED_APP_DEVICE_TOKEN:return t.data;default:return e}},serverVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.RECEIVED_SERVER_VERSION:return t.data;case R.LOGOUT_SUCCESS:return"";default:return e}}}),ce=Object(p.combineReducers)({general:oe,users:Y,spaces:se}),ie=a(132);var le=Object(p.combineReducers)({translations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{en:ie},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVED_TRANSLATIONS":return Object(c.a)(Object(c.a)({},e),{},Object(A.a)({},t.data.locale,t.data.translations));default:return e}}}),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.RECEIVED_SETTINGS:return Object.assign({},e,t.data);default:return e}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"change":return Object.assign({},e,{status:t.data});default:return e}},me=Object(p.combineReducers)({entities:ce,i18n:le,settings:ue,requests:de}),pe=(a(498),{entities:{general:{},users:{currentUserId:"",users:{}},spaces:{currentSpaceId:"",spaces:{}}},i18n:{translations:{en:a(132),"zh-CN":a(246)}},requests:{status:"not_started"}}),fe=Object(p.createStore)(me,pe,Object(p.applyMiddleware)(X.a));var he=fe,ge=function(e){return["user_prev_space",e].join(":")},be=function(e,t){return""===e||"/"===e?t:[e,t].join(":")},Ee=new(function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,[{key:"getItem",value:function(e){arguments.length>1&&void 0!==arguments[1]||he.getState();var t="steedos";return localStorage.getItem(be(t,e))}},{key:"setItem",value:function(e,t){he.getState();localStorage.setItem(be("steedos",e),t)}},{key:"removeItem",value:function(e){he.getState();localStorage.removeItem(be("steedos",e))}},{key:"getPreviousSpaceId",value:function(e){return e||(e=this.getItem("userId")),this.getItem(ge(e))}},{key:"setPreviousSpaceId",value:function(e,t){this.setItem(ge(e),t),this.setItem("spaceId",t),localStorage.setItem("spaceId",t)}},{key:"getUserId",value:function(){return this.getItem("userId")}},{key:"setUserId",value:function(e,t){e?(this.setItem("userId",e),this.setItem("token",t),this.setItem("was_logged_in","true")):(this.removeItem("userId"),this.removeItem("token"),this.removeItem("spaceId"),localStorage.removeItem("spaceId"),this.setItem("was_logged_in","false"))}},{key:"setWasLoggedIn",value:function(e){e?this.setItem("was_logged_in","true"):this.setItem("was_logged_in","false")}},{key:"getWasLoggedIn",value:function(){return"true"===this.getItem("was_logged_in")}}]),e}());window.LocalStorageStore=Ee;var ve=Ee;function ye(e){return e.entities.users.users[we(e)]}function we(e){return e.entities.users.currentUserId}function Se(e){return e.entities.spaces.spaces}function _e(e){return Object.values(e.entities.spaces.spaces)}function Ce(e){return Object.keys(e.entities.spaces.spaces).length}function Oe(e){return e.entities.spaces.spaces[xe(e)]}function xe(e){return e.entities.spaces.currentSpaceId}function Ie(e,t){return e.entities.spaces.spaces[t]}function ke(e){return function(){var t=Object(_.a)(S.a.mark((function t(a,n){var r,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=we(n())){t.next=3;break}return t.abrupt("return");case 3:if((s=e)||(s=ve.getPreviousSpaceId(r)),Ie(n(),s)){t.next=8;break}return t.abrupt("return",{data:!1});case 8:return a({type:N.SELECT_SPACE,data:s}),ve.setPreviousSpaceId(r,s),t.abrupt("return",{data:s});case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}function Re(){return Q({clientFunc:G.getMySpaces,onRequest:N.MY_SPACES_REQUEST,onSuccess:[N.RECEIVED_SPACES_LIST,N.MY_SPACES_SUCCESS],onFailure:N.MY_SPACES_FAILURE})}function Ne(e){return function(){var t=Object(_.a)(S.a.mark((function t(a,n){var r,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,G.createSpace(e);case 4:r=t.sent,t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(1),z(t.t0,a,n),a(q(t.t0)),t.abrupt("return",{error:t.t0});case 12:if(!r||!r._id){t.next=22;break}return s=[a(Re()),a(ke(r._id))],t.prev=14,t.next=17,Promise.all(s);case 17:t.next=22;break;case 19:return t.prev=19,t.t1=t.catch(14),t.abrupt("return",{error:t.t1});case 22:return t.abrupt("return",{data:r});case 23:case"end":return t.stop()}}),t,null,[[1,7],[14,19]])})));return function(e,a){return t.apply(this,arguments)}}()}function je(e){return function(){var e=Object(_.a)(S.a.mark((function e(t,a){var n,r,s,o,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ve.getItem("userId"),r=ve.getItem("token"),s=ve.getItem("spaceId"),t=he.getState(),console.log(t),o=t.settings.root_url,(c=new URL(o)).searchParams.append("X-User-Id",n),c.searchParams.append("X-Auth-Token",r),c.searchParams.append("X-Space-Id",s),document.location.href=c.toString(),e.abrupt("return",null);case 10:case"end":return e.stop()}var t}),e)})));return function(t,a){return e.apply(this,arguments)}}()}function Te(e,t,a,n){return function(){var r=Object(_.a)(S.a.mark((function r(s,o){var c;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,G.createUser(e,t,a,n);case 3:c=r.sent,r.next=11;break;case 6:return r.prev=6,r.t0=r.catch(0),z(r.t0,s,o),s(q(r.t0)),r.abrupt("return",{error:r.t0});case 11:return s({type:R.RECEIVED_ME,data:c.user}),r.abrupt("return",Pe(c)(s,o));case 13:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e,t){return r.apply(this,arguments)}}()}function Ue(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var n=Object(_.a)(S.a.mark((function n(r,s){var o,c;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:R.LOGIN_REQUEST,data:null}),o=s().entities.general.deviceToken,n.prev=2,n.next=5,G.login(e,t,a,o);case 5:c=n.sent,n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(2),r(I([{type:R.LOGIN_FAILURE,error:n.t0},q(n.t0)])),n.abrupt("return",{error:n.t0});case 12:return n.abrupt("return",Pe(c)(r,s));case 13:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e,t){return n.apply(this,arguments)}}()}function Pe(e){return function(){var t=Object(_.a)(S.a.mark((function t(a,n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:R.RECEIVED_ME,data:e.user}),G.setToken(e.token),G.setUserId(e.user._id),e.user&&e.user._id&&ve.setUserId(e.user._id,e.token),r=[a(Re()),a(ke())],t.prev=5,t.next=8,Promise.all(r);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(5),a(I([{type:R.LOGIN_FAILURE,error:t.t0},q(t.t0)])),t.abrupt("return",{error:t.t0});case 14:return a(I([{type:R.LOGIN_SUCCESS}])),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage&&window.ReactNativeWebView.postMessage(JSON.stringify({"X-Auth-Token":e.token,"X-User-Id":e.user._id,"X-Access-Token":e.tokens.accessToken})),t.abrupt("return",{data:!0});case 17:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e,a){return t.apply(this,arguments)}}()}function Ae(){return function(){var e=Object(_.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:R.LOGOUT_REQUEST,data:null}),e.prev=1,e.next=4,G.logout();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return ve.setUserId(null),t({type:R.LOGOUT_SUCCESS,data:null}),e.abrupt("return",{data:!0});case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}function Le(e){return function(){var t=Object(_.a)(S.a.mark((function t(a,n){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n().entities.general.deviceToken,t.prev=1,t.next=4,G.sendVerificationToken(e);case 4:r=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),a(I([{type:R.VERIFICATION_TOKEN_RECIEVED,error:t.t0}])),t.abrupt("return",{error:t.t0});case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,a){return t.apply(this,arguments)}}()}var Me=he.dispatch,Ve=he.getState;function De(e){var t=this;e||(e="/login"),Me(Ae()).then((function(){ve.setUserId(null),t.redirectTo(e)})).catch((function(){t.redirectTo(e)}))}function Be(){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(_.a)(S.a.mark((function e(){var t,a,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ve(),a=ye(t)){e.next=4;break}return e.abrupt("return");case 4:if(n=ve.getPreviousSpaceId(a.id),!(r=Ie(t,n))){e.next=11;break}return Me(ke(r._id)),e.abrupt("return",r._id);case 11:O.push("/select-space");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(_.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be();case 2:t=e.sent,O.push("/home/".concat(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(){return(qe=Object(_.a)(S.a.mark((function e(t){var a,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:t&&t.indexOf("no_redirect=1")<0&&(a=ve.getItem("userId"),n=ve.getItem("token"),r=ve.getItem("spaceId"),t=t.indexOf("?")>0?t+"no_redirect=1":t+"?no_redirect=1",a&&n&&(t="".concat(t,"&X-Auth-Token=").concat(n,"&X-User-Id=").concat(a,"&X-Space-Id=").concat(r)),t.match(/^\/([^/]|$)/)?O.push(t):document.location.href=t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(){return function(){var e=Object(_.a)(S.a.mark((function e(t){var a,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=ve.getItem("token"))&&G.setToken(a),n=[t(function(){var e=Object(_.a)(S.a.mark((function e(t,a){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.getSettings();case 3:n=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),z(e.t0,t,a),e.abrupt("return",{error:e.t0});case 10:return G.setEnableLogging("true"===n.EnableDeveloper),G.setDiagnosticId(n.DiagnosticId),t({type:j.RECEIVED_SETTINGS,data:n}),e.abrupt("return",{data:n});case 14:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}())],e.next=5,Promise.all(n);case 5:if(r=e.sent,!ve.getWasLoggedIn()){e.next=12;break}return e.t0=r,e.next=10,t(function(){var e=Object(_.a)(S.a.mark((function e(t,a){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(),n=[t(function(){var e=Object(_.a)(S.a.mark((function e(t,a){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ve.getItem("userId")){e.next=2;break}return e.abrupt("return",null);case 2:return n=Q({clientFunc:G.getMe,onSuccess:R.RECEIVED_ME}),e.next=5,n(t,a);case 5:if(!("error"in(r=e.sent))){e.next=9;break}return ve.removeItem("userId"),e.abrupt("return",r);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),t(Re()),t(ke())],e.next=4,Promise.all(n);case 4:return r=a().entities.users.currentUserId,a().entities.users.users[r],r&&G.setUserId(r),e.abrupt("return",{data:!0});case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 10:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var He=a(29),Ke=a(533),Qe=a(524),Xe=a(522),Ye=a(536),Je=Object(Xe.a)((function(e){return Object(Ye.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff",backgroundColor:"rgba(0, 0, 0, 0.0)"}})}));var $e=Object(g.b)((function(e){return{requests:v(e)}}))((function(e){var t=e.requests,a=Je({}),s=r.a.useState(!1),o=Object(He.a)(s,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){"started"===t.status?i(!0):i(!1)}),[t]),r.a.createElement("div",null,r.a.createElement(Ke.a,{className:a.backdrop,open:c},r.a.createElement(Qe.a,null)))})),Ze=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){return Object(i.a)(this,a),t.call(this,e,n)}return Object(l.a)(a,[{key:"isValidState",value:function(){return null!=this.props.currentUser}},{key:"componentDidMount",value:function(){window.postMessage({type:"webapp-ready"},window.location.origin),this.props.currentUser||De("/login?redirect_to="+encodeURIComponent(this.props.location.pathname),!0,!1)}},{key:"render",value:function(){return this.isValidState()?this.props.children:r.a.createElement($e,null)}}]),a}(r.a.PureComponent);var et=Object(g.b)((function(e){return{currentUser:ye(e),tenant:E(e)}}))(Ze),tt=a(530),at=a(538),nt=a(143),rt=a(529),st=a(10),ot=a(525),ct=a(526),it=a(527),lt=a(528),ut=a(44),dt={success:ot.a,warning:ct.a,error:it.a,info:lt.a},mt=Object(Xe.a)((function(e){var t="light"===e.palette.type?ut.a:ut.e,a="light"===e.palette.type?ut.e:ut.a;return{success:{backgroundColor:nt.a[600]},error:{color:t(e.palette.error.main,.6),backgroundColor:a(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},info:{color:t(e.palette.primary.main,.6),backgroundColor:a(e.palette.primary.main,.9),"& $icon":{color:e.palette.primary.main}},warning:{color:t(rt.a[700],.6),backgroundColor:a(rt.a[700],.9),"& $icon":{color:rt.a[700]}},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function pt(e){var t=mt({}),a=e.className,n=e.message,s=(e.onClose,e.variant),o=Object(m.a)(e,["className","message","onClose","variant"]),c=dt[s];return r.a.createElement(at.a,Object.assign({elevation:0,className:Object(st.a)(t[s],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(c,{className:Object(st.a)(t.icon,t.iconVariant)}),r.a.createElement(tt.a,{id:n,defaultMessage:n,values:{mobile_help:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r.a.createElement("a",{className:"external_link",target:"_blank",href:"https://developer.steedos.com/developer/steedos_config/#%E5%8F%91%E9%80%81%E7%9F%AD%E4%BF%A1%E9%85%8D%E7%BD%AE"},t)},email_help:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r.a.createElement("a",{className:"external_link",target:"_blank",href:"https://developer.steedos.com/developer/steedos_config/#%E9%82%AE%E4%BB%B6%E9%85%8D%E7%BD%AE"},t)}}}))},o))}var ft=Object(Xe.a)((function(e){return{margin:{marginBottom:e.spacing(1)}}})),ht=(Object(Xe.a)({formError:{color:"red"}}),function(e){var t=e.error,a=e.variant,n=ft({}),s=a||"error";return r.a.createElement(pt,{variant:s,className:n.margin,message:t})}),gt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return n.createElement("div",{className:"flex sm:items-center justify-center mx-auto overflow-auto p-10 h-full"},n.createElement("div",{className:"absolute rounded p-11 sm:shadow-md bg-white w-screen max-w-md"},this.props.children))}}]),a}(n.Component);var bt=Object(g.b)((function(e){return{tenant:E(e)}}))(gt);var Et=Object(g.b)((function(e){return{tenant:E(e)}}))((function(e){var t=e.tenant,a=(e.location,G.getAbsoluteUrl("/accounts/a/images/logo_platform.png"));return t.logo_url&&(a=t.logo_url),n.createElement("div",null,n.createElement("img",{src:a,className:"h-10"}))})),vt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.color?this.props.color:"#f8f8f8",t={backgroundImage:"url("+(this.props.url?this.props.url:G.getAbsoluteUrl("/accounts/a/images/background.svg"))+")",backgroundColor:e};return n.createElement("div",null,n.createElement("div",{className:"fixed justify-center mx-auto h-full w-full",style:t}))}}]),a}(n.Component);var yt=Object(g.b)((function(e){return{}}))(vt),wt=r.a.forwardRef((function(e,t){var a=e.placeholder,n=Object(m.a)(e,["placeholder"]);return r.a.createElement(tt.a,{id:a.id,defaultMessage:a.defaultMessage,values:a.values},(function(e){return r.a.createElement("input",Object.assign({},n,{ref:t,placeholder:e}))}))}));wt.displayName="LocalizedInput";var St=wt,_t=function(e,t){var a=Object(n.useMemo)((function(){var a,n,r=t.total||60,s=t.lifecycle||"session",o="__".concat(e),c=function(){return""+(Date.now()+1e3*r)};switch(s){case"always":n=function(){return localStorage.setItem(o,c())},a=function(){return localStorage.getItem(o)};break;case"session":n=function(){return sessionStorage.setItem(o,c())},a=function(){return sessionStorage.getItem(o)}}return[n,a]}),[t,e]),r=Object(He.a)(a,2),s=r[0],o=r[1],c=Object(n.useCallback)((function(){s()}),[s]),i=Object(n.useCallback)((function(){var e=o();if(e){if(e=+e,isNaN(e))return 0;var t=Math.floor((e-Date.now())/1e3);return t<0?0:t}return 0}),[o]),l=Object(n.useState)(i()),u=Object(He.a)(l,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){var e=setInterval((function(){var e=i();d!==e&&m(e)}),500);return function(){clearInterval(e)}}),[i,d]),[d,c]},Ct=function(e){var t=e.onClick,a=e.id,n=e.loginId,s=_t(n||"cnt1",{total:60,lifecycle:"session"}),o=Object(He.a)(s,2),c=o[0],i=o[1],l="text-blue-600 hover:text-blue-600";return c>0&&(l="text-gray-300 hover:text-gray-300"),r.a.createElement("button",{className:"justify-center col-span-2 -ml-px relative inline-flex items-center px-3 py-3 border border-gray-300 text-sm leading-5 font-medium bg-gray-100 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 transition ease-in-out duration-150 "+l,id:a,disabled:c>0,type:"button",onClick:function(e){i(),t&&t()}},r.a.createElement("span",{className:""},r.a.createElement(tt.a,{id:"accounts.sendCode",defaultMessage:"Get Verify code"}),c>0?" (".concat(c,")"):null))},Ot=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var s;Object(i.a)(this,a),(s=t.call(this,e,n)).createLoginPlaceholder=function(){var e="";return"mobile"==s.state.loginBy?e="accounts.mobile":"email"==s.state.loginBy&&(e="accounts.email"),ne(e)},s.handleEmailChange=function(e){s.setState({email:e.target.value})},s.handleNameChange=function(e){s.setState({name:e.target.value})},s.switchLoginByMobile=function(e){s.setState({loginBy:"mobile"})},s.switchLoginByEmail=function(e){s.setState({loginBy:"email"})},s.tabColor=function(e){return s.state.loginBy===e?"text-blue-600 hover:text-blue-700 border-blue-600 hover:border-blue-300":"text-gray-600 hover:text-gray-500 hover:border-gray-300"},s.handleMobileChange=function(e){s.setState({mobile:e.target.value})},s.handlePasswordChange=function(e){s.setState({password:e.target.value})},s.handleCodeChange=function(e){s.setState({verifyCode:e.target.value})},s.goLogin=function(){var e={email:s.state.email,mobile:s.state.mobile};s.props.history.push({pathname:"/login",search:s.props.location.search,state:e})},s.sendVerificationToken=function(e){if(s.setState({serverError:null,loading:!0}),"email"!==s.state.loginBy||s.state.email.trim())if("mobile"!==s.state.loginBy||s.state.mobile.trim()){var t={email:s.state.email,mobile:s.state.mobile};s.props.actions.sendVerificationToken(t).then(function(){var e=Object(_.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.state.userId=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else s.setState({serverError:r.a.createElement(tt.a,{id:"accounts.invalidMobile"})});else s.setState({serverError:r.a.createElement(tt.a,{id:"accounts.invalidEmail"})})},s.onSubmit=function(){var e=Object(_.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.setState({serverError:null,loading:!0}),t.preventDefault(),s.setState({error:null}),"email"!==s.state.loginBy||s.state.email.trim()){e.next=6;break}return s.setState({serverError:r.a.createElement(tt.a,{id:"accounts.invalidEmail"})}),e.abrupt("return");case 6:if("mobile"!==s.state.loginBy||s.state.mobile.trim()){e.next=9;break}return s.setState({serverError:r.a.createElement(tt.a,{id:"accounts.invalidMobile"})}),e.abrupt("return");case 9:a={password:s.state.password,name:s.state.name,locale:"zh-cn",verifyCode:s.state.verifyCode},"mobile"===s.state.loginBy?a.mobile=s.state.mobile:"email"===s.state.loginBy&&(a.email=s.state.email),s.props.actions.createUser(a).then(function(){var e=Object(_.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.error)){e.next=4;break}return s.setState({serverError:r.a.createElement(tt.a,{id:a.message})}),e.abrupt("return");case 4:s.finishSignin();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.finishSignin=function(e){var t=new URLSearchParams(s.props.location.search).get("redirect_to");t&&t.match(/^\/([^/]|$)/)?s.props.history.push(t):(s.state.loginSuccess=!0,We())},s.goSignup=function(){var e={};s.state.email.trim().length>0&&(e={email:s.state.email.trim()}),s.props.history.push({pathname:"/signup",search:s.props.location.search,state:e})};var o="";new URLSearchParams(s.props.location.search).get("email")&&(o=new URLSearchParams(s.props.location.search).get("email"));var c="";return new URLSearchParams(s.props.location.search).get("X-Space-Id")?c=new URLSearchParams(s.props.location.search).get("email"):s.props.settingsTenantId&&(c=s.props.settingsTenantId),s.state={spaceId:c,email:o,mobile:"",userId:"",password:"",verifyCode:"",sessionExpired:!1,loginSuccess:!1,loginByEmail:!1,loginByMobile:!1,loginBy:"mobile",loginWithCode:!1,loginWithPassword:!1,serverError:"",loading:!1},s.props.tenant.enable_mobile_code_login||s.props.tenant.enable_email_code_login?(s.state.loginWithCode=!0,s.state.loginByEmail=!0,s.state.loginByMobile=!0,s.state.loginBy="mobile"):s.props.tenant.enable_mobile_code_login?(s.state.loginWithCode=!0,s.state.loginByMobile=!0,s.state.loginByEmail=!1,s.state.loginBy="mobile"):s.props.tenant.enable_email_code_login?(s.state.loginWithCode=!0,s.state.loginByMobile=!1,s.state.loginByEmail=!0,s.state.loginBy="email"):s.props.tenant.enable_password_login&&(s.state.loginWithPassword=!0,s.state.loginByEmail=!0,s.state.loginByMobile=!1,s.state.loginBy="email"),s.emailInput=r.a.createRef(),s.mobileInput=r.a.createRef(),s.passwordInput=r.a.createRef(),window.browserHistory=s.props.history,document.title=ne("accounts.signup")+" | ".concat(s.props.tenant.name),s}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,null),r.a.createElement(bt,null,r.a.createElement(Et,null),r.a.createElement("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900"},r.a.createElement(tt.a,{id:"accounts.signup",defaultMessage:"Sign Up"})),r.a.createElement("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none"},r.a.createElement("div",{className:"rounded-md shadow-sm my-2"},"email"===this.state.loginBy&&r.a.createElement("div",null,r.a.createElement(St,{id:"email",name:"email",ref:this.emailInput,value:this.state.email,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.email_placeholder",defaultMessage:"Please enter email"},onChange:this.handleEmailChange})),"mobile"===this.state.loginBy&&r.a.createElement("div",null,r.a.createElement(St,{id:"mobile",name:"mobile",ref:this.mobileInput,value:this.state.mobile,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.mobile_placeholder",defaultMessage:"Please enter mobile"},onChange:this.handleMobileChange})),r.a.createElement("div",{className:"-mt-px"},r.a.createElement(St,{type:"password",id:"password",name:"password",autocomplete:"new-password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.password_create",defaultMessage:"Set Password"},onChange:this.handlePasswordChange})),this.state.loginWithCode&&r.a.createElement("div",{className:"-mt-px grid grid-cols-5"},r.a.createElement(St,{id:"verifyCode",name:"verifyCode",value:this.state.verifyCode,className:"col-span-3 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.verifyCode",defaultMessage:"Verify Code"},onChange:this.handleCodeChange}),r.a.createElement(Ct,{onClick:this.sendVerificationToken,id:"reApplyCodeBtn",loginId:this.state.email+this.state.mobile})),r.a.createElement("div",{className:"-mt-px"},r.a.createElement(St,{id:"name",name:"name",value:this.state.name,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.name_placeholder",defaultMessage:"Name"},onChange:this.handleNameChange}))),this.state.serverError&&r.a.createElement(ht,{error:this.state.serverError}),this.state.loginByEmail&&"mobile"===this.state.loginBy&&r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement("button",{type:"button",onClick:this.switchLoginByEmail,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(tt.a,{id:"accounts.switch_email",defaultMessage:"Use email"}))),this.state.loginByMobile&&"email"===this.state.loginBy&&r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement("button",{type:"button",onClick:this.switchLoginByMobile,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(tt.a,{id:"accounts.switch_mobile",defaultMessage:"Use mobile"}))),r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement(tt.a,{id:"accounts.has_account",defaultMessage:"Has Account?"}),r.a.createElement("button",{type:"button",onClick:this.goLogin,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(tt.a,{id:"accounts.signin",defaultMessage:"Login"}))),r.a.createElement("div",{className:"mt-6 flex justify-end"},r.a.createElement("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(tt.a,{id:"accounts.submit",defaultMessage:"Submit"}))))))}}]),a}(r.a.Component);var xt=Object(g.b)((function(e){return{getCurrentUserId:we(e),settings:b(e),tenant:E(e),settingsTenantId:y(e)}}),(function(e){return{actions:Object(p.bindActionCreators)({createUser:Te,sendVerificationToken:Le},e)}}))(Object(f.g)(Ot)),It=function(e){var t=e.onClick,a=e.id,n=e.loginId,s=_t(n||"cnt1",{total:60,lifecycle:"session"}),o=Object(He.a)(s,2),c=o[0],i=o[1],l="text-blue-600 hover:text-blue-600";return c>0&&(l="text-gray-300 hover:text-gray-300"),r.a.createElement("button",{className:"justify-center col-span-2 -ml-px relative inline-flex items-center px-3 py-3 border border-gray-300 text-sm leading-5 font-medium rounded-br-md bg-gray-100 hover:bg-white focus:outline-none focus:shadow-outline-blue focus:border-blue-300 active:bg-gray-100 transition ease-in-out duration-150 "+l,id:a,disabled:c>0,type:"button",onClick:function(e){i(),t&&t()}},r.a.createElement("span",{className:""},r.a.createElement(tt.a,{id:"accounts.sendCode",defaultMessage:"Get Verify code"}),c>0?" (".concat(c,")"):null))},kt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var s;Object(i.a)(this,a),(s=t.call(this,e,n)).createLoginPlaceholder=function(){var e="";return"mobile"==s.state.loginBy?e="accounts.mobile":"email"==s.state.loginBy&&(e="accounts.email"),ne(e)},s.handleLoginIdChange=function(e){var t=e.target.value;t.indexOf("@")?s.setState({loginId:t,email:e.target.value,loginBy:"email"}):s.setState({loginId:t,mobile:e.target.value,loginBy:"mobile"})},s.handlePasswordChange=function(e){s.setState({password:e.target.value})},s.handleCodeChange=function(e){s.setState({verifyCode:e.target.value})},s.switchLoginWithCode=function(e){s.setState({loginWith:"code"})},s.switchLoginWithPassword=function(e){s.setState({loginWith:"password"})},s.sendVerificationToken=function(e){if(s.setState({serverError:null,loading:!0}),"email"!==s.state.loginBy||s.state.email.trim())if("mobile"!==s.state.loginBy||s.state.mobile.trim()){var t={email:s.state.email,mobile:s.state.mobile};s.props.actions.sendVerificationToken(t).then(function(){var e=Object(_.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.state.userId=t,t||s.setState({serverError:r.a.createElement(tt.a,{id:"accounts.userNotFound",defaultMessage:"User not found."})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else s.setState({serverError:r.a.createElement(tt.a,{id:"accounts.invalidMobile"})});else s.setState({serverError:r.a.createElement(tt.a,{id:"accounts.invalidEmail"})})},s.onSubmit=function(){var e=Object(_.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.setState({serverError:null,loading:!0}),t.preventDefault(),s.setState({error:null}),"email"!==s.state.loginBy||s.state.email.trim()){e.next=6;break}return s.setState({serverError:r.a.createElement(tt.a,{id:"accounts.invalidEmail"})}),e.abrupt("return");case 6:if("mobile"!==s.state.loginBy||s.state.mobile.trim()){e.next=9;break}return s.setState({serverError:r.a.createElement(tt.a,{id:"accounts.invalidMobile"})}),e.abrupt("return");case 9:a={email:s.state.email,mobile:s.state.mobile,spaceId:s.state.spaceId},s.props.actions.login(a,s.state.password,s.state.verifyCode).then(function(){var e=Object(_.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.error)){e.next=4;break}return s.setState({serverError:r.a.createElement(tt.a,{id:a.message})}),e.abrupt("return");case 4:s.finishSignin();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.finishSignin=function(e){var t=new URLSearchParams(s.props.location.search).get("redirect_uri");t||(t="/"),function(e){qe.apply(this,arguments)}(t)},s.goSignup=function(){var e={};s.state.email.trim().length>0&&(e={email:s.state.email.trim()}),s.props.history.push({pathname:"/signup",search:s.props.location.search,state:e})};var o="";new URLSearchParams(s.props.location.search).get("email")&&(o=new URLSearchParams(s.props.location.search).get("email"));var c="";return new URLSearchParams(s.props.location.search).get("X-Space-Id")?c=new URLSearchParams(s.props.location.search).get("email"):s.props.settingsTenantId&&(c=s.props.settingsTenantId),s.state={spaceId:c,email:o,mobile:"",loginId:"",userId:"",password:"",verifyCode:"",sessionExpired:!1,loginSuccess:!1,loginByEmail:!0,loginByMobile:!0,loginBy:"mobile",loginWith:s.props.tenant.enable_password_login?"password":"code",loginWithCode:s.props.tenant.enable_mobile_code_login||s.props.tenant.enable_email_code_login,loginWithPassword:s.props.tenant.enable_password_login,serverError:"",loading:!1},s.emailInput=r.a.createRef(),s.mobileInput=r.a.createRef(),s.passwordInput=r.a.createRef(),window.browserHistory=s.props.history,document.title=ne("accounts.signin")+" | ".concat(s.props.tenant.name),s}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,null),r.a.createElement(bt,null,r.a.createElement(Et,null),r.a.createElement("h2",{className:"mt-2 text-left text-2xl leading-9 font-extrabold text-gray-900"},r.a.createElement(tt.a,{id:"accounts.signin",defaultMessage:"Login"})),r.a.createElement("form",{onSubmit:this.onSubmit,className:"mt-4",autoCapitalize:"none"},r.a.createElement("div",{className:"rounded-md shadow-sm my-2"},r.a.createElement("div",null,r.a.createElement(St,{id:"loginId",name:"loginId",ref:this.loginIdInput,value:this.state.loginId,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.email_mobile",defaultMessage:"Email or mobile"},onChange:this.handleLoginIdChange})),"password"==this.state.loginWith&&r.a.createElement("div",{className:"-mt-px"},r.a.createElement(St,{type:"password",id:"password",name:"password",value:this.state.password,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.password_placeholder",defaultMessage:"Password"},onChange:this.handlePasswordChange})),"code"==this.state.loginWith&&r.a.createElement("div",{className:"-mt-px grid grid-cols-5"},r.a.createElement(St,{id:"verifyCode",name:"verifyCode",value:this.state.verifyCode,className:"col-span-3 appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-bl-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-md sm:leading-5",placeholder:{id:"accounts.verifyCode",defaultMessage:"Verify Code"},onChange:this.handleCodeChange}),r.a.createElement(It,{onClick:this.sendVerificationToken,id:"reApplyCodeBtn",loginId:this.state.email+this.state.mobile}))),this.state.serverError&&r.a.createElement(ht,{error:this.state.serverError}),this.state.loginWithPassword&&"code"===this.state.loginWith&&r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement("button",{type:"button",onClick:this.switchLoginWithPassword,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(tt.a,{id:"accounts.switch_password",defaultMessage:"Login with password"}))),this.state.loginWithCode&&"password"===this.state.loginWith&&r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement("button",{type:"button",onClick:this.switchLoginWithCode,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(tt.a,{id:"accounts.switch_code",defaultMessage:"Login with verfiy code"}))),this.props.tenant.enable_register&&r.a.createElement("div",{className:"text-sm leading-5 my-4"},r.a.createElement(tt.a,{id:"accounts.no_account",defaultMessage:"No Account?"}),r.a.createElement("button",{type:"button",onClick:this.goSignup,className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none hover:underline transition ease-in-out duration-150"},r.a.createElement(tt.a,{id:"accounts.signup",defaultMessage:"Sign Up"}))),r.a.createElement("div",{className:"mt-6 flex justify-end"},r.a.createElement("button",{type:"submit",className:"rounded group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(tt.a,{id:"accounts.submit",defaultMessage:"Submit"}))))))}}]),a}(r.a.Component);var Rt=Object(g.b)((function(e){return{getCurrentUserId:we(e),settings:b(e),tenant:E(e),settingsTenantId:y(e)}}),(function(e){return{actions:Object(p.bindActionCreators)({login:Ue,sendVerificationToken:Le},e)}}))(Object(f.g)(kt)),Nt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){return Object(i.a)(this,a),t.call(this,e,n)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search).get("redirect_uri");e||(e="/login"),De(e)}},{key:"render",value:function(){return null}}]),a}(r.a.PureComponent);var jt=Object(g.b)((function(e){return{currentUser:ye(e),settings:b(e)}}),(function(e){return{actions:Object(p.bindActionCreators)({logout:Ae},e)}}))(Nt),Tt=a(252);var Ut=Object(g.b)((function(e){return{tenant:E(e)}}))((function(e){e.tenant;var t=e.user,a=Object(n.useState)(!1),r=Object(He.a)(a,2),s=r[0],o=r[1],c=function(){var e=Object(_.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:De();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.createElement("div",null,n.createElement("nav",{className:"bg-white shadow border-gray-200"},n.createElement("div",{className:"mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"flex items-center justify-between h-15"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("a",{href:"/"},n.createElement(Et,null))),n.createElement("div",{className:"hidden md:block"},n.createElement("div",{className:"ml-10 flex items-baseline space-x-4"}))),n.createElement("div",{className:"md:block"},n.createElement("div",{className:"ml-4 flex items-center md:ml-6"},n.createElement("a",{href:"https://www.steedos.com/help/",target:"_blank",className:"p-1 text-cool-gray-400 rounded-full hover:bg-cool-gray-100 hover:text-cool-gray-500 focus:outline-none focus:shadow-outline focus:text-cool-gray-500","aria-label":"Notifications"},n.createElement("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),n.createElement("div",{className:"ml-3 relative"},n.createElement("div",null,n.createElement("button",{className:"max-w-xs flex items-center text-sm rounded-full focus:outline-none focus:bg-cool-gray-100 lg:p-2 lg:rounded-md lg:hover:bg-cool-gray-100",id:"user-menu","aria-label":"User menu","aria-haspopup":"true",onClick:function(){return o(!s)}},n.createElement("span",{className:"inline-block h-8 w-8 rounded-full overflow-hidden bg-gray-100"},n.createElement("svg",{className:"h-full w-full text-gray-300",fill:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"}))),n.createElement("p",{className:"hidden ml-3 text-cool-gray-700 text-sm leading-5 font-medium lg:block"},t&&t.name&&t.name),n.createElement("svg",{className:"hidden flex-shrink-0 ml-1 h-5 w-5 text-cool-gray-400 lg:block",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})))),n.createElement(Tt.a,{show:s},n.createElement("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg"},n.createElement("div",{className:"py-1 rounded-md bg-white shadow-xs",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu"},n.createElement("a",{href:"#/select-space",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},"\u9009\u62e9\u4f01\u4e1a"),n.createElement("a",{href:"#/preference",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem"},"\u8d26\u6237\u8bbe\u7f6e"),n.createElement("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",onClick:c},"\u6ce8\u9500")))))))))))})),Pt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).goHome=Object(_.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.props.actions.goSpaceHome();case 1:case"end":return e.stop()}}),e)}))),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=ve.getPreviousSpaceId(),t=this.props.match&&this.props.match.params?this.props.match.params.spaceId:null,a=this.props.currentSpaceId,n=t||(a||e);n?this.props.actions.selectSpace(n).then(function(){var e=Object(_.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||0!=t.data){e.next=3;break}return O.push("/select-space"),e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):O.push("/select-space"),this.props.currentUser&&this.props.currentSpace&&this.goHome()}},{key:"render",value:function(){return null}}]),a}(r.a.PureComponent);var At=Object(g.b)((function(e){return{currentUser:ye(e),currentSpace:Oe(e),currentSpaceId:xe(e),tenant:E(e),settings:b(e)}}),(function(e){return{actions:Object(p.bindActionCreators)({selectSpace:ke,goSpaceHome:je},e)}}))(Pt),Lt=a(539),Mt=a(535),Vt=a(534),Dt=a(531),Bt=a(501),Ft=Object(Bt.a)({formContainer:{display:"flex",flexDirection:"column"},title:{fontSize:18,fontWeight:"bold",margin:"0 auto"}}),Wt=r.a.forwardRef((function(e,t){return r.a.createElement(h.b,Object.assign({to:{pathname:"/login",search:e.location.search}},e,{ref:t}))})),Gt=function(e){e.history;var t=e.location,a=Ft({}),s=Object(n.useState)(""),o=Object(He.a)(s,2),c=o[0],i=o[1],l=Object(n.useState)(""),u=Object(He.a)(l,2),d=(u[0],u[1],Object(n.useState)("")),m=Object(He.a)(d,2),p=m[0],f=m[1],h=Object(n.useState)(""),g=Object(He.a)(h,2),b=g[0],E=g[1],v=Object(n.useState)(""),y=Object(He.a)(v,2),w=y[0],C=y[1];Object(n.useEffect)((function(){O()}),[]);var O=function(){var e=Object(_.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(_.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i(null),p!==b){e.next=5;break}return i(ne("accounts.oldAndNewPasswordNotEQ")),e.abrupt("return");case 5:if(b==w){e.next=8;break}return i(ne("accounts.passwordNotEQ")),e.abrupt("return");case 8:case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:x,className:a.formContainer,autoCapitalize:"none"},r.a.createElement(Lt.a,{margin:"normal"},r.a.createElement(Mt.a,{htmlFor:"oldPassword"},r.a.createElement(tt.a,{id:"accounts.oldPassword",defaultMessage:"Old Password"})),r.a.createElement(Vt.a,{id:"oldPassword",type:"password",value:p,onChange:function(e){return f(e.target.value)}})),r.a.createElement(Lt.a,{margin:"normal"},r.a.createElement(Mt.a,{htmlFor:"newPassword"},r.a.createElement(tt.a,{id:"accounts.newPassword",defaultMessage:"newPassword"})),r.a.createElement(Vt.a,{id:"newPassword",type:"password",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement(Lt.a,{margin:"normal"},r.a.createElement(Mt.a,{htmlFor:"confirmPassword"},r.a.createElement(tt.a,{id:"accounts.confirmPassword",defaultMessage:"confirmPassword"})),r.a.createElement(Vt.a,{id:"confirmPassword",type:"password",value:w,onChange:function(e){return C(e.target.value)}})),c&&r.a.createElement(ht,{error:c}),r.a.createElement(Dt.a,{variant:"contained",color:"primary",type:"submit"},r.a.createElement(tt.a,{id:"accounts.next",defaultMessage:"Next"})),r.a.createElement(Dt.a,{component:Wt,location:t},r.a.createElement(tt.a,{id:"accounts.signin",defaultMessage:"Sign In"})))},qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;return Object(i.a)(this,a),(r=t.call(this,e,n)).handleNameChange=function(e){r.setState({name:e.target.value})},r.onSubmit=function(){var e=Object(_.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({serverError:null,loading:!0}),t.preventDefault(),r.props.actions.createSpace(r.state.name).then(function(){var e=Object(_.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.data,console.log(a),a&&r.selectSpace(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.selectSpace=function(e){e&&e._id&&(r.props.actions.selectSpace(e._id),O.push("/home/".concat(e._id)))},r.state={name:""},r}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(bt,null,r.a.createElement(Et,null),r.a.createElement("h2",{className:"my-2 text-left text-2xl leading-9 font-extrabold text-gray-900"},r.a.createElement(tt.a,{id:"accounts.title.createTenant",defaultMessage:"Create Team"})),r.a.createElement("div",{class:"mt-2 max-w-xl text-sm leading-5 text-gray-500"},r.a.createElement("p",null,r.a.createElement(tt.a,{id:"accounts.create_tenant_description",defaultMessage:"Create a new team and invite your colleagues to join."}))),r.a.createElement("form",{onSubmit:this.onSubmit,className:"mt-4"},r.a.createElement("div",{className:"rounded-md shadow-sm my-2"},r.a.createElement("div",null,r.a.createElement(St,{id:"name",name:"name",value:this.state.name,className:"appearance-none rounded-none relative block w-full px-3 py-2 border-b border-gray-500 bg-blue-50 placeholder-gray-500 text-gray-900 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5",placeholder:{id:"accounts.tenant_name",defaultMessage:"Team Name"},onChange:this.handleNameChange}))),r.a.createElement("div",{className:"mt-6 flex justify-end"},r.a.createElement("button",{type:"submit",className:"group relative w-32 justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(tt.a,{id:"accounts.submit",defaultMessage:"Submit"})))))}}]),a}(r.a.PureComponent);var zt=Object(g.b)((function(e){return{settings:b(e),tenant:E(e)}}),(function(e){return{actions:Object(p.bindActionCreators)({createSpace:Ne,selectSpace:ke},e)}}))(qt),Ht=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleCreateTenant=function(){O.push("/create-space")},n.handleSpaceClick=function(e){e&&(n.props.actions.selectSpace(e._id),O.push("/home/".concat(e._id)))},n.state={loadingSpaceId:"",error:null},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=[];return Object.keys(this.props.spaces).forEach((function(a){var n=e.props.spaces[a];t.push(r.a.createElement("li",{key:a},r.a.createElement("a",{space:n,onClick:function(t){return e.handleSpaceClick(n)},className:"w-full text-left border-b border-gray-100 block hover:bg-blue-100 focus:outline-none transition duration-150 ease-in-out"},r.a.createElement("div",{className:"flex items-center px-10 py-4"},r.a.createElement("div",{className:"min-w-0 flex-1 flex items-center"},r.a.createElement("div",{className:"flex-shrink-0 pr-4 text-gray-600"},r.a.createElement("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"}))),r.a.createElement("div",{className:"min-w-0 flex-1"},r.a.createElement("div",null,r.a.createElement("div",{className:"text-lg leading-5 font-medium truncate"},n.name)))),r.a.createElement("div",null,r.a.createElement("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})))))))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,null),r.a.createElement("div",{className:"flex sm:items-center justify-center mx-auto overflow-auto p-10"},r.a.createElement("div",{className:"relative rounded sm:shadow bg-white w-screen max-w-md"},r.a.createElement("div",{className:"pt-10 pl-10 pr-10"},r.a.createElement(Et,null),r.a.createElement("h2",{className:"mt-6 text-left text-2xl leading-9 font-extrabold text-gray-900"},this.props.spaceCount>0&&r.a.createElement(tt.a,{id:"accounts.select_space",defaultMessage:"Select Company"}),0==this.props.spaceCount&&r.a.createElement(tt.a,{id:"accounts.no_tenant",defaultMessage:"No Company"}))),r.a.createElement("div",{className:"mt-4 bg-white overflow-hidden mb-10"},r.a.createElement("ul",{className:"border-t border-gray-100"},t),r.a.createElement("div",{className:"mt-6 mx-10 flex justify-end"},r.a.createElement("button",{type:"button",onClick:this.handleCreateTenant,className:"rounded group relative w-full justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-none text-white bg-blue-600 hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue active:bg-blue-700 transition duration-150 ease-in-out"},r.a.createElement(tt.a,{id:"accounts.create_tenant",defaultMessage:"Create Company"})))))))}}]),a}(r.a.PureComponent);var Kt=Object(g.b)((function(e){return{currentUser:ye(e),currentSpace:Oe(e),spaces:Se(e),mySpaces:_e(e),spaceCount:Ce(e)}}),(function(e){return{actions:Object(p.bindActionCreators)({selectSpace:ke},e)}}))(Ht);var Qt=Object(g.b)((function(e){return{currentUser:ye(e),settings:b(e),tenant:E(e)}}))((function(e){var t=e.currentUser,a=(e.match,e.settings,e.history,e.location),s=(e.tenant,Object(n.useState)(null)),o=Object(He.a)(s,2),c=o[0],i=o[1],l=Object(n.useState)(t.name),u=Object(He.a)(l,2),d=u[0],m=u[1],p=(new URLSearchParams(a.search).get("X-Space-Id"),Object(n.useState)({spaces:[],name:""})),f=Object(He.a)(p,2),h=(f[0],f[1],function(){var e=Object(_.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i(null),e.prev=2,d.trim()){e.next=5;break}throw new Error("accounts.nameRequired");case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),i(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut,null),r.a.createElement("main",{className:"bg-cool-gray-100 h-screen"},r.a.createElement("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8"},r.a.createElement("div",{className:"px-4 py-8 sm:px-0"},r.a.createElement("header",null,r.a.createElement("div",{className:"max-w-7xl"},r.a.createElement("h1",{className:"text-3xl font-bold leading-tight text-gray-900"},"\u8d26\u6237\u8bbe\u7f6e"))),r.a.createElement("div",{className:"hidden sm:block"},r.a.createElement("div",{className:"py-5"},r.a.createElement("div",{className:"border-t border-gray-200"}))),r.a.createElement("div",{className:"mt-10 sm:mt-0"},r.a.createElement("div",{className:"md:grid md:grid-cols-3 md:gap-6"},r.a.createElement("div",{className:"md:col-span-1"},r.a.createElement("div",{className:"px-4 sm:px-0"},r.a.createElement("h3",{className:"text-lg font-medium leading-6 text-gray-900"},"\u4e2a\u4eba\u4fe1\u606f"))),r.a.createElement("div",{className:"mt-5 md:mt-0 md:col-span-2"},r.a.createElement("form",{onSubmit:h},r.a.createElement("div",{className:"shadow overflow-hidden sm:rounded-md"},r.a.createElement("div",{className:"px-4 py-5 bg-white sm:p-6"},r.a.createElement("div",{className:"grid grid-cols-6 gap-6"},r.a.createElement("div",{className:"col-span-6 sm:col-span-3"},r.a.createElement("label",{className:"block text-sm font-medium leading-5 text-gray-700"},"\u59d3\u540d"),r.a.createElement("input",{id:"fullname",value:d,onChange:function(e){return m(e.target.value)},className:"mt-1 form-input block w-full py-2 px-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"})))),c&&r.a.createElement(ht,{error:c}),r.a.createElement("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6"},r.a.createElement("button",{className:"py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 shadow-sm hover:bg-indigo-500 focus:outline-none focus:shadow-outline-blue active:bg-indigo-600 transition duration-150 ease-in-out"},"\u4fdd\u5b58")))))))))))})),Xt=function(e){var t=e.component,a=Object(m.a)(e,["component"]);return t?r.a.createElement(f.b,Object.assign({},a,{render:function(e){return r.a.createElement(et,e,r.a.createElement(t,e))}})):null},Yt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onConfigLoaded=function(){n.setState({configLoaded:!0})},n.state={configLoaded:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.loadMeAndConfig().then((function(t){Be(),"/"===document.location.pathname&&"#/"===document.location.hash&&t[1]&&t[1].data&&We(),e.onConfigLoaded()})).then((function(){}))}},{key:"render",value:function(){return this.state.configLoaded?r.a.createElement(h.a,{basename:""},r.a.createElement("div",{className:"absolute w-full h-full"},r.a.createElement($e,null),r.a.createElement(f.d,null,r.a.createElement(Xt,{exact:!0,path:"/",component:At}),r.a.createElement(f.b,{path:"/signup",component:xt}),r.a.createElement(f.b,{path:"/login",component:Rt}),r.a.createElement(f.b,{path:"/logout",component:jt}),r.a.createElement(Xt,{path:"/create-space",component:zt}),r.a.createElement(Xt,{path:"/select-space",component:Kt}),r.a.createElement(Xt,{exact:!0,path:"/update-password",component:Gt}),r.a.createElement(Xt,{path:"/preference",component:Qt}),r.a.createElement(Xt,{path:"/home/:spaceId",component:At}),r.a.createElement(f.a,{to:Object(c.a)(Object(c.a)({},this.props.location),{},{pathname:"/login"})})))):r.a.createElement("div",null)}}]),a}(r.a.PureComponent);var Jt=Object(g.b)((function(e){return{tenant:E(e)}}),(function(e){return{actions:Object(p.bindActionCreators)({loadMeAndConfig:ze},e)}}))(Yt);function $t(e,t){var a={};if("en"===e){var n=$()[e].translations;return Object.assign(a,n),{type:"RECEIVED_TRANSLATIONS",data:{locale:e,translations:a}}}return function(a){G.doFetch(t).then((function(t){a({type:"RECEIVED_TRANSLATIONS",data:{locale:e,translations:t}})})).catch((function(e){console.warn("Actions - loadTranslations - recreived error: ",e)}))}}var Zt=a(532),ea=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleLocaleChange=function(e){n.loadTranslationsIfNecessary(e)},n.loadTranslationsIfNecessary=function(e){if(!n.props.translations){var t=Z(e);"en"!==e&&t&&n.props.actions.loadTranslations(e,t.url)}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.handleLocaleChange(this.props.locale)}},{key:"componentDidUpdate",value:function(e){e.locale!==this.props.locale&&this.handleLocaleChange(this.props.locale)}},{key:"render",value:function(){return r.a.createElement(Zt.a,{key:this.props.locale,locale:this.props.locale,messages:this.props.translations},this.props.children)}}]),a}(r.a.PureComponent);var ta=Object(g.b)((function(e){var t=ee(e);return{locale:t,translations:te(e,t)}}),(function(e){return{actions:Object(p.bindActionCreators)({loadTranslations:$t},e)}}))(ea);o.a.render(r.a.createElement(g.a,{store:he},r.a.createElement(ta,null,r.a.createElement(Jt,null))),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.8ae8a1f3.chunk.js.map